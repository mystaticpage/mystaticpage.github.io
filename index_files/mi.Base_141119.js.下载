MI.Base={};(function(n){n.jubao=function(a,b){if(MI.user.account){jubao.wrap||(jubao.wrap=UI.html('<div style="width:530px;height:400px;overflow:hidden;border:solid #FFF;border-width:5px 0 10px"><iframe src="about:blank" frameborder="0" scrolling="no" onload="MI.dialog.hideLoad()"></iframe></div>')[0]);jubao.oIFrame||(jubao.oIFrame=jubao.wrap.firstChild,jubao.oIFrame.style.cssText="width:538px;height:430px;background:#FFF;margin:-28px 0 0 -5px;-margin-top:-32px;border-style:none");var c="http://jubao.qq.com/cn/jubao?";b&&2==b&&(c="http://jubao.qq.com/cn/im_appeal?");""!=a&&(c+=a);MI.dialog.show({title:'<h3 class="DmainTit">'+(b&&2==b?_("腾讯申诉平台"):_("腾讯举报平台"))+"</h3>",width:562,html:jubao.wrap,start:function(){MI.Bos("btnReportAll")},end:function(){jubao.oIFrame.src="about:blank"},closeEnd:function(){MI.Bos("btnCloseReport")}});MI.dialog.showLoad();jubao.oIFrame.src=c}else MI.newQucikLogin()};n.jubao_onClose=function(){MI.dialog.hide()};n.jubao_msg=function(a){jubao("appname=micoblog&subapp=web&jubaotype=msg&tw_msg_id="+a+"&tw_name=&tw_vip=&envname=web")};n.jubao_pm=function(a){jubao("appname=micoblog&subapp=pm&jubaotype=msg&tw_msg_id="+a+"&tw_name=&envname=web")};n.jubao_user=function(a){jubao("appname=micoblog&subapp=web&jubaotype=uin&tw_pic_url=&tw_name="+a+"&tw_vip=&envname=web")};n.jubao_qun_msg=function(a,b,c){jubao("appname=micoblog&subapp=weiqun&jubaotype=msg&tw_msg_id="+a+"&tw_name=&tw_vip=&envname=web&groupid="+b+"&zone="+(c?c:1))};n.jubao_url=function(a,b,c,d){c=encodeURIComponent(c);1==d?jubao("appname=micoblog&subapp=web&jubaotype=url&tw_msg_id="+a+"&tw_name="+b+"&url="+c):2==d&&jubao("appname=appeal&subapp=micoblog_web&jubaotype=url&tw_name="+b+"&langcode=0&encoding=2&url="+c,d)};n.jubao_notice=function(a){jubao("appname=micoblog&subapp=app_notice&jubaotype=msg&tw_msg_id="+a+"&tw_name=")};n.MIIco=[];n.MIIcoHtml=[];n.MIIcon=function(a){return"<%for(var k=0,num=MIIco.length;k<num;k++){if("+a+"[MIIco[k]]){%><%=MIIcoHtml[k]%><%;}}%>"};var j=UI.G,h=UI.GC;if(!n.MIApp||n.MIApp.lib)n.$=UI.G,n.$$=UI.GC;MI.tmpl.msg=['<%for(var i=0,n=talk.length;i<n;i++){%><li id="<%=talk[i].id%>" rel="<%=talk[i].timestamp%>">\t<div class="msgBox"><div class="userName">',_("发给"),' <a href="http://t.qq.com/<%=talk[i].name%>" title="<%=talk[i].bkname||talk[i].nick%>(@<%=talk[i].chName || talk[i].name%>)"><%=talk[i].bkname||talk[i].nick%></a>',MIIcon("talk[i].flag"),'</div><div class="msgCnt"><%=talk[i].content%></div><div class="pubTime"><span class="time"><%=talk[i].time%></span> <%=talk[i].from%></div><p class="btnBox"><a href="#" class="replyMsg btn" rel="<%=talk[i].chName || talk[i].name%>">',_("再写一封"),'</a><a class="btn delBtn" href="#">',_("删除"),"</a></p></div></li><%}%>"].join("");MI.tmpl.msgIn=['<%for(var i=0,n=talk.length;i<n;i++){%><li id="<%=talk[i].id%>" rel="<%=talk[i].timestamp%>">\t<div class="userPic"><a href="http://t.qq.com/<%=talk[i].name%>" title="<%=talk[i].bkname||talk[i].nick%>(@<%=talk[i].chName || talk[i].name%>)"><img src="<%=talk[i].pic%>"></a></div>\t<div class="msgBox"><div class="userName"><strong><a href="http://t.qq.com/<%=talk[i].name%>" title="<%=talk[i].bkname||talk[i].nick%>(@<%=talk[i].chName || talk[i].name%>)"><%=talk[i].bkname||talk[i].nick%></a>',MIIcon("talk[i].flag"),':</strong></div><div class="msgCnt"><%=talk[i].content%></div><div class="pubTime"><span class="time"><%=talk[i].time%></span> <%=talk[i].from%></div><p class="btnBox"><a href="#" class="replyMsg btn" rel="<%=talk[i].chName || talk[i].name%>">',_("回信"),'</a><a class="btn delBtn" href="#">',_("删除"),"</a></p></div></li><%}%>"].join("");MI.tmpl.fullMediaTalk='<div class="talkWrap bgr3"><div class="sendCnt"><div class="cont bgr"><textarea class="inputTxt c_tx2"></textarea></div><div class="bot clear"><div class="sendStatus"></div><div class="insertFun"><div class="sendList insertFace"><a title="表情" href="#" class="txt"><em class="sico ico_face"></em></a></div><div class="sendList uploadPic"><a href="#" class="txt sendPic" tabindex="3"><em class="sico ico_pic"></em>图片</a></div><div class="sendList uploadMusic"><a tabindex="3" title="可按歌名、歌手名搜索并添加音乐" href="#" class="txt"><em class="sico ico_audio"></em>音乐</a></div><div class="sendList record"><a title="可录下你的语音" href="#" class="txt"><em class="sico ico_record"></em>录音</a></div><div class="sendList uploadVideo"><a href="#" class="txt" title="QQvideo、优酷、土豆、酷六可直接播放，也可自己上传" tabindex="3"><em class="sico ico_videos"></em>视频</a></div><div class="sendList atSome"><a title="@朋友帐号就可以提到他" href="#" class="txt"><em class="sico ico_at"></em>朋友</a></div></div><div class="left"></div><input type="button" value="" class="inputBtn sendBtn"><span class="countTxt c_tx5"></span></div></div></div>';MI.tmpl.msgBox=['<div class="oldMsgBox"><table border="0" cellspacing="0" cellpadding="0" class="letterBg"><tr><th>',_("收信人"),'</th><td><div class="txtWrap"><input type="text" name="userName" id="userName" class="msgTo inputTxt" value=""/> <span class="cNote">',_("请输入你的听众的微博帐号"),"</span></div></td></tr><tr><th>",_("内　容"),"</th><td>",MI.tmpl.fullMediaTalk,"</td></tr></table></div>"].join("");MI.tmpl.note=['<%for(var i=0,n=talk.length;i<n;i++){%><li id="<%=talk[i].id%>" rel="<%=talk[i].timestamp%>">\t<div class="msgBox"><div class="msgCnt"><%=talk[i].content%></div><div class="pubTime"><span class="time"><%=talk[i].time%></span></div><p class="btnBox"><a href="#" class="replyMsg btn">',_("修改"),'</a><a href="#" class="btn delBtn">',_("删除"),"</a></p>\t</div></li><%}%>"].join("");MI.tmpl.black=['<div class="confirm_larger_box clear"><div class="ui_ico_b"><i class="ui_warnico"></i></div><div class="cnt"><h3 class="tit">',_("确定将{0}拉入黑名单？","<%=sex%>"),'</h3><div class="content"><span class="info_tx">',_("拉黑之后"),"...<br/>",_("你们之间的收听关系将被解除，对方无法再收听你，而且你也不再收到来自{0}的任何消息与通知","<%=sex%>"),'</span></div><div class="opt"><label class="gb_btn gb_btn1"><input type="button" class="t" value="',_("确定"),'" /></label><label class="gb_btn gb_btn5"><input type="button" class="t" value="',_("取消"),'" onclick="MI.dialog.hide()"/></label></div</div></div>'].join("");MI.tmpl.unblack=['<div class="confirm_larger_box clear"><div class="ui_ico_b"><i class="ui_warnico"></i></div><div class="cnt"><h3 class="tit">',_("你真的原谅{0}了吗？","<%=sex%>"),'</h3><div class="content"><span class="info_tx">',_("取消之后"),"...<br/>",_("你会重新收到来自{0}的私信和其它通知","<%=sex%>"),'</span></div><div class="opt"><label class="gb_btn gb_btn1"><input type="button" class="t" value="',_("确定"),'" /></label><label class="gb_btn gb_btn5"><input type="button" class="t" value="',_("取消"),'" onclick="MI.dialog.hide()"/></label></div</div></div>'].join("");MI.tmpl.card=['<div class="uc uc_hand_down"><div class="uc_in clear">\t<div class="uc_loading"><i class="loading"></i>',_("资料卡加载中..."),'</div>\t<div class="uc_c1 clear"><div class="uc_c1_l"> <a class="avatar" href="#" target="_blank"><img></a> </div><div class="uc_c1_r">\t<h2 class="tit"></h2>\t<p class="info"></p>\t<p class="stats"></p></div>\t</div>\t<div class="uc_c2 clear"><div class="uc_c2_l">\t<label class="gb_btn gb_btn3"><i class="icon icon_fo2"></i><input type="button" value="',_("收听"),'" class="t uc_follow">\t</label>\t<span class="gb_foed gb_fo1"><i class="icon icon_sfo"></i><span class="t uc_unfollow delAttention">',_("已收听"),'，<a href="#" class="t">',_("取消"),'</a></span></span>\t<span class="gb_foed gb_fo1"><i class="icon icon_bfo"></i><span class="t uc_uneach delAttention">',_("已互听"),'，<a href="#" class="t">',_("取消"),'</a></span></span></div><div class="uc_c2_r">\t<ul class="bt_gp1 bt_gp1_x1 clear"><li class="bt_gp_c"><a class="msg gb_btn gb_btn5" href="#"><span class="t">',_("私信"),'</span></a></li><li class="more bt_gp_c last"><a class="gb_btn gb_btn5" href="#"><span class="t">',_("更多"),'</span><b class="arrow"></b></a><div class="ui_drop ui_drop_ucopt_more" style="width:54px;">\t<div class="ui_drop_in"><div class="ui_drop_body">\t<div class="ui_drop_lst"><div><a href="#" class="note">',_("备注"),"</a></div>"+(MI.user.fun.apolloStyle?"":'<div><a href="#" class="list">'+_("名单")+"</a></div>")+'<div><a href="#" class="addqq">',_("加QQ"),'</a></div><div><a href="#" class="black">',_("拉黑"),'</a></div><div><a href="#" class="report">',_("举报"),'</a></div>\t</div></div>\t</div>\t</div></li>\t</ul></div><div class="status_black"></div>\t</div>\t<div class="uc_c3 clear"><p class="info"></p>\t</div>\t<b class="caret_out"></b> <b class="caret_in"></b> </div>\t</div>'].join("");MI.tmpl.code=['<div class="verify"><span class="ico_tsW"><span class="ico_te"></span></span><h3></h3><div class="clear"><form><div class="left">',_("验证码："),'</div><div class="verifyInput"><input type="text" class="inputTxt" /><div class="cNote">',_("输入下图中的字符，不区分大小写"),'</div><img width="130" height="53">&nbsp;<a href="#" class="codeChange">',_("看不清，换一张"),'</a></div></div><div class="btnBox"><button type="submit" class="btn2">',_("确定"),'</button><button type="button" class="btn2">',_("取消"),"</button></form></div></div>"].join("");MI.tmpl.know=['<div class="tjRelaWrap"><div class="title"><div class="left">'+_("可能认识的人"),'<a class="cSign" style="display:none"></a><a class="change" href="#">['+_("换一换")+']</a><a href="http://t.qq.com/potential.php" target="_blank">['+_("全部"),']</a></div><div class="right"><a href="#" class="closebtn">'+_("关闭"),'</a></div></div><ul class="tjRelaList clear addFollowSourceType" sourceType="11"><ul></div>'].join("");MI.loadPM=function(a){var b=MI.version.Message,c=MI.version.message;n.PMCMarkTime=+new Date;if(n.PM)a&&a();else{UI.getCss(c);var d=0;setTimeout(function(){if(!d){var a=MI.Uin(),b="&="+Math.random(),c=n.g_pmcompose_btrace=new Image,k=n.g_pmcompose_invest=new Image;c.onload=c.onerror=function(){n.g_pmcompose_btrace=null};k.onload=k.onerror=function(){n.g_pmcompose_invest=null};k.src="http://btrace.qq.com/collect?sIp=&iQQ="+a+"&sBiz=pm&sOp=login&iSta=8&iTy=454&iFlow="+b}},2E3);UI.getScript(b,function(){d=1;a&&a()},"utf-8")}};MI.pmcompose=function(a,b,c,d,e){var f={type:"compose",to:a,from:b,bostype:d,content:c,intro:e},g=0;MI.dialog.show({width:570,html:'<div style="width:508px;height:169px;text-align:center;line-height:12;"><img style="margin:0 5px -3px;" src="http://mat1.gtimg.com/www/mb/images/loading.gif"/>加载中...</div>',end:function(){g=1}});MI.loadPM(function(){1!=g&&(g=2,PM.init(f))});return!1};MI.pmembedcompose=function(a){a.type="embedcompose";a.from=5;MI.loadPM(function(){PM.init(a)})};MI.Speed=function(a,b,c,d,e,f,g){if(a&&Math.random()<b&&(c=c||0,d=d||0,e=e||0,f=f||0,g=g||0,MI.Speed.pic[UI.random(0,9)].src="http://qos.report.qq.com/collect?type=1&name="+a+"&1="+c+"&2="+d+"&3="+e+"&4="+f+"&5="+g,n.performance&&"t_my_index"==a)){var k=performance.timing;setTimeout(function(){MI.Speed(a+"_timing",1,k.domainLookupEnd-k.domainLookupStart,k.connectEnd-k.connectStart,k.responseStart-k.requestStart,k.responseEnd-k.responseStart,k.loadEventStart-k.responseEnd)},1E3)}};MI.Speed.pic=[];MI.Bos=function(a,b,c,d){var e,f={iFlow:0,iFrom:"",iPubFrom:"",sUrl:"",iUrlType:"",iPos:"",sText:"",iBak1:"",iBak2:"",sBak1:"",sBak2:"",sRef:"",sAppid:MI.TalkBox?MI.TalkBox.prototype.source:"0",iApiType:MI.api.type},g=UI.parseUrl(),k,g=g.pgv_ref||g.pref||g.ref||"",h="";if(UI.isObject(a)){e=1;a.iUrlType=MI.boss||"";a.sUrl=document.location.host+document.location.pathname+encodeURIComponent(document.location.hash||"");a.sRef=g;MI.BosCall&&MI.BosCall(a);for(var l in f)if(UI.isNumber(a[l])||UI.isString(a[l]))f[l]=a[l].toString().replace(/[\t\n\r&]/g,"");c=a.random;d=a.id;h=a.sBiz;g=a.sRef;k=a.cache;a=a.name}if(a.hasString("http"))MI.Bos.boss(a);else if(!(c&&Math.random()>c))try{var v=MI.Uin(),D=c="",q;d||(d=MI.api.boss||214);if(e)for(l in f)c+="&"+l+"="+(1210!=d?encodeURI(f[l]):f[l]);else{b=b||MI.boss;q={iFlow:0,sServerIp:"",iBackInt1:"",iBackInt2:"",sBackStr1:""};MI.api.type&&(q.iBackInt2=MI.api.type);if(UI.isNumber(b))q.iBackInt1=b;else if(UI.isString(b))q.iBackInt1=MI.boss,q.sBackStr1=b;else if(UI.isObject(b))for(l in b)UI.isUndefined(b[l])||(q[l]=b[l]);MI.BosCall&&MI.BosCall(q);for(l in q)c+="&"+l+"="+q[l]}D="http://btrace.qq.com/collect?sIp=&iQQ="+v+"&sBiz="+(h?h:"microblog")+"&sOp="+a+"&iSta=0&iTy="+d+c+(k?"":"&sRef="+g+"&r="+MI.random());MI.Bos.boss(D)}catch(r){}};MI.Bos2Open=function(a,b,c){(new Image).src=["http://open.t.qq.com/cgi-bin/oauth2/get_oauth2token_pt?appkey=",a,"&version=",b,"&seqid=",c,"&g_tk="+UI.cookie("skey")+"&response_type=token&appfrom=mstation"].join("")};MI.feedBack=function(a,b){function c(a){var b=[],b=a.split(",");return b.length}function d(a,b){for(var c in a)"object"==typeof a[c]?(b[c]={},d(a[c],b[c])):b[c]=a[c]}a.sBak1?a.iFlow=c(a.sBak1):a.sBak2&&(a.iFlow=c(a.sBak2));a.iPubFrom=MI.api.type?MI.api.type:0;var e;e=b?b:(new Date).getTime();if(20<a.iFlow){a.iBak2=e;var f=[],g=[],k,h;k={};h={};d(a,k);d(a,h);var l="";a.sBak1?l=a.sBak1:a.sBak2&&(l=a.sBak2);for(var v=[],v=l.split(","),l=0;20>l;l++)f.push(v[l]);for(l=20;l<a.iFlow;l++)g.push(v[l]);a.sBak1?(k.sBak1=f.join(","),h.sBak1=g.join(",")):a.sBak2&&(k.sBak2=f.join(","),h.sBak2=g.join(","));k.iFlow=20;h.iFlow=a.iFlow-20;MI.Bos(k);MI.feedBack(h,e)}else MI.Bos(a)};MI.Bos.boss=function(a){var b=MI.Bos.pic[MI.Bos.index];MI.Bos.index++;10==MI.Bos.index&&(MI.Bos.index=0);b.src=a};MI.Bos.pic=[];for(var p=MI.Bos.index=0;10>p;p++)MI.Bos.pic.push(new Image),MI.Speed.pic.push(new Image);MI.changeLang=function(a){a=UI.E(a).target;a=UI.A(a,"data-flag");MI.ajax({url:MI.url.myViewSettingSave,type:"post",async:!1,data:{lang:a},success:function(a){a=MI.json(a);0==a.result&&location.reload()}})};MI.addHover=function(a,b){var c,d,b=b||"hover";a&&(a.onmouseover=function(){var a=this;clearTimeout(d);c=setTimeout(function(){UI.B.ie6&&UI.addClass(a,b)},20)},a.onmouseout=function(){var a=this;clearTimeout(c);d=setTimeout(function(){UI.removeClass(a,b);UI.removeClass(a,"newMsg bg4 bor_bg5")},20)})};MI.goHome=function(a){document.location.href="http://t.qq.com/"+MI.user.account+(a?"?"+a:"")};MI.sidePanelUserProfile=function(a){MI.user.fun.userSidePanel&&!MI.user.fun.apolloStyle&&MI.app({Wide:function(){setTimeout(function(){MI.sidePanel.userProfile&&MI.sidePanel.userProfile(a)},100)}})};MI.sidePanelTopicProfile=function(a){MI.user.fun.topicSidePanel&&!MI.user.fun.apolloStyle&&MI.app({Wide:function(){setTimeout(function(){MI.sidePanel.topicProfile&&MI.sidePanel.topicProfile(a)},100)}})};MI.sidePanelChannelProfile=function(a,b){MI.app({Wide:function(){MI.sidePanel.channelProfile&&MI.sidePanel.channelProfile(a);b&&"function"===typeof b&&b()}})};MI.sidePanelUrlProfile=function(a){MI.user.fun.apolloStyle||MI.app({Wide:function(){MI.sidePanel.urlProfile&&MI.sidePanel.urlProfile(a)}})};MI.alert=function(a,b){a&&MI.dialog.alert(a,b)};MI.tip=function(a,b){a&&MI.dialog.showTip({html:a,end:b})};MI.reply=function(a,b,c,d,e){MI.card.addEvent();MI.card.chName=a;MI.card.bkname=MI.card.name=b;MI.card._reply.onclick();a=MI.card.reply.talkBox;a._txt.value=c||"";d=d||"";a.data?a.data.pgv_ref=d:a.data={pref:d};if(e)for(var f in e)a[f]=e[f]};MI.talk=function(a,b,c,d,e,f,g){MI.talk.reply||(MI.talk.reply=new MI.Reply);var k=MI.talk.reply.talkBox;k.data=g||{};k.delMedia&&k.delMedia();if(d&&(k.addMusic(d),d.vid&&(k.vid=d.vid,k.successStart=function(){MI.confirm({type:"success",title:"发布提示",content:d.msg,confirmTxt:"确定",confirm:function(){MI.dialog.hide()},cancelTxt:"取消",cancel:function(){}})}),d.video&&(k._video="浮层视频",k.getVideo(d.video)),d.pic&&(k.addPic({result:0,info:{image:d.pic,fileName:_("图片.jpg")}}),k.sourcePic=d.pic),d.source&&(k.source=d.source),d.picTabs))UI.show(h(k._body,".uploadPic")[0]),k.showPicTabs=d.picTabs;MI.talk.reply.show({title:a||"",cont:b||"",height:c||40,syncQzone:f||0,success:e})};MI.chat=function(a,b,c){MI.app({WebQQ:function(){MI.WebQQ.loadCssed?MI.WebQQ.chat(a,b,c):(MI.WebQQ.loadCss(),setTimeout(function(){MI.WebQQ.chat(a,b,c)},500))}})};MI.recom=function(a,b,c){MI.card.addEvent();MI.card.account=a;MI.card.bkname=MI.card.name=b;MI.card.recomText=c;MI.card._recom.onclick();MI.card.recomText=""};MI.hotLine=function(a,b,c){MI.card.addEvent();MI.card.account=a;MI.card.topic=c;MI.card.bkname=MI.card.name=b;MI.card._hotLine.onclick();MI.card.topic=""};MI.reFollow=function(a,b){MI.card.addEvent();MI.card.account=a;MI.card.bkname=MI.card.name=b;MI.card._reFollow.onclick();MI.Bos("btnGuestReFollow");return!1};MI.message=function(a,b,c){MI.pmcompose(a,3,b,c)};MI.miniPlayer=function(){MI.user.fun.miniPlayer&&j("header")&&setTimeout(function(){UI.append(UI.html('<div id="miniPlayerBox" style="position:fixed;-position:absolute;-top:expression((document.documentElement||document.body).scrollTop+(document.documentElement||document.body).clientHeight-34 + \'px\');bottom:0;left:0;z-index:999;"></div>')[0],document.body);UI.getScript("http://imgcache.qq.com/music/miniplayer/v2/miniplayer.js",function(){n.MUSIC&&MUSIC.miniPlayer.bootstrap()})},4E3)};var p=function(a){MI.ajax({url:MI.url.homeBitSet,data:this.href.split("?")[1],success:function(a){a=MI.json(a);0==a.result&&document.location.reload()}});a.prevent()},V={"#pageSetLink":p,".wideSetLink":p};MI.pageClick=function(a,b){b&&(V[a[0]]=b);UI.proxyEvent(document.body,"click",function(a){return function(b){V[a]&&V[a].call(this,b)}},a)};var T=null,Z={},W;MI.pageLoad=function(a){if(a.id&&(a.url&&a.target&&!Z[a.target])&&(Z[a.target]=1,UI.proxyEvent(j(a.id)||document.body,"click",function(){return function(b){var d=this.href.match(/\?.+/g);if(d){var d=d.join("").slice(1),e=1;UI.isFunction(a.goTop)?e=this.href.hasString("filter=13")?UI.getY(h(".msgBox .tl_picVote")[0])-35:a.goTop():UI.isUndefined(a.goTop)||(e=a.goTop);d={id:a.id,url:a.url,data:d,js:a.js,pv:UI.isUndefined(a.pv)?1:a.pv,goTop:e,noSetHash:a.noSetHash};MI.paneLoad(d);d.noSetHash||(e=d.data,T||(T={},UI.EA(n,"hashchange",function(){var a=T[document.location.hash.slice(1)];!W&&a&&MI.paneLoad(a)})),W=1,T[e]=d,document.location.hash=e,setTimeout(function(){W=0},0));b.prevent()}}},[a.target]),a.auto)){var b=document.location.hash.slice(1);MI.paneLoad({id:a.id,url:a.url,js:a.js,data:b?b:a.auto})}};MI.paneLoad=function(a){var b;a.id&&(b=UI.isElement(a.id)?a.id:j(a.id));b&&a.url&&UI.ready(function(){MI.paneLoad.xhr&&MI.paneLoad.xhr.abort();var c=a.data||"";MI.paneLoad.xhr=MI.ajax({url:a.url,data:c,type:"get",success:function(d){d=MI.json(d);0==d.result&&d.info&&(b.innerHTML=d.info,UI.show(b),UI.evalScript(d.info),a.js&&a.js(d),a.goTop&&n.scrollTo(0,a.goTop),a.pv&&(MI.Crs.iconPic="x",MI.Crs(1),MI.PV((MI.guest?"guest/v2/pane":"home/v2/pane")+document.location.pathname+(c?"?"+c:""))))}})})};MI.follow=function(a,b,c,d,e){MI.fC.init||(MI.fC.numFormat=h(".followNumFormat"),MI.fC.num=h(".followNum"),MI.fC.init=1);var f=1,f=void 0==e?f:e;if(!b.sending){var g=-1,k=-1,x,l=j("followedNum_"+a),v=j("followNum_"+a),D=!UI.hasClass(b,"addAttention")&&!UI.hasClass(b,"delAttention")&&!UI.hasClass(b,"delEach");UI.hasClass(b,"addAttention")||D?(g=1,x=MI.url.follow):(UI.hasClass(b,"delEach")&&(k=g=1),x=MI.url.unfollow);b.sending=1;var q="",r;UI.hasClass(b,"addFollowSourceType")?r=b:(e=UI.parents(b,"addFollowSourceType")[0])&&(r=e);r&&(q=UI.A(r,"sourceType"));var i,B,n,$;i=+new Date;MI.ajax({url:x,data:{u:a,veriCode:d||"",lieuId:q},success:function(d){B=+new Date-i;b.sending=0;d=MI.json(d);if(d.result==0){if(!D&&f)if(g==1){UI.removeClass(b,"addAttention");k==1?UI.addClass(b,"delEach"):UI.addClass(b,"delAttention")}else{UI.addClass(b,"addAttention");k==1?UI.removeClass(b,"delEach"):UI.removeClass(b,"delAttention")}l&&MI.countNum(l,g);v&&MI.countNum(v,g);for(var e=0,h=MI.fC.numFormat.length;e<h;e++)MI.countNum(MI.fC.numFormat[e],g,1);e=0;for(h=MI.fC.num.length;e<h;e++)UI.A(MI.fC.num[e],"rel")==a&&MI.countNum(MI.fC.num[e],g);if(!UI.isUndefined(d.followTips))MI.user.fun.followList=d.followTips;if(MI.user.fun.noFollowList)MI.user.fun.followList=0;if(MI.guest&&MI.guest.user&&MI.guest.user==a&&UI.A(b,"left")=="add")MI.user.fun.followList=0;MI.user.fun.followList&&(d.info&&g==1&&!a.hasString(","))&&(MI.Tag&&MI.Tag.sayHiStorage()==""||MI.user.fun.apolloStyle&&MI.app({"quan/quanDialog":function(){MI.QuanDialog.quanFollow(a)}}));c&&c(g,b,a);b.value=g==1?_("取消收听"):_("收听");g==1&&MI.S("time",0)}else MI.code.check(d.result)?MI.code.show({msg:d.msg,code:d.info,call:function(d){MI.follow(a,b,c,d)}}):g==1&&(d.result==-65||d.result==-66)?d.result==-65?MI.confirm({type:"error",title:_("你已达到收听上限"),width:280,content:_('需取消部分才能继续添加</br>也可<a href="http://p.t.qq.com/levelDetail.php?u='+MI.user.account+'&t=2" target="_blank" boss="toUpLevel_follow">提高微博等级</a>提升上限'),confirmTxt:_("管理"),url:"http://t.qq.com/"+MI.user.account+"/following",cancelTxt:_("取消"),confirm:function(){}}):d.result==-66&&MI.alert("你收听已到万，知晓天下事，<br>无需更多收听了！"):d.msg&&d.result!=-1&&MI.alert(d.msg);MI.api.type==5&&x==MI.url.follow&&MI.Bos("btnQzAppFollow");n=+new Date-i;setTimeout(function(){$=+new Date-i;MI.Speed("t_asyn_follow",0.1,B,n,$)},0)}})}};MI.showShieldDialog=function(a){MI.showShieldDialog._dom||(MI.showShieldDialog._dom=UI.html('<div class="n_post_wrap" id="notice"><div class="n_post"><p class="n_post_tit">用户朋友：</p><p class="n_post_cont">近期，通过微博客传播的谣言等违法有害信息造成了不良社会影响，评论跟帖中的有害信息相对较多，需要作集中清理。为此，本网站决定，自3月31日上午8时至4月3日上午8时，暂时停止微博客评论功能。由此给您带来的不便，敬请谅解。</p><p class="n_post_foot">腾讯网<br>2012年3月31日</p></div><p class="n_post_fun"><label class="gb_btn gb_btn2" style="float:none"><input type="button" value="知道了" class="t"></label></p></div>')[0],UI.css(".n_post_wrap{padding:25px 10px}.n_post{width:478px;padding:10px 15px;font-size:14px;border:1px solid #DCDCDC;background-color:#F4F4F4}.n_post_cont{text-indent:2em;padding:8px 0}.n_post_foot{text-align:right}.n_post_fun{margin-top:20px;text-align:center}.n_post_fun .gb_btn{position:static;padding-left:8px;_padding-left:15px;_padding-right:15px}"));MI.dialog.show({title:'<h1 class="DmainTit">腾讯微博客公告</h1>',html:MI.showShieldDialog._dom,end:function(){if(a)a();else return false},start:function(){h(MI.showShieldDialog._dom,".gb_btn.gb_btn2 .t")[0].onclick=function(){MI.dialog.hide();a&&a()}}})};MI.topic=function(a,b,c){if(!b.sending){var d=c||UI.hasClass(b,"delAttention"),e=d?"2":"1",f=j("gzTopic");f&&UI.A(f,"tab",2);MI.ajax({url:MI.url.topicFollow,data:{tid:a,type:e},success:function(e){e=MI.json(e);if(0==e.result){if(c){var f=b.parentNode;UI.animate(f,"opacity",0,function(){UI.remove(f);MI.updateTopic()})}else b.className=d?"addAttention":"delAttention",b.value=d?_("收听"):_("取消收听"),MI.updateTopic();MI.countNum(j("followedNum_"+a),d?-1:1)}else-1!=e.result&&MI.alert(e.msg);b.sending=0}})}b.sending=1};MI.topicDel=function(a,b){MI.topic(a,b,1)};MI.topicOp=function(a,b,c){if(b){if(!b.sending){var d=c||"1"==UI.A(b,"fo"),e=j("gzTopic");e&&UI.A(e,"tab",3);MI.ajax({url:MI.url.searchFeed,data:{type:d?3:2,name:a},success:function(a){a=MI.json(a);if(0==a.result)if(c){var e=b.parentNode;UI.animate(e,"opacity",0,function(){UI.remove(e);MI.updateTopic()})}else b.innerHTML=d?"+"+_("订阅关键词"):"-"+_("取消订阅"),UI.A(b,"fo",d?"0":"1"),MI.updateTopic();b.sending=0}})}b.sending=1}};MI.updateTopic=function(a,b){if(a=a||j("gzTopic")){var c=UI.A(a,"unfold")||0,d=UI.A(a,"tab");b&&(c=c?0:1);var e="t=topic&unfold="+c;d&&(e+="&tab="+d);MI.ajax({url:MI.url.mySidebar,data:e,type:"get",success:function(d){d=MI.json(d);0==d.result&&(d.info&&d.info.topic&&(b&&UI.A(a,"unfold",c),a.innerHTML=d.info.topic,UI.evalScript(d.info.topic)),MI.Load.bottom())}});b&&MI.Bos(c?"btnMoreSub":"btnLessSub")}};MI.buildTip=function(a){UI.ready(function(){if(a&&a.id){var b=j(a.id);if(b){var c={},d="tips_jsTips_"+MI.Uin();MI.isS&&MI.S(d)&&(c=MI.json(MI.S(d)));c[a.id]?UI.remove(b):(UI.show(b),UI.proxyEvent(b,"click",function(){return function(e){c[a.id]=1;MI.S(d,UI.json2str(c));UI.remove(b);a.closeCall&&a.closeCall();e.prevent()}},[".closeTip"]))}}})};MI.sceneId=function(){var a=MI.boss,b="",c,d={homepage:[11,41,35,58,59],at:[43,25],user:[7],topic:[29],search:[93,94,95,96,97],following:[6],follower:[5],other:[]};a&&UI.each(d,function(d,f){b=f;UI.each(d,function(b){b==a&&(c=1);return 1});if(c)return 1});return b};MI.TalkBox&&(MI.TalkBox.prototype.addFace=function(){var a=this;MI.app("module/TalkBox.addFace",function(b){b(a)})},MI.TalkBox.prototype.hideFace=function(){this._faceBox&&(UI.hide(this._facePreview),UI.hide(this._faceBox),this.faceConfig&&this.faceConfig.afterHide&&this.faceConfig.afterHide(this._faceBox))},MI.TalkBox.showDraft=function(a){if(a&&!UI.B.ipad){var b=MI.Uin(),c="draft_"+b,d="draft_pic_"+b,e="draft_pics_"+b,f="long_wb_"+b,g="draft_adrich_"+b;a.autoSave&&(a._txt&&MI.isS)&&((a._txt.value||(a._txt.value=MI.S(c).replace(/^undefined|^Null/,"")||""),a.countTxt(),1<UI.parseUrl().p)?(b=250,(c=a._body)&&(b=UI.getY(c)+UI.height(c)),n.scrollTo(0,b)):setTimeout(function(){if(!a._msgTo&&location.hash!="#M"&&UI.scrollY()<250&&a._txt.value&&!a.guideText)try{a.focus()}catch(b){}d=MI.json(MI.S(d));e=MI.json(MI.S(e)||"[]");f=MI.json(MI.S(f));a.data.adRich=MI.S(g)||0;if(a.data.adRich&&a.isNew){a.RemoveAttachAd=1;UI.linkEvent.add("TalkBox.Attach.del",function(){MI.talkBox.data.adRich=0;MI.S("draft_adrich_"+MI.Uin(),0)})}if(d.result==0){d.isdraft=1;a.pics=e;a.isNew||MI.app("TalkBoxRich",function(){UI.fireEvent(h(a._body,".uploadPic .txt")[0],"click");a.addPic(d)})}if(f.result==0){MI.Bos("refreshLongWB");f.id&&MI.ajax({url:"http://api.t.qq.com/longweibo/refresh.php",type:"get",data:{lid:f.id},success:function(b){b=MI.json(b);if(b.result==0){b=b.info||{};f.title=b.title;f.html=b.content;f.tmplId=b.templateId;f.url=b.shorturl;MI.app("TalkBoxRich",function(){UI.fireEvent(a._txt,"focus");a.addLongWB(f)})}}})}},500))}});if(MI.TalkList){MI.TalkList.prototype.gongyiTips=function(a){var b=this,c="http://gongyi.qq.com/js/wgy/weigy.js?t="+MI.random();UI.getScript(c,function(){a._cont.innerHTML="<div>"+_("筑力计划•微爱参与人数：{0}人次",weigy_weibo_total)+"</div>";UI.show(a._body);a.position(b);MI.Bos("btnCheckGongyi")})};MI.TalkList.prototype.levelTips=function(a){var b=this,c={mid:"10243"},d=UI.A(this,"user");if(d)c.u=d;MI.ajax({url:MI.url.medal,data:c,type:"get",success:function(c){c=MI.json(c);if(c.result==0){a._cont.innerHTML="<div>"+c.info.html+"</div>";UI.show(a._body);a.position(b);MI.Bos("btnCheckLevel")}}})};MI.TalkList.prototype.grayVipIcon=function(a){a._cont.innerHTML=UI.A(this,"tipsword")||"想要经验值加倍增长？<a boss='btnGoVip_UINTip' href='http://vip.t.qq.com/?showMinipay=1&amount=3&pgv_ref=web.hm.grayicn' target='_blank'>开通微博会员</a>";UI.show(a._body);a.position(this)};MI.TalkList.prototype.wbstarTips=function(a){var b=this;if(!MI.guest){a._cont.innerHTML='<div style="width:210px;height:70px" class="loading"></div>';a.position(b);UI.show(a._body);MI.ajax({url:"http://p.t.qq.com/asyn/wbstarGetInfluenceInfo.php",type:"get",success:function(c){c=MI.json(c);if(c.result===0){if(c.influence.length){var d=a._cont,e="",f={"美食":"food","旅行":"trip","真我":"other"};UI.each(c.influence,function(a,b){var c='href="http://p.t.qq.com/wbstar_rank.php?id='+a.key+'&from=aff"',d='<a target="_blank" '+c+">未上榜</a>";a.rank<=100&&a.rank>0&&(d='<a title="'+a.name+"领域top"+a.rank+'" target="_blank" '+c+'><span class="influence_icon '+f[a.name]+"_influence_top"+(a.rank<=10?"10":"100")+'"></span></a>');e=e+('<tr><td><div class="w4"><a target="_blank" boss="btnHoverWbStarLink'+(b+1)+'" href="http://k.t.qq.com/k/'+a.topic+'">'+a.name+'</a></div></td><td><div class="w4">'+a.val+'</div></td><td><div class="w2">'+d+"</div></td></tr>")});d.innerHTML='<div><div class="influence_pop_index"><table cellpadding="0" cellspacing="0"><tbody><tr><th><div class="w4">投稿领域</div></th><th><div class="w4">影响力值</div></th><th><div class="w2">排名</div></th></tr>'+e+"</tbody></table></div></div>";MI.Bos("btnHoverWbStarInfo")}else{a._cont.innerHTML='<div><div class="influence_pop_index">影响力可以帮你加强曝光，增多听众。目前你的影响力数值为0。<div><a target="_blank" href="http://p.t.qq.com/wbstar_influence.php" boss="btnHoverWbStarLink0">我要提升影响力<span class="ffsong">&gt;&gt;</span></a></div></div></div>';MI.Bos("btnHoverWbStarNull")}a.position(b);UI.show(a._body)}}})}};MI.TalkList.prototype.urlTips=function(a){function b(b){if(b.result==0){var e=MI.api.type==4,f=UI.A(c,"reltitle");if(f)b.info.title=f;k=b.info.url;var f={5:/soso\.com/gi},l;for(l in f)if(f[l].test(k))b.info.safe=l;if(b.info.title&&b.info.safe>2){g=MI.string.cut(b.info.title,26);k=MI.string.cut(k,60);x="<br>"}else{g=d[b.info.safe-1]||d[0];x="：";k=MI.string.cut(k,80)}k=k.breakWord(0);l="";if(b.info.safe==1||b.info.safe==2||e){l=!UI.B.ie||e?"":"<a href=\"#\" onclick=\"var a=window.clipboardData.setData('Text',this.previousSibling.value),b=this.nextSibling;UI.hide(this);UI.show(b);b.innerHTML=a?'"+_("复制成功")+"':'"+_("复制失败")+"';return false\">"+_("复制网址")+'</a><a class="cNote" style="display:none;text-decoration:none"></a>';var f='<a href="###" class="jubao" boss="btnReportUrl">'+(b.info.safe==1||e&&b.info.safe!=2?_("举报链接"):_("申诉链接"))+"</a>",r="";if(e){r=document.createElement("a");r.href=b.info.url;r='<a href="http://www.scanv.com/seccenter/search/'+r.hostname+'" target="_blank">查看详情</a><img class="scanv" src="http://mat1.gtimg.com/www/mb/images/s/scanv.png" title="" alt=""><span class="c_tx5">提供检测结果</span>'}l='<p class="safeFun"><textarea style="display:none">'+b.info.url+"</textarea>"+l+f+r+"</p>"}a._cont.innerHTML=e?'<div class="safeBox clear"><em class="ico safe_'+(b.info.safe||1)+'"></em><p class="safeType">'+MI.string.html(g)+x+k+"</p></div></div>"+l:l+'<div class="safeBox clear"><em class="ico safe_'+(b.info.safe||1)+'"></em><p class="safeType">'+MI.string.html(g)+x+k+"</p></div></div>";UI.show(a._body);a.position(c);if(l=h(a._cont,".jubao")[0])l.onclick=function(){var a=UI.parents(c,"msgBox")[0],d,f="",g="";if(a){f=h(a,"a")[0].href;f=MI.string.id(f);d=UI.parent(a)}if(d)if(d.nodeName.toLowerCase()=="li")g=UI.A(d,"id");else(a=h(a,".pubInfo .time")[0])&&(g=MI.string.id(a.href));jubao_url(g,f,b.info.url,e?b.info.safe!=2?1:2:b.info.safe);return false}}}if(this.nodeName=="A"){var c=this,d=[_("原链接"),_("此网址可能含有恶意内容或被大量用户举报，不建议打开原链接"),_("腾讯网"),_("原链接"),_("搜搜")],e=c.href,f=e.match(/[^\/]+$/g)[0].split("?")[0],g="",k="",x="",l,i,D,q;if(!e.hasString("?")){var r=h(UI.closest(c,".talkListLi,li"),".time"),u=r.length,B="",j="";if(u){r=r[u-1];(B=UI.A(r,"from"))||(B="");j=MI.string.id(r.href)}UI.A(c,"href",(UI.B.ie?" ":"")+e+"?u="+MI.user.account+"&t="+j+"&msgfrom="+B+"&area=msgtext&clickfrom=3&clickscene="+MI.sceneId())}if(c.title){UI.A(c,"reltitle",c.title);c.title=""}if(MI.Tips.url[f]){b(MI.Tips.url[f]);MI.Bos("btnViewUrl","",0.01)}else{l=+new Date;MI.Tips.xhr=MI.ajax({url:MI.url.urlDetail,type:"get",data:"url="+f,success:function(a){i=+new Date-l;a=MI.json(a);if(a.result==0){b(a);MI.Tips.url[f]=a;MI.Bos("btnViewUrl","",0.01)}D=+new Date-l;setTimeout(function(){q=+new Date-l;MI.Speed("t_asyn_url",0.1,i,D,q)},0)}})}}};MI.TalkList.prototype.mallTips=function(a){var b=this,c={u:MI.user.account};if(MI.guest)c.u=MI.guest.user;MI.ajax({url:MI.url.shop,data:c,type:"get",success:function(c){c=MI.json(c);if(c.result==0){a._cont.innerHTML="<div>"+c.info.html+"</div>";UI.show(a._body);a.position(b);MI.Bos("btnCheckMallIcon")}else UI.A(b,"title",_("微商城"))}})};MI.TalkList.prototype.fromIcon=function(a){var b=UI.next(UI.parent(this)),c=h(b,".f")[0],d=c.href||"javascript:;";UI.fireEvent(c,"mousedown");if(!UI.A(this,"urlBoss")){UI.A(this,"urlBoss",1);UI.A(UI.parent(this),"href",(UI.B.ie?" ":"")+d)}a._cont.innerHTML=b.innerHTML;UI.show(a._body);UI.C(a._cont,"padding","2px 6px");UI.show(a._arrow);a.position(this);var a=h(a._cont,".ico_shield")[0],e=h(UI.parent(b),".ico_shield")[0];if(a){UI.removeClass(a,"ico_shield");a.onclick=function(){UI.fireEvent(e,"click");return false};MI.user.fun.apolloStyle&&UI.hide(a)}MI.Bos("btnViewFromIcon")};MI.TalkList.prototype.removeIcon=function(a){var b=this,c=UI.A(b,"titleName"),d=UI.A(b,"attrid"),e=UI.A(b,"close");a._cont.innerHTML="<div>"+c+' <a href="#" class="btnRe" iconId="'+d+'">去掉此图标</a></div>';UI.show(a._body);a.position(b);h(a._cont,".btnRe")[0].onclick=function(){MI.confirm({type:"mini",target:b,title:"需重新参加活动才可恢复",content:"确定去掉？",width:"190",xy:[-45,3],confirm:function(){MI.ajax({url:MI.url.userAttr,data:{t:d,v:e},type:"post",success:function(a){a=MI.json(a);if(a.result==0){MI.confirm.hide();setTimeout(function(){location.reload()},500)}else MI.alert(a.msg)}})}});return false};MI.Bos("btnCheckMallIcon")};MI.TalkList.prototype.exposeTips=function(a){var b=this,c=UI.closest(b,"li,.talkListLi"),d={id:c.id};if(c=h(c,".replyBox .time")[0])d.srcid=MI.string.id(UI.A(c,"href"));MI.ajax({url:"http://api.t.qq.com/tl/expose/getbenifit",type:"get",data:d,success:function(c){c=MI.json(c);if(c.result==0&&c.info.qb){c=UI.txTpl('<%var i;%><span class="icons dis_inb vt_m"><%for(i=0;i<5;++i){%><i class="ic ic_baoliao<%=i>=num?"_gray":""%>"></i><%}%></span><span class="text c_tx5">原文为<%=num%>星爆新鲜，获得<%=bonus%>Q币奖励</span>',{num:c.info.star,bonus:c.info.qb});a._cont.innerHTML=c;UI.show(a._arrow);UI.show(a._body);a.position(b);MI.Bos("btnCheckExpose")}}})};MI.TalkList.rotateImg=function(a,b){var c,d,e;if(!UI.B.ie)b.whirl=1;if(b.w===void 0){b.w=b.width;b.h=b.height;if(UI.B.opera){b.w=b.offsetWidth;b.h=b.offsetHeight}}a?b.r++:b.r--;if(b.r>3)b.r=0;else if(b.r<0)b.r=4+b.r;if(b.r%2!=0)if(b.h>460){c=460/b.h*b.w;d=460}else{c=b.w;d=b.h}else{c=b.w;d=b.h}b.style.width=c+"px";b.style.height=d+"px";if(UI.B.ie){(e=UI.checkCss3("Transform"))?b.style[e]="rotate("+b.r*90+"deg)":b.style.filter="progid:DXImageTransform.Microsoft.BasicImage(Rotation="+b.r+")";if(MI.user.fun.minSizePicCheck){e=UI.parents(b,"picBox")[0];var f=b.parentNode;if(b.r%2!=0){e.style.height=c+"px";b.parentNode.style.height=c+"px"}else{e.style.height=d+"px";b.parentNode.style.height=d+"px"}f.style.textAlign="left";b.style.marginLeft=e.clientWidth!=460?b.r%2!=0?(e.clientWidth-d)/2+"px":(e.clientWidth-c)/2+"px":b.r%2!=0?(e.clientWidth-b.height)/2+"px":(e.clientWidth-b.width)/2+"px"}d>c&&UI.C(f,"height",d+"px")}else MI.TalkList.picDraw(b,b.nextSibling,{w:c,h:d})};var p=MI.TalkList,M=!1,aa=UI.DC("div").style,U,ba={};UI.each(["OTransform","msTransform","WebkitTransform","MozTransform"],function(a){if(!UI.isUndefined(aa[a]))return M=true});U=(M?"":"_")+"rotate";aa=null;p.newRotateImg=function(a,b,c){var d=UI.A(a,"class"),e=UI.parent(a),f=UI.parent(e),g,k,h=UI.width(e),l=UI.width(UI.parent(UI.parent(e))),i;(g=ba[b])||(g=ba[b]=[UI.width(a),UI.height(a),d]);k=g[0];b=g[1];i=g[2];g=l>b&&b>h?b:b>l?l:h;d=d&&d.match(/(^|\b)_?rotate([0-9]+)/)?parseInt(RegExp.$2,10):0;if(c&&d===270&&M)d=360;else{!c&&(d===0&&M)&&UI.A(a,"class",[i,U+"360"].join(" "));d=(d+(c?90:270))%360}setTimeout(function(){UI.A(a,"class",[i,"rotate",U+d].join(" "))},0);c&&d===360&&setTimeout(function(){UI.A(a,"class",[i,U+"0","notran"].join(" "))},210);M||UI.C(a,"filter","progid:DXImageTransform.Microsoft.BasicImage(Rotation="+d/90+")");if(d%180&&g<b){k=g*g/b;b=g}if(d%180){UI.C(e,"width",b+"px");UI.C(e,"height",k+"px");b<66&&UI.C(f,"width","80px")}else{UI.C(e,"width",k+"px");UI.C(e,"height","auto");UI.C(f,"width","auto")}UI.C(a,"height",b+"px");UI.C(a,"width",k+"px");if(M)if(d%180){UI.C(a,"marginTop",(k-b)/2+"px");UI.C(a,"marginLeft",(b-k)/2+"px")}else{UI.C(a,"width",k+"px");UI.C(a,"marginTop","0px");UI.C(a,"marginLeft","0px")}};MI.TalkList.picDraw=function(a,b,c){var d=MI.canvas[b.id],e,f;e=a.width;f=a.height;if(c){e=c.w;f=c.h}a.style.cssText="display:none!important";b.style.display="inline";b.t=e;switch(a.r){case 0:UI.A(b,"width",e);UI.A(b,"height",f);d.drawImage(a,0,0);break;case 1:UI.A(b,"width",f);UI.A(b,"height",e);d.rotate(90*Math.PI/180);d.drawImage(a,0,-f,e,f);break;case 2:UI.A(b,"width",e);UI.A(b,"height",f);d.rotate(180*Math.PI/180);d.drawImage(a,-e,-f);break;case 3:UI.A(b,"width",f);UI.A(b,"height",e);d.rotate(270*Math.PI/180);d.drawImage(a,-e,0,e,f)}};MI.TalkList.picSize=function(a){a.w=a.width;a.h=a.height}}MI.viewSet=function(){function a(a){UI.each(h(a,".del_tag_icn"),function(a){a.onclick=function(){MI.ajax({url:MI.url.thirdappshield,type:"post",data:{type:2,fromid:UI.A(a,"shieldId")},success:function(b){b=MI.json(b);if(b.result==0){var c=UI.parents(a,"shieldLi")[0];UI.animate(c,"opacity",0,function(){UI.remove(c);return false},0.4)}}});return false}})}function b(){MI.dialog.show({title:'<h1 class="DmainTit">'+_("浏览设置")+"</h1>",html:MI.viewSet._body,width:560,start:function(){if(!UI.A(MI.viewSet._body,"event")){UI.A(MI.viewSet._body,"event",1);MI.ScrollBindEvent(h(MI.viewSet._body,".showModScroll")[0])}var b=j("md_listdel_pn");if(MI.user.fun.hasThirdAppShield&&b){var d=h(b.parentNode,".drop_arrow_pn")[0];a(b);if(d)d.onclick=function(){var d=this;MI.ajax({url:MI.url.thirdappshield,type:"post",data:{type:3,startindex:UI.A(d.parentNode,"startid")},success:function(f){f=MI.json(f);if(f.result==0){UI.each(UI.html(f.info[0]),function(d){UI.append(d,b);a(d)});f.hasNext?UI.A(d.parentNode,"startid",f.nextIndex):UI.remove(d)}return false}})}}}})}if(MI.viewSet._body)b();else{MI.viewSet.loading||MI.ajax({type:"post",url:MI.url.viewSet,success:function(a){a=MI.json(a);MI.viewSet._body=UI.html(a.info)[0];var a=MI.viewSet._body,d=h(a,"button");h(a,"input");setTimeout(function(){d[0].focus()},0);d[1].onclick=function(){MI.dialog.hide()};b();MI.app({Validate:function(){UI.remove(j("showModSet"));new MI.Validate({id:"myViewSetting",inputs:{viewModel:{noIco:true},pageSet:{noIco:true},faceTrans:{noIco:true},fb:{noIco:true},feedSpecial:{noIco:true},wqIds:{noIco:true,result:function(a){return j("wqIds").checked?a:""}}},messages:function(a){return UI.next(a)},success:function(){MI.tip(_("保存成功"),function(){document.location.href=document.location.href.replace("pagesetMyhome","").split("#")[0]})}})}});MI.viewSet.loading=0;MI.Bos("btnViewSet")},fail:function(){MI.viewSet.loading=0}});MI.viewSet.loading=1}};MI.ptlogout=function(a){var b=function(b){setTimeout(function(){if(!UI.isUndefined(a))try{a.click()}catch(b){document.location.href=UI.A(a,"href")}},100);b?MI.Bos("ptLoginOut_successed"):MI.Bos("ptLoginOut_failed")},c=function(a){UI.getScript("http://imgcache.qq.com/ptlogin/ac/v9/js/ptloginout.js",function(){a&&a();try{pt_logout.logout(b)}catch(c){MI.Bos("btnErrorPT_Logout")}})};if(a||arguments.length){if(a)a.onclick=function(){a.onclick=null;c();return false}}else c()};MI.navMenu=function(){function a(a){var b=c(this);if(!l[b]){UI.append(x[b],d[b]);l[b]=1}e==b&&clearTimeout(g);f=setTimeout(function(){UI.addClass(d[b],"hover");UI.show(x[b]);e=b},100);UI.E(a).stop()}function b(a){var b=c(this);clearTimeout(f);g=setTimeout(function(){UI.removeClass(d[b],"hover");UI.hide(x[b])},200);UI.E(a).stop()}function c(a){var b=a.className.split(" ")[0];b=="subNav"&&(b=a.parentNode.className.split(" ")[0]);return b}var d=j("nav"),e,f,g,k=MI.user.account;if(!MI.navMenu.builded){if(d){var d={app:h(d,".app")[0],topic:h(d,".topic")[0]},x={app:UI.html('<div class="subNav"><p><a href="http://t.qq.com/app/qzblog/'+k+'" onmousedown="MI.Bos(\'btnTopMenuAppBlog\')">'+_("日志")+"</a></p><p"+(MI.user.fun.app==1?"":' style="display:none"')+'><a href="http://t.qq.com/app/qzphoto/'+k+'" onmousedown="MI.Bos(\'btnTopMenuAppPhoto\')">'+_("相册")+'</a></p><p><a href="http://t.qq.com/app/music/'+k+'" onmousedown="MI.Bos(\'btnTopMenuAppMusic\')">'+_("音乐")+'</a></p><p><a href="http://tv.t.qq.com/index.php" target="_blank" onmousedown="MI.Bos(\'btnTopMenuAppTV\')">'+_("微电视")+'</a></p><p><a href="http://fm.t.qq.com/fm" target="_blank" onmousedown="MI.Bos(\'btnTopMenuAppFM\')">'+_("微电台")+'</a></p><p><a href="http://e.t.qq.com/weikongjian" target="_blank" onmousedown="MI.Bos(\'btnTopMenuAppKongjian\')">'+_("微空间")+'</a></p><p class="last"><a href="http://app.t.qq.com?via=WB.TQQ.TOP.ENTERAPP" onmousedown="MI.Bos(\'btnTopMenuAppChannel\')">'+_("应用频道")+'</a></p><p class="last" style="display:none"><a href="http://open.t.qq.com/apps/appslist.php?via=WB.TQQ.TOP.ENTERMYAPP" >'+_("我的应用")+"</a></p></div>")[0],topic:UI.html('<div class="subNav"><p><a href="http://t.qq.com/p/topic" onmousedown="MI.Bos(\'btnTopMenuTopicHot\')">'+_("热议")+'</a></p><p class="last"><a href="http://t.qq.com/p/event" onmousedown="MI.Bos(\'btnTopMenuTopicActive\')">'+_("活动")+"</a></p></div>")[0]},l={app:0,topic:0};UI.each(x,function(c,e){if(d[e]){UI.hide(c);c.onmouseover=d[e].onmouseover=a;c.onmouseout=d[e].onmouseout=b}})}else{var i=j("header"),k=j("searchKey");if(i){var D=i.parentNode,q=j("topNav"),r=h(q,".topNavItem a"),q=h(i,".right .topNavItem"),u=q[q.length-1],B=h(i,".tSearchNew")[0];if(!MI.user.fun.navNoFixed)if(UI.B.ie6)D.parentNode.style.setExpression("top","eval((document.documentElement||document.body).scrollTop) + 'px'");else if(UI.B.os5&&UI.B.iphone&&UI.B.qq)D.parentNode.style.position="absolute";var n=function(){var a=h(this,".topNavSub")[0],b=h(this,".txt")[0];UI.hide(a);UI.removeClass(b,"active")},o=function(){var a=h(this,".topNavSub")[0],b=h(this,".txt")[0];UI.show(a);UI.addClass(b,"active");if(!MI.user.fun.apolloStyle)(a=j("2013Tips"))&&a.style.display!="none"&&h(UI.parents(a,"tip_pop")[0],".tip_pop_remove")[0].click()};UI.each([u],function(a){if(a)if(UI.B.ipad){if(a=h(a,"a")[0])a.onclick=function(){return false}}else{a.onmouseout=n;a.onmouseover=o;a==u&&MI.focusDropList&&MI.focusDropList(UI.children(a)[0],UI.children(a)[1])}});if(u){i=h(u,".topNavSub li");if(i=i[i.length-1])(i=h(i,"a")[0])&&(UI.A(i,"id")=="logout"||UI.A(i,"href").indexOf("/logout.php")!=-1)&&MI.ptlogout(i)}if(k){UI.EA(k,"blur",function(){UI.removeClass(B,"active")});UI.EA(k,"focus",function(){UI.addClass(B,"active")});UI.EA(B,"mouseover",function(){UI.addClass(B,"hover")});UI.EA(B,"mouseout",function(){UI.removeClass(B,"hover")})}var A=MI.user.fun.apolloStyle||!MI.user.account;setTimeout(function(){var a=document.location.href,b={},c={home:{rule:"t.qq.com/"+MI.user.account},news:{rule:"c.t.qq.com"},expose:{rule:"b.t.qq.com"},guess:{rule:"2014.t.qq.com"},people:{rule:"zhaoren.t.qq.com"},app:{rule:"app.t.qq.com"},events:{rule:"event.t.qq.com"}};if(A){b={home:{pathname:["t.qq.com/"+MI.user.account]},expose:{pathname:["b.t.qq.com"]},news:{pathname:["c.t.qq.com","/p/news","/p/city","/p/top","/college_anas.php","/c/","wpd.qq.com"]},guess:{pathname:["http://2014.t.qq.com"]},people:{pathname:["/people","/potential.php","/rank.php","/lists.php","/list2.php","/find/friends.php","/find/interest.php"]},app:{pathname:["app.t.qq.com"]}};UI.each(r,function(a){UI.each(c,function(c,d){if(b[d]&&!b[d].element&&RegExp(c.rule).test(UI.A(a,"href"))){b[d].element=a;return 1}})})}else b={home:{element:r[0],pathname:["t.qq.com/"+MI.user.account]},news:{element:r[1],pathname:["c.t.qq.com","/p/news","/p/city","/p/top","/college_anas.php","/c/","wpd.qq.com"]},people:{element:r[2],pathname:["/people","/potential.php","/rank.php","/lists.php","/list2.php","/find/friends.php","/find/interest.php"]},qun:{element:r[3],pathname:["qun.t.qq.com"]},app:{element:r[4],pathname:["app.t.qq.com"]},client:{element:r[5],pathname:[MI.user.fun.wideStyle?"/n/lab.php":"/client.php"]}};for(name in b)for(str in b[name].pathname)if(b[name].pathname.hasOwnProperty(str)&&RegExp(b[name].pathname[str]).test(a)){var d=name=="qun"||name=="app"?"cur":"active";b[name].element&&UI.addClass(b[name].element,d);break}},10);if(A){k=j("app");MI.user.account&&k&&new MI.DropBox({htmlStr:'<div><div class="head_qk_in"><div class="w_qk w_qk_app" style="left:150px;right:inherit;"></div></div>',target:h(k,"a")[0],dir:3,type:1,start:1,className:"head_qk_wrap",classFix:"w_qk_app",url:MI.url.topMenuAppsApollo,data:{myAppsCnt:10,hotAppsCnt:5,index:0,page:1},html:null,defaultHTML:'<div class="w_qk_hd"><h2 class="w_qk_tit">我的应用</h2><a href="http://app.t.qq.com/?via=WB.TQQ.TOP.APP" boss="gotoApp_dropFloat" class="more_link">进入应用频道&gt;&gt;</a></div>',mouseStayTime:200,event:{addLoading:function(a){var b=UI.html('<div class="loadDom"><div class="w_qk_bd clear loading2"></div></div>')[0];UI.append(b,a)},removeLoading:function(a){a=h(a,".loadDom")[0];UI.remove(a)}},dataFilter:function(a){MI.Bos("hasAppDropPage",0,0,214);return a},domHandler:function(a){a=UI.GT(a,"li");MI.user.fun.app!=1&&UI.hide(a[1])}})}else{(k=h(j("app"),"a")[0])&&(MI.user.fun.wideStyle||MI.api.type&&MI.api.type>1E3?new MI.DropBox({htmlStr:'<div><div class="head_qk_in"><div class="w_qk w_qk_app" style="left:150px;right:inherit;"></div></div>',target:k,dir:3,type:1,start:1,className:"head_qk_wrap",classFix:"w_qk_app",url:MI.url.topMenuAppsApollo,data:{myAppsCnt:10,hotAppsCnt:5,index:0,page:1},html:null,defaultHTML:'<div class="w_qk_hd"><h2 class="w_qk_tit">我的应用</h2><a href="http://app.t.qq.com/?via=WB.TQQ.TOP.APP" boss="gotoApp_dropFloat" class="more_link">进入应用频道&gt;&gt;</a></div>',mouseStayTime:200,event:{addLoading:function(a){var b=UI.html('<div class="loadDom"><div class="w_qk_bd clear loading2"></div></div>')[0];UI.append(b,a)},removeLoading:function(a){a=h(a,".loadDom")[0];UI.remove(a)}},dataFilter:function(a){MI.Bos("hasAppDropPage",0,0,214);return a},domHandler:function(a){a=UI.GT(a,"li");MI.user.fun.app!=1&&UI.hide(a[1])}}):new MI.DropBox({target:k,dir:2,start:1,className:"topNavSub",url:MI.url.htmlContent,data:{type:1},add:['<p class="right"><a href="http://app.t.qq.com/?via=WB.TQQ.TOP.ENTERAPP" target="_blank">',_("应用频道"),'<span class="ffsong">&gt;&gt;</span></a></p><p class="left"><a href="http://app.t.qq.com/?g=2&via=WB.TQQ.TOP.ENTERMYAPP" target="_blank">',_("进入我的应用"),"</a></p>"].join(""),html:null,dataFilter:function(a){return a.replace(/\{account\}/g,MI.user.account||"")},domHandler:function(a){a=UI.GT(a,"li");MI.user.fun.app!=1&&UI.hide(a[1])}}));(k=r[3])&&(MI.user.fun.wideStyle||MI.api.type&&MI.api.type>1E3?new MI.DropBox({htmlStr:'<div><div class="head_qk_in"><div class="w_qk w_qk_qun" style="left:150px;"></div></div></div>',target:k,dir:3,type:1,start:1,className:"head_qk_wrap",classFix:"w_qk_qun",url:MI.url.topMenuWQ,html:null,defaultHTML:'<div><div class="w_qk_hd"><div class="w_qk_hd_right"><a href="http://qun.t.qq.com/create.php" onmousedown="MI.Bos(\'btnNewMenuGroupCreate\')">创建微群</a><span class="c_tx5">|</span><a href="http://qun.t.qq.com/" boss="btnNewMenuGroupIndex">微群广场</a></div></div><div class="w_qk_bd clear"><h3 class="w_qk_qun_t2">你还没有加入微群，去<a href="http://qun.t.qq.com/" onmousedown="MI.Bos(\'btnNewMenuGroupIndex0\')">微群广场</a>逛逛吧。你可能感兴趣的群</h3></div></div>',event:{addLoading:function(a){var b=UI.html('<div class="loadDom"><div class="w_qk_hd"><div class="w_qk_hd_right"><a href="http://qun.t.qq.com/create.php" onmousedown="MI.Bos(\'btnNewMenuGroupCreate\')">创建微群</a><span class="c_tx5">|</span><a href="http://qun.t.qq.com/" boss="btnNewMenuGroupIndex">微群广场</a></div></div><div class="w_qk_bd clear loading2"></div></div>')[0];UI.append(b,a)},removeLoading:function(a){a=h(a,".loadDom")[0];UI.remove(a)}}}):new MI.DropBox({htmlStr:'<div style="display:none; width:310px; position: absolute;"><br /><br /><br /><br /></div>',target:k,dir:2,start:1,className:"topNavSub lay_topdrop_qun",url:MI.url.topNavGroup,html:null,defaultHTML:'<div class="lay_topdrop_inner clear"><p class="desc">你还没有加入微群，现在就去<a href="http://qun.t.qq.com/" onmousedown="MI.Bos(\'btnNewMenuGroupIndex0\')">微群广场</a>逛逛吧。</p></div>'}))}if(MI.user.fun.apolloStyle){var w=j("nav_pub_wrap"),p,H;if(w&&!UI.B.ipad){k=h(w,"a")[0];k.onclick=function(){if(!p){p=UI.html('<div class="talkWrap dialogPics" style="overflow:visible;display:block;">\t \t<div class="top c_tx5"><span class="left"><span class="number cNote"></span><span class="replyTitle">来，说说你在做什么，想什么?</span><span class="addReply"></span></span></div>\t \t<div class="cont"><textarea class="inputTxt" style="height: 40px;"></textarea><div class="txtShadow"></div>\t <div class="sendStatus clear"></div></div>\t \t<div class="bot">\t <div class="insertFun">\t \t<div class="sendList insertFace"><a class="txt" href="#" title="表情"><em class="sico ico_face"></em></a></div>\t \t<div class="sendList atSome"><a class="txt" href="#" title="@朋友帐号就可以提到他"><em class="sico ico_at"></em>朋友</a></div>\t \t<div class="sendList newTopic"><a href="#" class="creatNew txt" title="汇聚相同热点的广播" tabindex="3"><em class="sico ico_topic"></em>话题</a></div>\t \t<div class="sendList uploadPic" style=""><a href="#" class="txt sendPic" tabindex="3" title="支持jpg、jpeg、gif、png格式，文件小于5M"><em class="sico ico_pic"></em></a></div>\t \t<div class="sendList uploadPic" style="display: none;"><form target="retweetPic" method="post" enctype="multipart/form-data" class="sPicForm"><a href="javascript:;" class="txt sendPic"><em class="sico ico_pic"></em><input class="filePrew" name="pic" type="file" size="3" title="支持jpg、jpeg、gif、png格式，文件小于5M" tabindex="3"></a></form></div>\t \t<div class="sendList keyWords schBrace" style="display:none"><a class="txt" title="分享你的兴趣、关注点" href="#" boss="btnWideKeyWord"><em class="sico ic_keyword"></em>\t关键词</a></div>\t </div>\t <div class="left" style="display:;"><label style="display:none"><input type="checkbox" class="replayQzoneCheckbox check1">同步到空间</label></div>\t <input type="button" class="inputBtn sendBtn" value="发送">\t <span class="countTxt c_tx5"></span>\t \t</div>\t </div>')[0];H=new MI.TalkBox(p,{feelTip:0,data:{pgv_ref:"web.base.master.talkBox.navMenu"},source:1737,showPicTabs:["multi"],successStart:function(){MI.tip(_("发送成功！"));MI.Bos("btnNewMenuPubBoxSuccess")}})}MI.dialog.show({width:490,html:p,start:function(){setTimeout(function(){H&&H.focus()},0)}});MI.Bos("btnNewMenuPubBox");return false};var k=null,t=j("talkBox"),m=0;if(t){var s=151;UI.linkEvent.add("windowScroll",function(a){s=UI.height(t);if(a.scrollY>s&&!m){UI.show(w);m=1}else if(a.scrollY<=s&&m){UI.hide(w);m=0}})}else UI.show(w)}}}}MI.app({NewMsgBox:function(){setTimeout(function(){MI.user.account&&(!MI.newCountShow||document.location.href.hasString("/k/")||document.location.href.hasString("/search/")||document.location.href.hasString("search.t")||MI.guest)&&MI.newCount&&MI.newCount("4,2,1,20,19")},100)}});MI.searchKey();MI.themeSet();MI.skinChange();MI.navMenu.builded=1}};MI.skinChange=function(){var a=j("skinChange"),b,c,d;if(a){if(c=UI.hasClass(a,"e_skin_corner_big")){b=["n_skin_corner_big0","n_skin_corner_big1","n_skin_corner_big2","n_skin_corner_big3","n_skin_corner_big4","n_skin_corner_big5","n_skin_corner_big6","n_skin_corner_big7","n_skin_corner_big8","n_skin_corner_big9"];MI.app(["module/Animate","Base"],function(c){d=new c(a,b,100);if(+UI.A(a,"isfirst")){d.auto(1E3,function(){+UI.A(a,"new")&&UI.removeClass(a,b[0])});MI.ajax({url:"http://api.t.qq.com/asyn/setBizSkinStatus.php",type:"post",data:{ft:1}})}a.onmouseover=function(b){if(!UI.withinElement(this,b)){MI.Bos("moAngleChangeSkin");+UI.A(a,"new")&&MI.ajax({url:"http://api.t.qq.com/asyn/setBizSkinStatus.php",type:"post"});UI.A(a,"new","");d.act()}};a.onmouseout=function(a){UI.withinElement(this,a)||d.rewind()}})}else if(UI.B.ie6){a.onmouseover=function(){UI.addClass(this,"hover")};a.onmouseout=function(){UI.removeClass(this,"hover")}}a.onclick=function(b){var d=j("setTheme"),g=1;MI.Bos("btnAngleChangeSkin");if(!c){if(UI.hasClass(a,"e_skin_corner_new")){UI.removeClass(a,"e_skin_corner_new");UI.addClass(a,"e_skin_corner_normal")}UI.A(a,"new","");g=2}UI.E(b).prevent();UI.A(d,"loaded")?g===1?MI.Theme.show(0,0):MI.Theme.show():MI.app({Theme:function(){MI.Theme.corner=g;MI.Theme.build();UI.A(d,"loaded",1)}})}}};MI.homeTab=function(){var a=j("home_myfriends_top");a&&h(a,".btn_ldrop")[0]&&new MI.ListDrop({tab:UI.GT(a,"a")[0],className:"listDrop",listData:[{listId:null,listName:MI.currQQType||"QQ群",href:MI.currQQHref||"http://list.t.qq.com/list/qqqun"}],bos:"btnQQFriendDropView",linkEvent:function(){MI.Bos({name:"btnListDropSelect",sBak1:this.href.substring(this.href.lastIndexOf("/")+1)});location.href=this.href}});MI.subTabToggle()};MI.searchKey=function(a,b,c){var d=j("searchKey"),e;if(d){e=d.previousSibling;var f="http://search.t.qq.com/index.php";a&&(f="http://1.t.qq.com/search/message.php");var g=j("searchForm");MI.searchKeyBox=new MI.SmartBox("searchKey",function(){var a=g.action,b=h(g,"input"),c=[],d="";UI.each(b,function(a){a.name&&c.push(a.name+"="+encodeURIComponent(a.value))});d=c.join("&");document.location.href=a+(a.hasString("?")?"&"+d:"?"+d);g.action=f},"",{left:typeof b!="undefined"?b:MI.user.fun.wideStyle?-13:-26,top:UI.B.ie?4:6,width:typeof c!="undefined"?c:172,type:1,history:1,isnano:a});e.onmouseup=function(){d.focus()}}};MI.themeSet=function(){var a=j("setTheme");if(a)a.onclick=function(){var a=this,c="/"+MI.user.account;if(document.location.pathname!=c||document.location.hostname!="t.qq.com"){document.location.href="http://t.qq.com"+c+"?setTheme=1";return false}MI.talkBox&&setTimeout(function(){MI.talkBox._txt.blur()},1E3);UI.A(a,"loaded")?MI.Theme.show():MI.app({Theme:function(){MI.Theme.build();UI.A(a,"loaded",1)}});MI.Bos("btnThemeSetOpen");return false}};var p=MI,ia=function(){MI.MayBeKnow.returnResult=0;(new Date).getDay();MI.user.fun.showRecommend&&MI.ajax({url:MI.url.recommend,data:{scene:2,count:18},type:"get",success:function(a){a=MI.json(a);if(a.result==0&&a.info.list&&a.info.list.length){X=a=a.info;if(a.list.length>=3){MI.MayBeKnow.returnResult=1;a:{a=X;if(!z){z=UI.html(MI.tmpl.know)[0];I=h(z,".tjRelaList")[0];ca=h(z,".cSign")[0];da=h(z,".change")[0];ea=h(z,".closebtn")[0];fa=h(z,".left a")[2];if(!j("talkBox"))break a;MI.user.fun.wideStyle&&j("main_cmd_w")?UI.prepend(z,j("main_cmd_w")):UI.after(z,j("talkBox"));UI.hide("homeBannerTip");UI.hide("homeBannerNew");UI.hide("NewGuideBannerTip");da.onclick=function(a){MI.feedBack({name:"timeline",iPos:11,iBak1:9,id:1191});ga(a);return false};ea.onclick=na;fa.onclick=oa}ca.innerHTML=a.newNum>0?_("新来(+{0})",a.newNum):"";var a=[],b=X;if(b.list)for(var c=0;c<b.list.length;c++)if(b.list[c]&&!b.list[c].added){a.push(b.list[c]);b.list[c].added=true}var b=I,d=[];UI.each(a,function(a,b){if(UI.isObject(a)){var c=(a.bkname||a.nick).toTitle()+"(@"+(a.chName||a.name)+")",e="/"+a.account,h=MI.string.cut(a.bkName||a.nick,14,"");d.push('<li account="'+a.account+'"'+(b>=Y?'style="display:none"':"")+' uin="'+a.uin+'" reason="'+a.reason_type+'"><div class="userPic">');d.push('<a title="'+c+'" href="'+e+'" target="_blank">');d.push('<img onerror="MI.Pic(this,50)" src="'+(a.avatar?a.avatar+"/50":MI.picSrc.h50)+'" /></a>');d.push(a.isNew?'<em class="sign_new">'+_("新")+"</em>":"");d.push('</div><div class="knownInfo">');d.push('<p><a class="uname" title="'+c+'" href="'+e+'" target="_blank">'+h+"</a>"+(a.vip==true?'<a href="http://t.qq.com/certification" target="_blank" class="vip" title="腾讯认证"></a>':"")+"</p>");d.push('<p class="middle">'+a.reason+"<p>");d.push('<p class="attentBox" account="'+a.account+'"><input type="button" class="addAttention" value="'+_("收听")+'">');d.push('<a href="#" class="delAttention" style="display:none">'+_("取消")+"</a>"+(a.isFollower?a.isFollower:"")+"</p>");d.push('<a href="#" class="del" title="'+_("不再推荐此人")+'">×</a>');d.push("</div></li>")}});a=d.join("");b.innerHTML=a;UI.each(h(I,".attentBox"),function(a){var b=UI.A(a,"account"),c=h(a,".addAttention")[0],d=h(a,".delAttention")[0],e=UI.A(UI.parents(a)[1],"uin")+"."+UI.A(UI.parents(a)[1],"reason");c.onclick=function(h){UI.E(h).prevent();MI.follow(b,this,function(){UI.show(d);UI.hide(c);c.className="addAttention";MI.Bos("btnFollowMayBeKnow")});MI.feedBack({name:"timeline",iPos:11,iBak1:3,sBak2:e,id:1191});var i=UI.parents(a)[1];setTimeout(function(){ha(i)},1E3)};d.onclick=function(a){UI.E(a).prevent();MI.follow(b,this,function(){UI.show(c);UI.hide(d);d.className="delAttention";MI.Bos("btnUnFollowMayBeKnow")});MI.feedBack({name:"timeline",iPos:11,iBak1:8,sBak2:e,id:1191})}});UI.each(h(I,".del"),function(a){a.onclick=function(){var b=UI.parents(a)[1],c=UI.A(b,"account"),d=UI.A(b,"uin")+"."+UI.A(b,"reason");setTimeout(function(){ha(b)},500);MI.feedBack({name:"timeline",iPos:11,iBak1:6,sBak2:d,id:1191});MI.ajax({url:MI.url.recommendBlock,data:{id:c},success:function(){}});return false}});var a=h(I,"li"),e=[];UI.each(a,function(a){a.onmouseover=function(){UI.addClass(a,"hover")};a.onmouseout=function(){UI.removeClass(a,"hover")};var b=UI.A(a,"uin")+"."+UI.A(a,"reason");h(a,".userPic a")[0].onclick=function(){MI.feedBack({name:"timeline",iPos:11,iBak1:2,sBak2:b,id:1191})};h(a,".uname")[0].onclick=function(){MI.feedBack({name:"timeline",iPos:11,iBak1:5,sBak2:b,id:1191})};a.style.display!="none"&&e.push(b)});MI.feedBack({name:"timeline",iPos:11,iBak1:1,sBak2:e.join(","),id:1191});if(MI.user.fun.wideStyle&&MI.user.fun.userSidePanel){a=h(I,".uname,.userPic a,.knownInfo .middle a");MI.sidePanelUserProfile(a)}MI.Card.build(I,".userPic img",2);MI.Card.build(z,".knownInfo .uname",2);MI.Card.build(z,".knownInfo .middle a",2);n.event&&MI.Bos("btnRefreshMayBeKnow")}}}}})},ga=function(a){var b=h(".tjRelaList li");if(b.length>=6){for(var c=[],d=0;d<3;d++)UI.remove(b[d]);for(d=3;d<6;d++){UI.show(b[d]);var e=UI.A(b[d],"uin")+"."+UI.A(b[d],"reason");c.push(e)}MI.feedBack({name:"timeline",iPos:11,iBak1:1,sBak2:c.join(","),id:1191})}else{ia();return false}(a||n.event)&&MI.Bos("btnRefreshMayBeKnow");return false},oa=function(){MI.feedBack({name:"timeline",iPos:11,iBak1:10,id:1191})},na=function(){MI.Bos("btnTimeineClose");MI.feedBack({name:"timeline",iPos:11,iBak1:14,id:1191});UI.hide(z);UI.cookie("mb_mayBeEveryday",1,1);MI.user.fun.showRecommend=0;UI.show("NewGuideBannerTip");UI.show("homeBannerTip");UI.show("homeBannerNew");MI.bannerTips();return false},ha=function(a){UI.animate(a,"opacity",UI.B.ie9?0.01:0,function(){UI.remove(a);for(var b=0,c=h(I,"li"),d=0;d<c.length;++d){if(b>=Y){b=UI.A(c[b-1],"uin")+"."+UI.A(c[b-1],"reason");MI.feedBack({name:"timeline",iPos:11,iBak1:1,sBak2:b,id:1191});break}UI.show(c[d]);b++}c.length<Y&&ga()})},z,I,ca,da,fa,ea,Y=3,X;j("followingNum")&&parseInt(j("followingNum").innerHTML);p.MayBeKnow={getData:ia};MI.ListDrop=function(a){this.refresh=a.refresh;this.url=a.url;this._tab=a.tab;this.current=a.current;this.listData=a.listData||[];this.linkEvent=a.linkEvent;this.showEvent=a.showEvent;this.hideEvent=a.hideEvent;this.ctrlHtml=a.ctrlHtml||"";this.className=a.className||"";this.bos=a.bos;this.clickTrigger=a.clickTrigger;this.dataFilter=a.dataFilter;this.query=a.query||{u:MI.user.account};this.delay={};this.bind(this._tab)};MI.ListDrop.prototype={bind:function(a){var b=this;a.onmouseover=function(){b.startLoad()};a.onmouseout=function(){b.cancelLoad()};if(this.clickTrigger)a.onclick=function(){b.startLoad()}},startLoad:function(){var a=this;clearTimeout(a.delay.hide);clearTimeout(a.delay.load);a.delay.load=setTimeout(function(){a.load()},100);a.bos&&MI.Bos(a.bos);return false},load:function(a){var b=this;b.listData&&b.listData.length?b.show():MI.ajax({url:b.url,data:b.query,success:function(c){c=MI.json(c);a&&a(c);if(c.result==0){b.listData=c.info.list;if(b.dataFilter)b.listData=b.dataFilter(b.listData);b.listData.length&&b.show()}}})},cancelLoad:function(){this.hide();clearTimeout(this.delay.load);this.delay.load=-1},show:function(){if(this.delay.load<0)return false;this.builded||this.build();this.showEvent&&this.showEvent(this);(this.refresh||this.reseted)&&this.creatList();UI.show(this._body);UI.addClass(this._tabParent,"select");UI.addClass(this._arrow,"lopen");this.setPos();this.page(0);this.reseted=0;try{this.firstLink.focus()}catch(a){}},build:function(){var a=this;a.wrapHtml='<div class="'+a.className+'" style="position:absolute;z-index:99999;display:none;"><div class="ldList"><a href="#" class="ld_btn pageUp" title="'+_("向上滚动")+'" style="display:none"><em></em></a><div class="ldListBox"><ul></ul></div><a href="#" class="ld_btn pageDown" title="'+_("向下滚动")+'" style="display:none"><em></em></a></div>'+(a.ctrlHtml||"")+"</div>";a._body=UI.html(a.wrapHtml)[0];a._pageUp=h(a._body,".pageUp")[0];a._pageDown=h(a._body,".pageDown")[0];a._listUl=h(a._body,".ldListBox ul")[0];a._arrow=UI.GT(a._tab,"em")[0];a._tabParent=a._tab.parentNode;a.isSelected=UI.hasClass(a._tabParent,"select");a.creatList();UI.append(a._body,document.body);a._body.onmouseout=function(){a.cancelLoad()};a._body.onmouseover=function(){clearTimeout(a.delay.hide)};a.builded=1;a.pageEvent()},creatList:function(){var a=this,b="";UI.each(a.listData,function(c){b=b+(a.current&&a.current==c.listId?'<li class="on"><a style="cursor:default">'+c.listName+"</a></li>":'<li><a href="'+(c.href||"javascript:void(0)")+'" title="'+c.listName+'" listid="'+c.listId+'">'+c.listName+"</a></li>")});a._listUl.innerHTML=b;UI.each(h(a._listUl,"li a"),function(b,d){if(d==0)a.firstLink=
b;if(UI.hasClass(b.parentNode,"on"))return false;if(a.linkEvent)b.onclick=function(){a.hide();a.linkEvent.call(b,a);a.current=UI.A(b,"listid");return false}})},hide:function(){var a=this;a.delay.hide=setTimeout(function(){if(!a.builded)return false;UI.hide(a._body);UI.removeClass(a._arrow,"lopen");a.isSelected||UI.removeClass(a._tabParent,"select");a.hideEvent&&a.hideEvent(a)},200)},reset:function(a){this._tab=a;this.bind(a);this.listData=[];this.reseted=1},setPos:function(){var a,b,c;this._body.style.left=UI.getX(this._tab.parentNode)+"px";this._body.style.top=UI.getY(this._tab)+UI.height(this._tab)+"px";this._listUl.style.height="auto";this.liHeight=a=UI.height(this.firstLink);b=UI.height(this._body);c=UI.windowHeight()+UI.scrollY()-UI.getY(this._tab)-(this.isLab?65:40);if(!UI.hasClass(document.body,"ipad")&&b>c)this._listUl.style.cssText="overflow:hidden;height:"+a*Math.floor(c/a)+"px"},pageEvent:function(){var a=this,b=a._pageUp,c=a._pageDown;b.onmousedown=function(){a.page(-17);a.delay.page=setInterval(function(){a.page(-17)},100);return false};c.onmousedown=function(){a.page(17);a.delay.page=setInterval(function(){a.page(17)},100);return false};b.onclick=c.onclick=b.onmouseup=c.onmouseup=function(){clearInterval(a.delay.page);return false};b=function(b){b=UI.E(b);a.page(-17*b.wheel);b.prevent()};UI.EA(a._listUl.parentNode.parentNode,"mousewheel",b);if(!UI.B.ie)a._listUl.parentNode.parentNode.onmousewheel=b},page:function(a){var b=UI.height(this._listUl),c=this._listUl.scrollHeight,a=this._listUl.scrollTop+a||0;this._listUl.scrollTop=a;if(this._listUl.scrollTop>0)UI.show(this._pageUp);else{UI.hide(this._pageUp);clearInterval(this.delay.page)}if(b+a<c)UI.show(this._pageDown);else{UI.hide(this._pageDown);clearInterval(this.delay.page)}}};MI.badge={appended:0,delay:0,build:function(a){var b=this,a=a||".ico_badge";if(MI.user.account){b.badges=h(a);UI.each(b.badges,function(c){if(UI.A(c,"rel")){UI.A(c,"selector",a);if(MI.api.type==8){c.parentNode.onmouseover=function(a){if(!UI.withinElement(this,a)){clearTimeout(b.delay);b.delay=setTimeout(function(){b.show(c)},200)}};c.parentNode.onmouseout=function(a){if(!UI.withinElement(this,a)){clearTimeout(b.delay);b.delay=setTimeout(function(){b.hide()},200)}}}else{c.onmouseover=function(){var a=this;clearTimeout(b.delay);b.delay=setTimeout(function(){b.show(a)},200)};c.onmouseout=function(){clearTimeout(b.delay);b.delay=setTimeout(function(){b.hide()},200)}}}})}},show:function(a){var b=this,c="",d=UI.A(a,"rel"),e=UI.A(a,"isSet"),f=UI.A(a,"user");if(!b.appended){b._body=UI.html('<div class="badgeTips"><div class="SA" style="position:absolute"><em>◆</em><span>◆</span></div><div class="badgeCnt"></div></div>')[0];b._cont=h(b._body,".badgeCnt")[0];b._arrow=h(b._body,".SA")[0];UI.hide(b._body);UI.append(b._body,document.body);b.appended=1;b._body.onmouseover=function(){clearTimeout(b.delay);UI.show(this)};b._body.onmouseout=function(){b.delay=setTimeout(function(){b.hide()},200)}}d&&(c=c+("mid="+d+"&"));e&&(c=c+"isSet=1&");f&&MI.guest&&(c=c+("u="+f+"&"));UI.hide(b._body);if(b.cache[d]){b.position(a,b.cache[d]);UI.each(h(".badgeCnt a"),function(a){UI.A(a,"titleName")&&MI.Card.build(a,"a",1)})}else MI.ajax({url:MI.url.medal,type:"get",data:c,success:function(c){c=MI.json(c);if(c.result==0){b.cache[d]=c;b.position(a,c);MI.app({Base:function(){UI.each(h(".badgeCnt a"),function(a){UI.A(a,"titleName")&&MI.Card.build(a,"a",1)})}})}}})},hide:function(){UI.hide(this._body)},position:function(a,b){var c=h(a.parentNode,UI.A(a,"selector")||".ico_badge"),d=UI.getY(a),c=UI.getX(c[0]),e=UI.getX(a),f=0;MI.hostType==2&&(f=160);a.title="";this._body.style.cssText="top:"+d+"px;left:"+(c+f)+"px;"+(UI.A(a,"css")||"");this._arrow.style.margin=
"0 0 0 "+(e-c-f)+"px";this._cont.style.cssText=Math.abs(e-c)>280?this._arrow.style.cssText:"";this._cont.innerHTML=b.info.html},cache:{}};MI.autoMoreTimes=2;p=MI;MI.Uin();p.autoMore=function(a){if(MI.talkList){!MI.talkList.pageModeCur&&(MI.talkList.moreTimes<MI.autoMoreTimes&&UI.pageHeight()-a.scrollY-a.windowHeight<700)&&MI.talkList.more(1);UI.linkEvent("autoMore",{times:MI.talkList.moreTimes});if(MI.talkList.moreTimes>=MI.autoMoreTimes){if(!MI.user.fun.autoMoreContinue)MI.autoMore=function(){};UI.show("pageSetLink")}MI.talkList.noPageSetLink?UI.hide("pageSetLink"):UI.hasClass(MI.talkList._more.parentNode,"hide")&&UI.show("pageSetLink")}};MI.linkBoss=function(){var a=function(){var a=this,b=this.getAttribute("href",2).replace(/http:\/\/t.qq.com/g,""),c;UI.each(h(UI.closest(a,"ul"),"li a"),function(b,e){b==a&&(c=e)});MI.Bos({name:"btnHotTopicList",iBak1:c,sBak1:b,id:1158});MI.Bos("btnHotTopicList",b.replace(/\/k\//g,""))},b={"#hotTopic li a":a,"#hotTopic li div p a":a,".topNav li a":function(){var a=this,b;UI.each(h(UI.closest(a,".headInside"),".topNav li a"),function(c,g){c==a&&(b=g)});MI.user.fun.wideStyle?MI.Bos("btnWideTopMenu_"+(b+1)):MI.Bos("btnTopNewMenu_"+(b+1))}},c=[];UI.each(b,function(a,b){c.push(b)});UI.proxyEvent(document.body,"mousedown",function(a){return function(c){b[a]&&b[a].call(this,c)}},c)};MI.sFollow=function(a,b,c,d){var e=UI.hasClass(b,"foLight")?0:1;if(!b.sending){MI.ajax({url:MI.url.sFollow,data:{u:a,op:e},success:function(a){a=MI.json(a);if(a.result==0){if(e){UI.addClass(b,"foLight");b.title=MI.sFollowTip[1]}else{UI.removeClass(b,"foLight");b.title=MI.sFollowTip[0]}c&&c(e)}else d?d(a):MI.alert(a.msg);b.sending=0}});b.sending=1}};MI.Note={updateClassName:".AL .msgBox .userName a,.AL .msgBox .msgCnt a",updateName:function(a,b){var c=a+"(@"+(this.chName||this.account)+")";UI.each(h(MI.Note.updateClassName),function(d){if(d.title==b){d.innerHTML=a;d.title=c}else if(UI.A(d,"rel")==b){d.innerHTML=a;UI.A(d,"rel",c)}});this.title=c}};MI.bannerTips.close=function(a){UI.hide("homeBannerNew");MI.ajax({url:"http://api.t.qq.com/userinfo/updateBanner.json",data:{id:a}});MI.Bos({name:"homeNewBannerTipClose",id:1158,sBak1:a});UI.linkEvent("bannerTipsClose")};MI.black=function(a){var b,c=UI.hasClass(a.target,"blackDel")?1:0;b=c?"un":"";var d=c?MI.url.unblock:MI.url.block,e=[_("拉黑名单"),_("取消拉黑")];MI.black[b+"black"]||(MI.black[b+"black"]=UI.html((new UI.tmplString(MI.tmpl[b+"black"]))(a))[0]);MI.dialog.show({width:420,html:MI.black[b+"black"]});a.txt=UI.isUndefined(a.txt)?1:a.txt;if(UI.isArray(a.txt))e=a.txt;b=h(MI.black[b+"black"],"input")[0];try{b.focus()}catch(f){}b.onclick=function(){var b=this;if(!b.sending){MI.Bos("btn"+(c?"UnBlackConfirm":"BlackConfirm"));MI.ajax({url:d,data:{u:a.u},success:function(d){d=MI.json(d);if(d.result==0){if(a.txt)a.target.innerHTML="<b></b>"+(c?e[0]:e[1]);c?UI.removeClass(a.target,"blackDel"):UI.addClass(a.target,"blackDel");MI.dialog.hide();a.call&&a.call(c)}else MI.alert(d.msg);b.sending=0}});b.sending=1}}};MI.confirm=function(a){if(a){a.type=a.type=="success"?"ui_sucico":"ui_warnico";a.title=a.title||"";a.content=a.content||"&nbsp;";a.confirmTxt=a.confirmTxt==void 0?_("确定"):a.confirmTxt;a.cancelTxt=a.cancelTxt==void 0?_("取消"):a.cancelTxt;a.close=a.close==void 0?0:a.close;var b=a.xy||[0,0];MI.confirm.hide();if(a.target){a.width=a.width||190;var c=a.content!="&nbsp;"?'<p class="info">'+a.content+"</p>":"";MI.confirm.html=UI.html('<div class="confirm_mini_box clear" style="display:block;margin:0;right:0;width:'+a.width+"px;left:"+(UI.getX(a.target)+b[0])+"px;top:"+(UI.getY(a.target)+UI.height(a.target)+b[1])+'px;"><div class="in"><h3 class="tit">'+a.title+"</h3>"+c+'<div class="opt">'+(a.url?'<a href="'+a.url+'" target="_blank"'+(a.confirmTxt==""?' style="display:none"':"")+' class="gb_btn gb_btn1" id="__confirmBtn__"><span class="t">'+a.confirmTxt+"</span></a>":"<label"+(a.confirmTxt==""?' style="display:none;"':"")+' class="gb_btn gb_btn1"><input type="button" id="__confirmBtn__" value="'+a.confirmTxt+'" class="t"></label>')+"<label"+(a.cancelTxt==""?' style="display:none"':"")+' class="gb_btn gb_btn5"><input type="button" hideFocus="true" id="__cancelBtn__" value="'+a.cancelTxt+'" class="t"></label></div></div></div>')[0];UI.append(MI.confirm.html,document.body)}else{a.width=a.width||252;MI.confirm.html=UI.html('<div class="confirm_larger_box clear" style="width:'+a.width+'px"><div class="ui_ico_b"><i class="'+a.type+'"></i></div><div class="cnt"><h3 class="tit">'+a.title+'</h3><div class="content">'+a.content+'</div><div class="opt">'+(a.url?'<a href="'+a.url+'" target="_blank"'+(a.confirmTxt==""?' style="display:none"':"")+' class="gb_btn gb_btn1" id="__confirmBtn__"><span class="t">'+a.confirmTxt+"</span></a>":"<label"+(a.confirmTxt==""?' style="display:none;"':"")+' class="gb_btn gb_btn1"><input type="button" id="__confirmBtn__" value="'+a.confirmTxt+'" class="t"></label>')+"<label"+(a.cancelTxt==""?' style="display:none"':"")+' class="gb_btn gb_btn5"><input type="button" hideFocus="true" id="__cancelBtn__" value="'+a.cancelTxt+'" class="t"/></label></div></div></div>')[0];MI.dialog.show({html:MI.confirm.html,width:a.width+80,close:a.close,closeEnd:a.closeEnd,start:a.start})}var b=j("__confirmBtn__"),d=j("__cancelBtn__");if(a.confirm&&b)b.onclick=a.confirm;if(d){d.onclick=function(b){a.target?MI.confirm.hide():MI.dialog.hide();if(a.cancel){b=UI.E(b);a.cancel.apply(this,[b])}};setTimeout(function(){d.value!==""&&d.focus()},100)}}};MI.confirm.hide=function(){if(MI.confirm.html){UI.remove(MI.confirm.html);MI.confirm.html=null}};MI.showGuessYourPrefer=function(){var a=j("newsTips2_guess");if(UI.cookie("showGuessYourLike_everyday")==null&&MI.user.fun.w2fTips&&!a&&j("talkNew")&&!(j("myDearTop")&&j("myDearTop").style.display=="")){a=UI.html('<div class="newsTips2 guess" id="newsTips2_guess" type="1" style="display:none"><p class="tip" style="text-align: center;"><em class="ico_care"></em>'+_("刷不出好玩的微博？")+'<a class="ulink" href="http://zhaoren.t.qq.com/who2follow.php" target="_blank" onclick="MI.Bos(\'btn_gotoWho2follow_timeline\');UI.cookie(\'showGuessYourLike_everyday\',1,7);UI.remove($$(\'.AL .newsTips2.guess\')[0]);">'+_("试试猜你喜欢！")+'</a><a class="close closeTip" href="#" onclick="MI.Bos(\'btn_closeGuessTips\');UI.cookie(\'showGuessYourLike_everyday\',1,7);UI.remove($$(\'.AL .newsTips2.guess\')[0]);return false;" title="'+_("关闭")+'"></a></p></div>')[0];UI.css(".mdTips{position:absolute;z-index:999;margin:31px 0 0 -160px;width:210px;padding:10px 20px 10px 40px;border:1px solid #F0E5BA;background:#FFFFE9}.mdTips .close{position:absolute;float:none;margin-top:-2px;right:10px}.mdTips p{text-align:left;color:#333}.mdTips .links{text-align:right}.mdTips .SA{position:absolute;left:180px;top:auto;bottom:9px}.mdTips .SA em,.mdTips .SA span{width:17px;height:19px;color:#F0E5BA}.mdTips .SA span{top:-1px;left:0;color:#FFFFE9}.mdTips .SA.UP{top:-10px;bottom:auto}.mdTips .SA.R{left:30px;right:auto}.mdTips .SA.UP span{top:0}.mdTips .SA.UP em{top:-1px}.mdTips .links a{font-size:12px;margin:3px 0 0 20px;color:#2B4A78;text-decoration:underline}.mdTips .ico_light{position:absolute;left:14px;margin-top:5px}");UI.after(a,j("talkNew"));UI.show(a);MI.Bos("btnShowGuessYourLike")}};MI.complainVerify=function(a){MI.ajax({url:"http://api.t.qq.com/asyn/complain.php",data:a&&a.data||{},type:"post",success:function(b){b=MI.json(b);if(b.result==-10){if(MI.complainVerify._complaindom){h(MI.complainVerify._complaindom,".inputTxt")[0].value="";h(MI.complainVerify._complaindom,".changeimg")[0].onclick()}else{b=['<form class="complainForm" style="padding-top: 10px;" action="http://api.t.qq.com/asyn/complain.php">','<table width="100%" border="0">',"<tr>",'<td class="fs14">验证码：</td>','<td><input type="text" class="inputTxt" style="width:80px" id="code" name="code"/><label class="tip">输入下图中的字符</label></td>',"</tr>","<tr>","<td>&nbsp;</td>",'<td><img value="" height="53" width="130" id="codeImg" src="http://captcha.qq.com/getimage?aid=46000101&r='+MI.random()+'"/>&nbsp;<a href="#" class="changeimg" onclick="$(\'codeImg\').src=$(\'codeImg\').src+\'&r=\'+MI.random();return false" id="changeimg_link" tabindex="6" style="color:#006a92">看不清，换一张</a></td>',"</tr>",'<tr><td></td><td><label class="gb_btn gb_btn5" style="position:static; margin-top:5px;"><input type="submit" value="提交" class="t"></label></td>',"</tr>","</table></form>"];MI.complainVerify._complaindom=UI.html(b.join(""))[0]}MI.dialog.show({title:'<h1 class="DmainTit">请输入申诉验证码</h1>',html:MI.complainVerify._complaindom,width:400,start:function(){var b=h(MI.complainVerify._complaindom,".inputTxt")[0];MI.complainVerify._complaindom.onsubmit=function(){a&&a.call?MI.complainVerify({data:{code:b.value},call:a.call}):MI.complainVerify({data:{code:b.value}});return false}}})}else{MI.dialog.hide();a&&a.call&&a.call(b)}}})};MI.Flash.getVersion=function(){var a="0",b=navigator,c;if(this.version)return this.version;if(b.plugins&&b.plugins.length)UI.each(b.plugins,function(b){if(b.name.hasString("Shockwave Flash")){c=parseFloat(b.description.split("Shockwave Flash")[1]);a=Math.max(c,a)}});else if(n.ActiveXObject)for(b=7;b<13;b++)try{var d=eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+b+"');");d&&(a=d.GetVariable("$version").split("WIN")[1].replace(/\,/g,"."))}catch(e){}return this.version=parseFloat(a)};MI.Flash.updateTip=function(a){var b=this.getVersion();if(UI.B.ipad)return'<div class="flashVersion"><p>你的系统不支持Flash,不能使用此功能</p></div>';a='<div class="flashVersion"><p>'+(b?_("你当前的FlashPlayer播放器版本是{0}，<br>低于此功能所需版本{1}",b,a||""):_("你的系统中没有安装FlashPlayer播放器"));a=a+_("，请更新播放器版本后再试");return a=a+('</p><p><a target="_blank" href="http://get.adobe.com/cn/flashplayer/">'+_("点此链接下载最新版")+"</a></p></div>")};MI.SmartBox=function(a,b,c,d){if(a&&UI.isString(a)){this._key=j(a);if(!this._key)return}else if(UI.isElement(a))this._key=a;else return false;var e=this,f;e._callback=b?b:null;e.url=MI.url.smartBox;e._type=c?c:"";e._fix=UI.B.ie?[0,0]:[1,2];e.param="key=%key%";e._valTip=!!d.type;e._style=d?d:{left:0,top:0,width:306};a=null;a=e._key.parentNode;e._form=a;if(e._form)e._ldrop=h(e._form,".btn_ldrop")[0];e._list=[];e.s=[];e._isBoss=0;e._natKeyWord="";e._sid="";if(e._form){if(UI.hasClass(e._form.parentNode,"tSearchNew"))e._isBoss=1;else if(UI.hasClass(e._form.parentNode,"tSearch"))e._isBoss=2;a=h(e._form,"input");UI.each(a,function(a){if(UI.A(a,"name")=="s_source")e._source=a})}e._key.blur();if(e._style.history==1&&e._ldrop)e._ldrop.onclick=function(a){e.create();e._form&&(e._isBoss==1?MI.Bos("btnClickHistoryNew"):e._isBoss==2&&MI.Bos("btnClickHistoryOld"));UI.E(a).stop();clearTimeout(f);if(UI.hasClass(e._ldrop,"lopen")){MI.focus(e._key);UI.removeClass(e._ldrop,"lopen")}else{e.getHistory();UI.addClass(e._ldrop,"lopen")}return false};if(this.tip=(this._tip=this._key.previousSibling)&&this._tip.nodeName=="LABEL"){this._key.value&&UI.hide(this._tip);this._tip.onclick=function(){e._key.focus()};if(!this._style.isnano)if(MI.boss==13)e._tip.innerHTML=_("搜我的广播/搜全站");else if(MI.guest&&MI.guest.sex)e._tip.innerHTML=_(MI.string.sprintf("搜%s的广播/搜全站",MI.guest.sex))}UI.EA(this._key,"focus",function(){e.create();e.tip&&UI.hide(e._tip);e.isDisplay||e.hide();e.getMsg(e._key.value)});UI.EA(this._key,"blur",function(a){var b=UI.E(a).target;e.tip&&!b.value&&UI.show(e._tip);f=setTimeout(function(){e.hide()},500);if(e._style.onblur&&UI.isFunction(e._style.onblur))e._style.onblur(a)});this._key.onbeforeeditfocus=function(){e.isDisplay||e.hide()};this._key.onclick=function(a){UI.E(a).stop();if(e._style.onclick&&UI.isFunction(e._style.onclick))e._style.onclick(a)};this._key.onkeydown=function(a){var b=UI.E(a);if(e.isDisplay)if(b.key==40||b.key==38){if(e._form!=null){e._form.action="http://search.t.qq.com/index.php";if(e._style.isnano)e._form.action="http://1.t.qq.com/search/message.php"}if(b.key==38)e.index=e.index-1<0?e.indexMax:e.index-1;else if(b.key==40)e.index=e.index+1>e.indexMax?0:e.index+1;b=e._list[e.index];if(e._valTip){e.removePara();for(var c=h(e._key.parentNode,".pos")[0],d=0,f=e._list.length;d<f;d++)UI.removeClass(e._list[d],"on");d=UI.A(b,"sort");d={sBak1:e._natKeyWord,sBak2:UI.A(b,"bosType"),sText:e._natKeyWord,id:1194,name:"SearchSrSmartClick",iPos:parseInt(d)+1,iBak1:e._sid,iBak2:UI.A(b,"block")};if(UI.hasClass(b,"special")||UI.hasClass(b,"speak")){if(UI.hasClass(b,"special")){UI.after(e._query,e._key);UI.A(h(e._key.parentNode,".pos")[0],"value","173")}else UI.A(c,"value","179");this.value=UI.text(h(e._select,"span")[0])}else if(UI.hasClass(b,"searchUser")){UI.A(c,"value","176");this.value=UI.text(h(e._select,"span")[0]);if(e._form!=null){e._form.action="http://search.t.qq.com/user.php";if(e._style.isnano)e._form.action="http://1.t.qq.com/search/user.php"}}else if(UI.hasClass(b,"searchQun")){UI.A(c,"value","178");UI.after(e._queryQun,e._key);this.value=UI.text(h(e._select,"span")[0]);if(e._form!=null)e._form.action="http://search.t.qq.com/qun.php"}else if(UI.hasClass(b,"searchApp")){UI.A(c,"value","183");this.value=UI.text(h(e._select,"span")[0]);if(e._form!=null)e._form.action="http://search.t.qq.com/app.php"}else if(UI.hasClass(b,"qunGet")||UI.hasClass(b,"userGet")||UI.hasClass(b,"appGet")){var f=UI.A(b,"name"),i=UI.A(b,"value"),q=i.indexOf("<a");this.value=q==-1?i:i.substring(0,q);if(UI.hasClass(b,"qunGet")){UI.A(c,"value","0");if(e._form!=null)e._form.action="http://qun.t.qq.com/"+f+"?from=smart";d.sText=f}else if(UI.hasClass(b,"userGet")){UI.A(c,"value","0");if(e._form!=null){e._form.action="http://t.qq.com/"+f;if(e._style.isnano)e._form.action="http://1.t.qq.com/"+f}d.sText=f}else if(UI.hasClass(b,"appGet")){UI.A(c,"value","0");(c=h(e._form,".appid")[0])?c.value=f:UI.before(UI.html('<input type="hidden" name="gameid" class="appid" value="'+f+'" />')[0],e._key);if(e._form!=null)e._form.action=UI.A(b,"url");d.sText=f}}else{this.value=i=b.nodeName=="DT"?UI.text(h(b,"span")[0]):UI.text(b);if(UI.hasClass(b,"guangbo")){UI.A(c,"value","174");d.sText=i}}e.bosData=d}else this.value=UI.text(b);e.select(e.index)}else{if(b.key==13||b.key==27){b.key==27?e.hide():e.select();if(e._valTip){var r=0;e._form.onsubmit=function(){if(e.bosData){setTimeout(function(){MI.Bos(e.bosData);setTimeout(function(){r=1;var a=e._form.action,b=h(e._form,"input"),c=[],d="";UI.each(b,function(a){a.name&&c.push(a.name+"="+encodeURIComponent(a.value))});d=c.join("&");document.location.href=a+(a.hasString("?")?"&"+d:"?"+d)},200)},100);return r?true:false}return true}}}}else UI.trim(this.value)&&(e._list.length>0&&(b.key==40||b.key==38)?e.show():e.getMsg(this.value));if(e._style.onkeydown&&UI.isFunction(e._style.onkeydown))return e._style.onkeydown(a,e)};this._key.onkeyup=function(a){a=UI.E(a);a.key==40||(a.key==38||a.key==13&&this.value==""||a.key==27)||e.getMsg(this.value)}};MI.SmartBox.prototype={lastOrigin:null,isDisplay:!1,timer:null,index:-1,indexMax:0,cache:[],create:function(){if(!this._select){var a=this;this._query=MI.guest&&MI.guest.user!=MI.user.account?UI.html('<span><input type="hidden" id="label" name="label" value="8" /><input type="hidden" id="uname" name="uname" value='+MI.guest.user+"></span>")[0]:UI.html('<span><input type="hidden" id="label" name="label" value="8" /><input type="hidden" id="poster" name="poster" value="2" /></span>')[0];this._queryAll=UI.html('<input type="hidden" class="pos" name="pos"/>')[0];this._queryQun=UI.html('<input type="hidden" id="from" name="from" value="smart" />')[0];this._pos={x:UI.getX(this._key),y:UI.getY(this._key)};this._select=UI.html('<div class="smartBox" style="display:none"></div>')[0];this._fixie6=UI.B.ie6?'<iframe style="width:100%;height:300px;position:absolute;top:0;left:0;filter:alpha(opacity=0);z-index:-1;"></iframe>':"";UI.append(this._select,document.body);UI.EA(document.body,"click",function(){a.hide()})}},hide:function(){if(this.isDisplay){this._ldrop&&UI.removeClass(this._ldrop,"lopen");UI.hide(this._select);this.isDisplay=false}},show:function(){if(MI.user.fun.search){this.resize();UI.show(this._select);this.isDisplay=true}},select:function(a){this.index=a;this._list[this.index]&&UI.addClass(this._list[this.index],"on");this.lastOrigin&&UI.removeClass(this.lastOrigin,"on");this.lastOrigin=this._list[this.index]},resize:function(){this._pos={x:UI.getX(this._key),y:UI.getY(this._key)};this._select.style.width=this._style.width+"px";this._select.style.left=this._pos.x+this._style.left+this._fix[0]+"px";this._select.style.top=this._pos.y+this._key.offsetHeight+this._style.top-this._fix[1]+"px"},removePara:function(){var a=this,b=j("pos");b&&UI.remove(b);(b=h(this._key.parentNode,"input"))&&UI.each(b,function(b){UI.A(b,"name")&&(UI.A(b,"name")=="pos"&&a._valTip)&&UI.remove(b);(UI.A(b,"id")=="poster"||UI.A(b,"id")=="label"||UI.A(b,"id")=="uname")&&UI.remove(b)});UI.after(this._queryAll,this._key)},getMsg:function(a){var b=this;if(UI.trim(a)){b._natKeyWord=a;var c=this.param.replace(/\%key\%/g,encodeURIComponent(a)),a=MI.string.html(a);this.timer&&clearTimeout(this.timer);if(this._type=="music")this.timer=n.setTimeout(function(){UI.getScript(b.url+"?"+c)},150);else{var d=UI.A(b._key,"id");b.cache[a]&&b.cache[a][d]?b.buildDom(b.cache[a][d],a):this.timer=n.setTimeout(function(){MI.ajax({url:b.url,type:"get",data:c,success:function(c){c=MI.json(c);b.cache[a]=[];b.cache[a][d]=c;b.buildDom(c,a)}})},150)}}else b.hide()},buildDom:function(a,b){var c=this;if(a.result==0){c._sid=a.sid?a.sid:"";c.s=[];var d='<dt class="speak rst" sort="-1" bosType="broadCast">'+(MI.boss==11||MI.boss==13||MI.guest&&MI.guest.user?_("搜全站广播："):_("搜广播："))+'<span index="0" value="'+b+'" class="c_tx4 cSign">'+b+"</span></dt>",e='<dt class="special rst" sort="-1" bosType="mySearch">'+_("搜我的广播：")+'<span index="1" value="'+b+'" class="c_tx4 cSign">'+b+"</span></dt>",f,g=0;if(MI.guest&&MI.guest.sex){f=_(MI.string.sprintf("搜%s的广播: ",MI.guest.sex));f='<dt class="special rst" sort="-1" bosType="hisSearch">'+f+'<span class="c_tx4 cSign" index="1" value="'+b+'">'+b+"</span></dt>"}var k='<dt class="searchUser rst" sort="-1" bosType="searchUser">'+_("搜用户：")+'<span class="c_tx4 cSign" index="1" value="'+b+'">'+b+"</span></dt>",i='<dt class="searchQun rst" sort="-1" bosType="searchQun">'+_("搜微群：")+'<span class="c_tx4 cSign" index="1" value="'+b+'">'+b+"</span></dt>",l='<dt class="searchApp rst" sort="-1" bosType="searchApp">'+_("搜应用：")+'<span class="c_tx4 cSign" index="1" value="'+b+'">'+b+"</span></dt>";if(c._valTip){c.s.push('<dl class="s1">');if(MI.boss==13||MI.boss==11||MI.guest&&MI.guest.user)MI.guest&&MI.guest.user!=MI.user.account?c.s.push(c._valTip?f:""):c.s.push(c._valTip?e:"");if(UI.isArray(a.info))UI.each(a.info,function(a,b){var e=a.type,f=a[e];if(e=="user"){e=f.length;if(e!=0){g=1;c.s.push(k);c.s.push('<dd><ul class="uList">');UI.each(f,function(a,d){c.s.push('<li class="userGet rst" bosType="yonghu" value="'+a.nick+'" name="'+a.account+'" sort="'+d+'" block="'+b+'"><div class="userPic"><img src="'+a.src+'"></div><div class="userInfo"><span class="userName">'+a.nick+(a.icons?a.icons:"")+'</span><span class="userId">@'+a.account+"</span></div></li>")});c.s.push("</ul></dd>")}}else if(e=="qun"){e=f.length;if(e!=0){g=1;c.s.push(i);c.s.push('<dd><ul class="uList">');UI.each(f,function(a,d){c.s.push('<li class="qunGet rst" bosType="weiqun" value="'+a.nick+'" name="'+a.id+'" sort="'+d+'" block="'+b+'"><div class="userPic"><img src="'+a.src+'"></div><div class="userInfo"><span class="userName">'+a.nick+'</span><span class="userId">'+_("成员")+a.num+_("人")+"</span></div></li>")});c.s.push("</ul></dd>")}}else if(e=="app"){e=f.length;if(e!=0){g=1;c.s.push(l);c.s.push('<dd><ul class="uList">');UI.each(f,function(a,d){c.s.push('<li class="appGet rst" bosType="app" value="'+a.name+'" name="'+(a.appid||"")+'" sort="'+d+'" block="'+b+'" url="'+a.url+'"><div class="userPic"><img src="'+a.src+'"></div><div class="userInfo"><span class="userName">'+a.name+'</span><div style="display:none;" class="c_grade_list" id="170177"><a href="'+a.url+'" target="_blank"><span class="star_g"> <em style="width:80%;" class="star_y"></em></span> </a><span class="b">8.</span><span class="s">0</span></div></div></li>')});c.s.push("</ul></dd>")}}else if(e=="msg"&&f.length!=0&&c._type!=="group"){g=1;c.s.push(d+"<dd><ul>");UI.each(f,function(a,d){c.s.push('<li bosType="guangbo" value="'+a+'"" sort="'+parseInt(d)+'" block="'+b+'" class="guangbo rst">'+a+"</li>")});c.s.push("</ul></dd>")}});else{if(a.info.user&&c._type!=="group"){e=a.info.user.length;if(e!=0){g=1;c.s.push(k);c.s.push('<dd><ul class="uList">');UI.each(a.info.user,function(a,b){c.s.push('<li class="userGet rst" bosType="yonghu" value="'+a.nick+'" name="'+a.account+'" sort="'+b+'"><div class="userPic"><img src="'+a.src+'"></div><div class="userInfo"><span class="userName">'+a.nick+'</span><span class="userId">@'+a.account+"</span></div></li>")});c.s.push("</ul></dd>")}}if(!c._style.isnano&&a.info.qun){e=a.info.qun.length;if(e!=0){g=1;c.s.push(i);c.s.push('<dd><ul class="uList">');UI.each(a.info.qun,function(a,b){c.s.push('<li class="qunGet rst" bosType="weiqun" value="'+a.nick+'" name="'+a.id+'" sort="'+b+'"><div class="userPic"><img src="'+a.src+'"></div><div class="userInfo"><span class="userName">'+a.nick+'</span><span class="userId">'+_("成员")+a.num+_("人")+"</span></div></li>")});c.s.push("</ul></dd>")}}e=[];e=a.info.msg?a.info.msg:a.info.words?a.info.words:a.info;if(e.length!=0&&c._type!=="group"){c.index=-1;g=1;c.s.push(d+"<dd><ul>");UI.each(e,function(a,b){c.s.push('<li bosType="guangbo" value="'+a+'" index="'+(parseInt(b)+1)+'" sort="'+parseInt(b)+'" class="guangbo rst">'+a+"</li>")});c.s.push("</ul></dd>")}}g==0&&c._type!=="group"&&c.s.push(k+i+d);c.s.push("</dl>")}else{e=a.info||[];if(a.info.msg)e=a.info.msg;else if(a.info.words)e=a.info.words;else if(UI.isArray(e)){f=0;for(var v=e.length;f<v;f++)if(e[f].type=="msg"){e=e[f].msg;break}}UI.isString(e[0])||(e=[]);if(e.length!=0&&c._type!=="group"){c.index=-1;g=1;c.s.push("<ul>");UI.each(e,function(a,b){c.s.push('<li bosType="guangbo" value="'+a+'" index="'+(parseInt(b)+1)+'" sort="'+parseInt(b)+'" class="guangbo rst">'+a+"</li>")});c.s.push("</ul>")}g==0&&c._type!=="group"&&c.hide()}c._select.innerHTML=c._fixie6+c.s.join("");(c._valTip||!c._valTip&&c.s.join("")!="")&&c.show();c._list=h(c._select,".rst");if(c._list==null)c._list=[];c.indexMax=c._list.length-1;UI.each(c._list,function(a){a.onmouseover=function(){for(var a=0,b=c._list.length;a<b;a++)UI.removeClass(c._list[a],"on");UI.addClass(this,"on")};if(c._valTip)a.onmousedown=function(){var b=UI.A(a,"sort"),b=b!=""?parseInt(b):"",b={sBak1:c._natKeyWord,sBak2:UI.A(a,"bosType"),sText:c._natKeyWord,id:1194,name:"SearchSrSmartClick",iPos:b+1,iBak1:c._sid,iBak2:UI.A(a,"block")};c.removePara();var d=h(c._key.parentNode,".pos")[0];if(!d){d=UI.html('<input type="hidden" class="pos" name="pos" value="">')[0];UI.after(d,c._key);d=h(c._key.parentNode,".pos")[0]}if(UI.hasClass(a,"special")){UI.A(d,"value","173");UI.after(c._query,c._key);if(c._source)c._source.value=MI.guest&&MI.guest.user!=MI.user.account?MI.guest.user:4}else if(UI.hasClass(a,"searchUser"))UI.A(d,"value","176");else if(UI.hasClass(a,"searchQun")){UI.A(d,"value","178");UI.after(c._queryQun,c._key)}else if(UI.hasClass(a,"speak"))UI.A(d,"value","179");else if(UI.hasClass(a,"userGet"))b.sText=UI.A(a,"name");else if(UI.hasClass(a,"qunGet"))b.sText=UI.A(a,"name");else if(UI.hasClass(a,"searchApp"))UI.A(d,"value","183");else if(UI.hasClass(a,"appGet"))b.sText=UI.A(a,"name");else if(UI.hasClass(a,"guangbo")){b.sText=this.nodeName=="DT"?UI.text(h(this,"span")[0]):UI.text(this);UI.A(d,"value","174")}MI.Bos(b)};a.onclick=function(){UI.A(a,"sort");if(UI.hasClass(a,"userGet")){var b=UI.A(a,"name");document.location=c._style.isnano?"http://1.t.qq.com/"+b:"http://t.qq.com/"+b}else if(UI.hasClass(a,"qunGet")){b=UI.A(a,"name");document.location="http://qun.t.qq.com/"+b+"?from=smart"}else if(UI.hasClass(a,"appGet")){UI.hasClass(a,"qunGet");b=UI.A(a,"url").indexOf("?")==-1?"?":"&";document.location=UI.A(a,"url")+b+"from=smart"}else{b=this.nodeName=="DT"?UI.text(h(this,"span")[0]):UI.text(this);c._key.value=b;c._key.value&&c._tip&&c._tip.nodeName=="LABEL"&&UI.hide(c._tip);UI.A(c._key,"index",UI.A(this,"index"));if(UI.hasClass(a,"guangbo")){c.removePara();UI.A(h(c._key.parentNode,".pos")[0],"value","174")}c.submit(a)}}})}else c.hide()},submit:function(a){if(this._form!=null){this._form.action="http://t.qq.com/search/index.php";if(this._style.isnano)this._form.action="http://1.t.qq.com/search/message.php"}if(this._callback){if(a&&UI.hasClass(a,"searchUser")){if(this._form!=null){this._form.action="http://t.qq.com/search/user.php";if(this._style.isnano)this._form.action="http://1.t.qq.com/search/user.php"}}else if(a&&UI.hasClass(a,"searchQun")){if(this._form!=null)this._form.action="http://t.qq.com/search/qun.php"}else if(a&&UI.hasClass(a,"searchApp")&&this._form!=null)this._form.action="http://t.qq.com/search/app.php";this._callback()}},getHistory:function(){var a=this;this.timer&&clearTimeout(this.timer);this.timer=n.setTimeout(function(){MI.ajax({url:MI.url.searchList,type:"post",success:function(b){b=MI.json(b);a.bulidList(b)}})},50)},bulidList:function(a){var b=this;if(a.result==0)if(a.info){var c=[],d=a.info.length;b.indexMax=b._style.history==1?d-1:d;b.index=-1;var e=0;c.push("<ul>");UI.each(a.info,function(b,d){c.push('<li value="'+b+'" index="'+(parseInt(d)+1)+'" class="'+(a.stat[e]==1?"rss":"his")+'">'+(a.stat[e]==1?'<b class="ico_rss"></b>':'<b class="ico_his"></b>')+"<span>"+b+"</span></li>");e++});c.push("</ul>");if(c.length!=2){b._select.innerHTML=b._fixie6+c.join("");b.show();b._list=h(b._select,"li");UI.each(b._list,function(a){a.onmouseover=function(){for(var a=0,c=b._list.length;a<c;a++)UI.removeClass(b._list[a],"on");UI.addClass(this,"on")};a.onmousedown=function(){b.removePara();var c=h(b._key.parentNode,".pos")[0];if(!c){c=UI.html('<input type="hidden" class="pos" name="pos" value="">')[0];UI.after(c,b._key);c=h(b._key.parentNode,".pos")[0]}UI.hasClass(a,"rss")?UI.A(c,"value","180"):UI.A(c,"value","181")};a.onclick=function(){b._key.value=this.nodeName=="DT"?UI.text(h(this,"span")[0]):UI.text(this);UI.A(b._key,"index",UI.A(this,"index"));b._key.value&&b._tip&&b._tip.nodeName=="LABEL"&&UI.hide(b._tip);b.submit()}})}}else b.hide();else b.hide()}};MI.AutoCmt=function(a){function b(a){UI.E(a);clearTimeout(e.delay);e.delay=setTimeout(function(){var a,b,f,g;b=e._target.value;if(e.clicks>0)e.clicks--;else{e.cursorX=MI.cursorX(e._target);if(document.selection&&document.selection.createRange().text==MI.TalkBox.prototype.txtTopic.slice(1,-1)){e.cursorXHack=6;e.cursorX=e.cursorX-e.cursorXHack}else e.cursorXHack=0;b=b.replace(/\r/g,"");a=b.slice(0,e.cursorX).replace(/＠/g,"@");if(!e.key&&a.match(/^@/)){e.filter="@";a=a.replace(/^@/,"")}else e.filter="";b=b.slice(e.cursorX);f=a.slice(-1);e.word=(e.key?a.match(/@[^\s@\n\r]{0,64}$/g):a.match(/[^\s\n\r]{0,64}\S$/g))||"";e.text=a;if(e.topic&&f=="#"&&a.match(/#/g).length%2!=0){var i=MI.json(MI.S("option_topic_"+MI.Uin()));b=[];f=0;e.creatDom();e._txt.innerHTML=e.key?e.shadowText(a):"";for(g in i){i=MI.string.html(decodeURI(g).slice(1,-1));b.push('<li title="'+i+'"'+(f?"":' class="on"')+'><a href="#" tabIndex="1">'+MI.string.cut(i,20,"")+"</a></li>");f++}if(f){e._body.style.cssText="";e._cont.style.cssText="";UI.hide(e._all);UI.hide(e._search);UI.hide(e._tips);UI.show(e._key);e._key.innerHTML="<ul>"+b.join("")+"</ul>";e.list=h(e._key,"li");UI.each(e.list,function(a,b){a.onclick=c;a.onmouseover=d;a.index=b});e.index=0;e.indexMax=e.list.length-1;UI.show(e._body);UI.linkEvent("TalkBox.Topic.autoShow");e.display=0;e.position();e.display=1}e.selectType=1;e.model=0}else if(MI.user.fun.braceKeyword&&(f=="{"||f=="｛")&&(!document.selection||document.selection&&!document.selection.createRange().text))e.getKeyWord&&UI.isFunction(e.getKeyWord)&&e.getKeyWord(function(b){var b=b||{},f=[],g=0,i;e.creatDom();e._txt.innerHTML=e.key?e.shadowText(a):"";UI.each(b,function(a){i=MI.string.html(a);f.push('<li title="'+i+'"'+(g?"":' class="on"')+'><a href="#" tabIndex="1">'+MI.string.cut(i,20,"")+"</a></li>");g++});if(g){e._body.style.cssText="";e._cont.style.cssText="";UI.hide(e._all);UI.hide(e._search);UI.hide(e._tips);UI.show(e._key);e._key.innerHTML="<ul>"+f.join("")+"</ul>";e.list=h(e._key,"li");UI.each(e.list,function(a,b){a.onclick=c;a.onmouseover=d;a.index=b});e.index=0;e.indexMax=e.list.length-1;UI.show(e._body);e.display=0;e.position();e.display=1}e.selectType=2;e.model=0;e.keyword=0});else if(e.word){e.word=e.word[0]||"";g=e.word.length;g>1&&(a=a.slice(0,-g+1));e.selectType=0;e.model=0;UI.show(e._tips);e._txt.innerHTML=e.key?e.shadowText(a):"";e._txtEnd.innerHTML=e.shadowText(b);e.creatDom(function(){UI.EA(n,"beforeunload",function(){var a="top_"+MI.Uin();MI.isS&&MI.S(a,UI.json2str(MI.users))})});e.getData()}else if(e.model!=1){clearTimeout(e.delay);e.hide()}}},150)}function c(a){a=UI.E(a);a.stop();e.select(a);e.clickCall&&e.clickCall(this);return false}function d(){if(e.index==null)e.index=0;UI.removeClass(e.list[e.index],"on");UI.addClass(this,"on");e.index=this.index}var e=this;e._target=a.target;e.key=a.key;e.call=a.call;e.clickCall=a.clickCall;e.type=a.type||0;e.newData=a.newData||0;e.align=a.align||"left";e.topic=a.topic||0;e.face=a.face||0;e.tips=UI.isUndefined(a.tips)?1:a.tips;e.moreName=a.moreName||0;e.minWidth=a.minWidth;e.maxWidth=a.maxWidth;e.autoFocus=a.autoFocus||1;e.maxCss=a.maxCss||e.maxCss;e.noqun=a.noqun||0;var f="atSearch_"+MI.random();e._body=UI.html('<div class="atWrap" style="display:none"><div class="musicTab" style="display:none"><div class="atSearch"><label for="'+f+'">'+_("输入名字/帐号")+'</label><input id="'+f+'" type="text" class="inputTxt"><span class="atbtn"><input type="button" class="btn_search2"><a href="#" class="del" title="'+_("清空")+'"></a></span></div><a href="#" class="close" title="'+_("关闭")+'"></a></div><div class="autoCmt" style="display:none"><div class="autoCmtAll"></div><div class="autoCmtKey"></div></div><div class="tips" style="display:none">'+(UI.isString(e.tips)?e.tips:_("@朋友帐号,他就能在[提到我的]页收到"))+"</div>\t</div>")[0];e._shadow=UI.html('<div class="txtShadow"><span></span><b>|</b><span></span></div>')[0];UI.after(e._shadow,a.target);e._txt=e._shadow.firstChild;e._cursor=e._txt.nextSibling;e._txtEnd=e._shadow.lastChild;UI.B.ie&&UI.before(UI.html('<b style="display:none;width:0;overflow:hidden"></b>')[0],a.target);UI.EA(a.target,"keydown",function(a){a=UI.E(a);e.keyEvent(a)});UI.EA(document.body,"click",function(){e.hide()});UI.EA(a.target,"keyup",b);UI.EA(a.target,"focus",b);UI.EA(a.target,"mouseup",b)};MI.AutoCmt.prototype={_body:0,_search:0,_cont:0,_all:0,_key:0,_tips:0,max:1E3,maxCss:"height:220px;overflow-y:scroll;overflow-x:hidden;",allList:0,keyList:0,list:0,listTmpl:"",display:0,clicks:0,index:0,word:"",filter:"",cursorX:0,cursorXHack:0,shadowText:function(a){return a.replace(/\r\n|\n/g,"<br>").replace(/ /g,"&nbsp;")},tips:1,creatDom:function(a){var b=this;if(!b._body.appended){UI.append(b._body,document.body);b._body.appended=1}if(!b._cont){b._search=h(b._body,".musicTab")[0];b._input=h(b._body,".inputTxt")[0];b._btn=h(b._body,".btn_search2")[0];b._close=h(b._body,".close")[0];b._del=h(b._body,".del")[0];b._cont=h(b._body,".autoCmt")[0];b._all=h(b._body,".autoCmtAll")[0];b._key=h(b._body,".autoCmtKey")[0];if(b.tips){b._tips=h(b._body,".tips")[0];UI.show(b._tips)}b._close.onclick=function(a){UI.E(a).stop();b.hide();MI.Bos("btnAutoAtClose");return false};b._btn.onclick=function(){MI.focus(b._input)};b._del.onclick=function(a){b._input.value="";b._input.focus();b._input.onkeyup(a);UI.show(b._btn);MI.Bos("btnAutoAtDel");return false};b._input.onkeyup=b._input.onfocus=function(a){var a=UI.E(a),d=UI.trim(this.value).replace(/^@/g,"");!(a.key==38||a.key==37||a.key==39||a.key==40||a.key==13)&&MI[b.usersStorageKey]&&b.show(MI[b.usersStorageKey],MI[b.usersStorageKeyPY],1);d?UI.hide(b._btn):UI.show(b._btn);UI.hide(UI.prev(this));UI.A(this,"focused",1)};b._input.onblur=function(){if(!UI.trim(this.value)){UI.show(UI.prev(this));UI.show(b._btn)}UI.A(this,"focused","")};b._input.onkeydown=function(a){b.keyEvent(a)};b._body.onclick=function(a){b.model==1&&UI.E(a).stop()}}a&&a()},keyEvent:function(a){var b=UI.E(a);if(this.display&&UI.isNumber(this.index))if(b.key==40||b.key==38){UI.removeClass(this.list[this.index],"on");b.key==38?this.index--:b.key==40&&this.index++;if(this.index<0)this.index=this.indexMax;else if(this.index>this.indexMax)this.index=0;UI.addClass(this.list[this.index],"on");this._cont.scrollTop=(this.index-4)*22;this.clicks=1;clearTimeout(this.delay);b.prevent()}else if(b.key==13||b.key==27){if(b.key==27)this.hide();else if(this.model==1&&UI.isNumber(this.index)&&this.list[this.index]){this.list[this.index].onclick(a);this.cursorX=MI.cursorX(this._target)}else this.select(b);this.clicks=1;clearTimeout(this.delay);b.prevent()}},selectType:0,select:function(a){MI.TalkBox.cur&&MI.TalkBox.cur._txt==this._target&&MI.TalkBox.cur.guideTextRemove();if(this.selectType==0){if(UI.isNumber(this.index)&&this.list[this.index]){var b=this._target.scrollTop,c=this.list[this.index].txt,d;MI.selectTxt(this._target,this.cursorX,this.cursorX,this.cursorX);this.word?this.key?MI.insertTxt(this._target,c+" ",this.cursorX,this.word.slice(1).length):MI.insertTxt(this._target,c+" ",this.cursorX,this.word.length):MI.insertTxt(this._target,"@"+c+" ",this.cursorX,0);d=MI.users[c];MI.users[c]=d?d+1:1;if(!this.key&&this.moreName!=1)this._target.value=this.filter+c;this.call&&this.call(a);this._target.scrollTop=b;MI.Bos("btnAutoAtAccount"+(this.model?this.model:""),0,this.model?0.01:0);n.MIApiId&&MI.Bos({name:"btnAPIAT",sBak1:MIApiId,id:1210});UI.linkEvent("autoCmt");UI.linkEvent("autoCmtAt")}}else if(this.selectType==1){c="#"+this.list[this.index].title+"#";a=this.cursorX;b=1;if(!UI.B.ie)this._target.value=this._target.value.replace(MI.TalkBox.prototype.txtTopic,"#");if(this.cursorXHack){b=this.cursorXHack;MI.selectTxt(this._target,a+b-1,a+b+1)}MI.insertTxt(this._target,c,a,b);if(this.cursorXHack){c=a+c.length-1;MI.selectTxt(this._target,c,c)}MI.Bos("btnAutoAddTopic");UI.linkEvent("autoCmt");UI.linkEvent("autoCmtTopic");UI.linkEvent("TalkBox.Topic.item")}else if(this.selectType==2){c="{"+this.list[this.index].title+"}";a=this.cursorX;b=1;if(!UI.B.ie)this._target.value=this._target.value.replace(MI.TalkBox.prototype.txtKeyword,"}");if(this._target.value.length>a&&(this._target.value.charAt(a)=="}"||this._target.value.charAt(a)=="｝"))c=c.substring(0,c.length-1);if(this.cursorXHack){b=this.cursorXHack;MI.selectTxt(this._target,a+b-1,a+b+1)}MI.insertTxt(this._target,c,a,b);if(this.cursorXHack){c=a+c.length-1;MI.selectTxt(this._target,c,c)}MI.Bos("btnAutoAddKey");UI.linkEvent("autoCmt");UI.linkEvent("autoCmtKey")}this.model==0&&this.hide()},getData:function(a){function b(a){var b={info:{}},c={};if(UI.isArray(a.info))for(var d=0;d<a.info.length;++d){b.info[a.info[d][0]]=a.info[d][1];a.info[d][2]&&(c[a.info[d][0]]=[a.info[d][2].toLowerCase(),MI.MatchPY.whole2sim(a.info[d][2])])}else b=a;return[b,c]}var c=this,d="follow_"+c.type+"_"+MI.Uin(),e="top_"+MI.Uin(),f=d+"_PY",g=MI.S(d),h=MI.S(e);c.usersStorageKey=d;c.usersStorageKeyPY=f;if(MI.isS){h||MI.S(e,"{}");if(!MI.users){MI.users=MI.json(MI.S(e));c.sort()}if(c.newData||!MI[d]&&!c.sending&&(!g||(new Date).getTime()-MI.S("time")>432E5||g.indexOf("]]}")==-1)||!MI.S("time")){c.sending=1;var i,l,v,j;i=+new Date;MI.ajax({url:MI.url.at,type:"get",data:"user="+MI.user.account+"&type="+(c.type?c.type:0)+"&num="+(UI.B.ie?750:2E3)+"&noqun="+c.noqun,success:function(e){l=+new Date-i;var g=MI.json(e);if(g.result==0){MI.S(d,e);MI.S("time",(new Date).getTime());e=b(g);MI[d]=e[0];MI[f]=e[1];c.show(MI[d],MI[f]);a&&a()}else g.result==-1&&UI.hide(c._body);c.sending=0;v=+new Date-i;setTimeout(function(){j=+new Date-i;MI.Speed("t_asyn_nicktips",1,l,v,j)},0)}})}else{if(!MI[d]){e=b(MI.json(g));MI[d]=e[0];MI[f]=e[1]}c.show(MI[d],MI[f]);a&&a()}}},model:0,showAll:function(a){function b(){UI.show(c._search);UI.show(c._all);UI.show(c._tips);UI.hide(c._key);UI.show(c._btn);if(UI.getX(a)!=0){c._body.style.cssText="top:"+(UI.getY(a)+UI.height(a)+3-MI.scrollHack(a))+"px;left:"+(UI.getX(a)-1)+"px";c._input.value="";c._input.blur();if(c.autoFocus)try{c._input.focus()}catch(b){}else{c._input.onfocus();UI.show(UI.prev(c._input))}c.display=1;c.selectType=0;c.model=1}}if(MI.user.account){var c=this;c.creatDom();if(c._all.innerHTML==""||!MI.S("time")){c.word="";c.getData(function(){b()})}b();c.afterShowAll&&c.afterShowAll(c._body)}else MI.newQucikLogin()},show:function(a,b,c){function d(a){a=UI.E(a);a.stop();g.select(a);g.clickCall&&g.clickCall(this);return false}function e(){if(g.index==null)g.index=0;UI.removeClass(g.list[g.index],"on");UI.addClass(this,"on");g.index=this.index;g.mouseHoverCall&&g.mouseHoverCall(this)}function f(){g.mouseOutCall&&g.mouseOutCall(this)}var b=b||{},g=this,k=function(a){return"<b>"+a+"</b>"};c||UI.hide(g._search);g.listEvent=function(a){var b=a==1,c=b?"allList":"keyList";g[c]=h(g[b?"_all":"_key"],"li");UI.each(g[c],function(a,b){a.onclick=d;a.onmouseover=e;a.onmouseout=f;a.txt=A[b];a.index=b});g.list=g[c];g.display=0;g.index=0;g.indexMax=g.list.length-1;UI.addClass(g.list[0],"on");g.showCall&&g.showCall(a)};var i=[],l=0,v=c?UI.trim(g._input.value.replace(/^@/g,"")):g.key?g.word.slice(1):g.word,j=MI.string.escapeReg(v),q,r,u,n,o;r=c?50:10;var p=0,A=[],w={},C={},H=a.info,t={};UI.each(H,function(a,b){H[b]&&UI.isString(H[b])&&(t[MI.string.html(b)]=MI.string.html(H[b]))});if(v){j=MI.string.escapeReg(v);q=RegExp("(^"+j+")","i");r=RegExp("("+j+")","ig");for(var m in t){if(l>=g.max)break;if(t[m]&&(m.match(q)||t[m].match(q))){u=m.replace(q,k);var s=t[m].replace(q,k);i.push(s+" ("+u+")"+(m.substr(0,1)=="*"?'<em class="ico_qGroup"></em>':""));g.listTmpl&&(C[m]=[t[m],u,s]);A.push(m);w[m]=1;l++}p++}if(MI.TransformST){u=MI.TransformST.toggle(j);n=RegExp("(^"+u+")","i");o=RegExp("("+u+")","ig");if(u!=j)for(m in t){if(l>=g.max)break;if(t[m]&&(m.match(n)||t[m].match(n))){u=m.replace(q,k);s=t[m].replace(q,k);i.push(s+" ("+u+")"+(m.substr(0,1)=="*"?'<em class="ico_qGroup"></em>':""));g.listTmpl&&(C[m]=[t[m],u,s]);A.push(m);w[m]=1;l++}p++}}else MI.app({TransformST:function(){g.show(a,b,c)}});if(l<g.max){j=v.toLowerCase();for(m in t){if(l>=g.max)break;if(b[m]&&!w[m]){if(s=MI.MatchPY.sim(b[m][1],j)){if(!t[m])continue;u=m;s=t[m].substring(0,s[0])+"<b>"+t[m].substring(s[0],s[0]+s[1])+"</b>"+t[m].substring(s[0]+s[1]);i.push(s+" ("+u+")"+(m.substr(0,1)=="*"?'<em class="ico_qGroup"></em>':""));g.listTmpl&&(C[m]=[t[m],u,s]);A.push(m);w[m]=1;l++}p++}}}if(l<g.max){j=v.toLowerCase();for(m in t){if(l>=g.max)break;if(b[m]&&!w[m]){if(s=MI.MatchPY.whole(b[m][0],j)){if(!t[m])continue;u=m;s=t[m].substring(0,s[0])+"<b>"+t[m].substring(s[0],s[0]+s[1])+"</b>"+t[m].substring(s[0]+s[1]);i.push(s+" ("+u+")"+(m.substr(0,1)=="*"?'<em class="ico_qGroup"></em>':""));g.listTmpl&&(C[m]=[t[m],u,s]);A.push(m);w[m]=1;l++}p++}}}if(l<g.max){for(m in t){if(l>=g.max)break;if(t[m]&&(m.slice(1).match(r)||t[m].slice(1).match(r))&&!w[m]){u=m.replace(r,k);s=t[m].replace(r,k);i.push(s+" ("+u+")"+(m.substr(0,1)=="*"?'<em class="ico_qGroup"></em>':""));g.listTmpl&&(C[m]=[t[m],u,s]);A.push(m);w[m]=1;l++}p++}if(o&&o!=r)for(m in t){if(l>=g.max)break;if(t[m]&&(m.slice(1).match(o)||t[m].slice(1).match(o))&&!w[m]){u=m.replace(o,k);s=t[m].replace(o,k);i.push(s+" ("+u+")"+(m.substr(0,1)=="*"?'<em class="ico_qGroup"></em>':""));g.listTmpl&&(C[m]=[t[m],u,s]);A.push(m);w[m]=1;l++}p++}}}else if(MI.usersArr&&MI.usersArr.length){g.sort();m=0;for(k=MI.usersArr.length;m<k;m++){if(m>=r)break;o=MI.usersArr[m].account;if(j=a.info[o]){u=o;s=j;i.push(j+" ("+o+")");l++;g.listTmpl&&(C[o]=[j,u,s]);A.push(o);w[o]=1}}}else if(g.word=="@"){if(!g._body.appended){UI.append(g._body,document.body);g._body.appended=1}g._txt.innerHTML=g.key?g.shadowText(g.text):"";g._body.style.cssText="";g.list=h(g._body,"li");g.index=0;g.display=0;g.position();g.display=1}if(!v&&c)for(m in t){if(l>=g.max)break;if(!w[m]){u=m;s=t[m];i.push(s+" ("+u+")"+(m.substr(0,1)=="*"?'<em class="ico_qGroup"></em>':""));g.listTmpl&&(C[m]=[t[m],u,s]);A.push(m);w[m]=1;l++}p++}if(l>10){g._cont.style.cssText=g.maxCss;g._cont.scrollTop=0}else g._cont.style.cssText="";if(!c)g._body.style.cssText="";var F;if(g.listTmpl)F=(new UI.tmplString(g.listTmpl))({data:C});else{F=[];F.push("<ul>");UI.each(i,function(a,b){F.push('<li index="'+b+'"><a href="#" tabindex="1">'+a+"</a></li>")});F.push("</ul>");F=F.join("")}l||(F="");if(!v&&!g.allList&&c)g._all.innerHTML=F;else if(v||!c)g._key.innerHTML=F;UI.removeClass(g.list[g.index],"on");if(!v&&c){UI.hide(g._key);UI.show(g._all);g.listEvent(1);if(g.allList&&g.allList.length>10)g._cont.style.cssText=g.maxCss}else{UI.show(g._key);UI.hide(g._all);g.listEvent(2)}if(!l){UI.hide(g._cont);v&&!c&&UI.hide(g._body)}c||g.position();g.display=1},hide:function(){if(this.display){UI.hide(this._body);UI.removeClass(this.list[this.index],"on");this.index=null;this.model=0;this.afterHide&&this.afterHide()}},position:function(){var a,b,c,d;if(!this.display&&UI.getX(this._cursor)!=0){d=UI.windowWidth();c=UI.width(this._body);if(this.key){a=UI.getX(this._cursor)-12;b=UI.getY(this._cursor)-this._target.scrollTop-MI.scrollHack(this._cursor)+26}else{a=UI.getX(this._target);b=UI.getY(this._target)+UI.height(this._target)-1}if(this.minWidth&&c<=this.minWidth)this._body.style.width=this.minWidth+"px";if(this.maxWidth&&c>this.maxWidth)this._body.style.width=this.maxWidth+"px";this.align=="right"&&(a=a-(c-UI.width(this._target)));this.align=="top"&&(b=UI.getY(this._target)-UI.height(this._body));b=";top:"+b+"px;left:"+a+"px;";d-(c+a)<0&&(b=b+"left:auto;right:0;");this._body.style.cssText=this._body.style.cssText+b}},sort:function(){delete MI.usersArr;var a=[],b;for(b in MI.users)a.push({account:b,count:MI.users[b]});MI.usersArr=a.sort(function(a,b){return b.count-a.count})}};MI.MatchPY={sp:"|",sim:function(a,b){var c=a.indexOf(b);return c==-1?null:[c,b.length]},whole:function(a,b){var c=a.split(this.sp),d=c.join(""),e=c.length;if(e==1)return d==b?[0,1]:null;for(var f=0;f<e;++f){if(this.startsWith(d,b))return[f,this.len(c,f,b)];d=d.substring(c[f].length)}return null},whole2sim:function(a){for(var a=a.split(this.sp),b="",c=0;c<a.length;++c)b=b+(a[c].charAt(0)||"?");return b.toLowerCase()},len:function(a,b,c){for(var c=c.length,d=0,e=a.length,f=b;f<e;++f){d=d+a[f].length;if(c==d)return f-b+1;if(c<d)return f-b}return e},startsWith:function(a,b){return a.lastIndexOf(b,0)==0}};MI.Dialog=function(a){var a=a||{},b=this;b.tmpl=a.tmpl;if(self!=parent)try{if(parent.document.domain==MIDomian)b.iframe=1}catch(c){}UI.linkEvent.add("MI.TalkList.resize",function(){b.resizeBg()})};MI.Dialog.prototype={width:462,iframe:0,close:1,x:0,y:0,_titleMousedown:function(a){var b=this,c=b._wrap,a=UI.E(a),d=a.x+b.x-parseInt(c.style.left),e=a.y+b.y-parseInt(c.style.top),f=UI.windowWidth(),g=UI.windowHeight();a.prevent();document.onmousemove=document.ontouchmove=function(a){if(b.canDrag){a=UI.E(a);if(a.x+b.x<0||a.y+b.y<0||a.x+b.x>f||a.y+b.y>g)if(UI.B.ie&&(b.x!=0||b.y!=0)||!UI.B.ie)return false;c.style.top=a.y+b.y-e+"px";c.style.left=a.x+b.x-d+"px";return false}};document.onmouseup=document.ontouchend=function(){document.onmousemove=document.ontouchmove=null;document.onmouseup=document.ontouchend=null};return false},_closeClick:function(){if(this.closeEnd)var a=this.closeEnd();a||this.hide();return false},resizeBg:function(){var a=this;if(a.display&&a._bg){if(UI.B.ie)a._bg.style.cssText=a._bg.style.cssText+";width:100%;";a.delay=setTimeout(function(){var b=UI.pageHeight(),c=UI.windowHeight();a._bg.style.cssText=a._bg.style.cssText+(";margin-left:0;width:"+UI.pageWidth()+"px;height:"+(b<c?c:b)+"px;");if(UI.B.ie6)a._cover.style.cssText=a._bg.style.cssText},0)}},create:function(){if(!this._body){var a=this.tmpl||'<div class="D">'+(UI.B.ie6?'<iframe src="javascript:false;" class="cover_select"></iframe>':"")+'<div class="bg"></div><div class="CR"><table border="0" cellspacing="0" cellpadding="0" class="tbSendMsg"><tr><td class="tl"></td><td class="tm"></td><td class="tr"></td></tr><tr><td class="lm"></td><td><div class="DWrap"><div class="DTitle"></div><a title="'+_("关闭")+'" class="DClose close" href="#">'+_("关闭")+'</a><div class="DLoad"></div><div class="DCont"></div></div></td><td class="rm"></td></tr><tr><td class="bl"></td><td class="bm"></td><td class="br"></td></tr></table></div></div>';this._body=UI.html(a)[0];this._bg=this.$(".bg");if(UI.B.ie6)this._cover=this.$(".cover_select");this._title=this.$(".DTitle");this._close=this.$(".DClose");this._cont=this.$(".DCont");this._load=this.$(".DLoad");this._wrap=this.$(".CR");a=UI.bind(this._titleMousedown,this,true);UI.EA(this._title,"mousedown",a);UI.EA(this._title,"touchstart",a);UI.EA(n,"resize",UI.bind(this.resizeBg,this,true))}},show:function(a){var b=this,c;b.canDrag=!a||UI.isUndefined(a.canDrag)?true:a.canDrag;b.create();if(a){a.bodyClass?UI.hasClass(b._body,a.bodyClass)||UI.addClass(b._body,a.bodyClass):UI.hasClass(b._body,b.bodyClass)&&UI.removeClass(b._body,b.bodyClass);b.bodyClass=a.bodyClass}if(!b._close.onclick)if(UI.B.ipad){b._close.ontouchend=UI.bind(b._closeClick,b,true);b._close.ontouchstart=function(a){a=UI.E(a);a.prevent()}}else b._close.onclick=UI.bind(b._closeClick,b,true);if(a){if(a.html)document.body.appendChild(b._body);else if(!b._append){document.body.appendChild(b._body);b._append=1}b.close=a.close!=void 0?a.close:1;b.ico=a.ico;b.close?UI.show(b._close):UI.hide(b._close);b._title.innerHTML=a.title||"";UI.C(b._title,"height",a.title?"":"0");if(a.html&&!a.noReserve)for(var d=b._cont.childNodes.length;d>0;d--){var e=b._cont.childNodes[d-1];if(e.nodeType==1){UI.hide(e);UI.append(e,document.body)}}if(UI.isString(a.html))b._cont.innerHTML=a.html;else if(UI.isObject(a.html)){b._cont.innerHTML="";UI.append(a.html,b._cont);UI.show(a.html)}if(a.width)b.width=a.width;if(a.height)b.height=a.height;UI.C(b._wrap,"width",b.width+"px");UI.C(b._wrap,"opacity",0);UI.show(b._body);b.height&&UI.C(b._cont,"height",b.height+"px");if(MI.api.type==5){e=qOP.adapter.iframeInfo.top;d=qOP.adapter.iframeInfo.clientBottom-qOP.adapter.iframeInfo.clientTop}else{d=UI.windowHeight();e=UI.scrollY();c=0;var f=n.frameElement;if(b.iframe){d=parent.innerHeight||parent.document.documentElement&&parent.document.documentElement.clientHeight||parent.document.body.clientHeight;e=parent.pageYOffset||parent.document.documentElement&&parent.document.documentElement.scrollTop||parent.document.body.scrollTop;do{c=c+(f&&f.offsetTop);f=f.offsetParent}while(f);e=e-c}}c="width:"+b.width+"px;left:"+(UI.windowWidth()/2-b.width/2)+"px;";c=e+d/2-UI.height(b._wrap)/2<0?c+"top:0px;":c+("top:"+(e+d/2-UI.height(b._wrap)/2)+"px;");a.left!=void 0&&(c=c+("left:"+a.left+"px;margin-left:0;"));a.top!=void 0&&(c=c+("top:"+a.top+"px;margin-top:0;"));setTimeout(function(){b.resizeBg()},0);b._wrap.style.cssText=c;if(a.html){a.start&&a.start();b.end=a.end?a.end:null;b.closeEnd=a.closeEnd?a.closeEnd:null;this.call&&this.call()}b.display=1;!UI.B.firefox&&!UI.B.ipad&&UI.C(UI.B.ie?document.documentElement:document.body,"overflowX","hidden")}else UI.show(b._body)},hide:function(){UI.hide(this._body);this.hideLoad();this.end&&this.end();this.display=0;!UI.B.firefox&&!UI.B.ipad&&UI.C(UI.B.ie?document.documentElement:document.body,"overflowX","auto")},showLoad:function(a,b,c,d,e){var a=a||this._cont,f="",d=d||UI.width(a),e=e||UI.height(a);UI.isNumber(b)&&(f=f+("top:"+b+"px;"));UI.isNumber(c)&&(f=f+("left:"+c+"px;"));this._load.style.cssText="width:"+d+"px;height:"+e+"px;"+f},hideLoad:function(){var a=this;setTimeout(function(){UI.hide(a._load)},0)},showTip:function(a){var b=this,c=b.close;a.close=0;a.html='<div class="pop_rst_box pop_rst_box_succeed clear"><div class="ui_ico_s tit"><i class="'+(a.ico?a.ico:"ui_sucico")+'"></i><span class="tit_tx">'+a.html+"</span></div></div>";b.show({width:9999,close:0});b.show(a);b.show({width:UI.width(b._cont)+40,close:0});setTimeout(function(){b.hide();b.close=c},a.delay?a.delay:1E3)},alert:function(a,b){var c=this,d;c.show({width:9999,close:0});c.show({html:'<div class="pop_rst_box pop_rst_box_fail clear"><div class="ui_ico_b tit"><i class="ui_warnico"></i><span class="tit_tx">'+a+'</span></div><div class="content">&nbsp;</div><div class="opt"><label class="gb_btn gb_btn1"><input type="button" class="t" value="'+_("知道了")+'" onclick="MI.dialog.hide()"></label></div></div>',end:b,close:0});setTimeout(function(){c.show({width:UI.width(c._cont)+40,close:0});(d=h(c._cont,"input")[0])&&d.focus()},0)},$:function(a){return h(this._body,a)[0]},showIframe:function(a){var b=[],c="dialog_"+MI.random();this.create();MI.Dialog[c]=this;UI.each(a.title,function(d,f){if(a.url[f]){var g="";a.boss&&a.boss[f]&&(g=a.boss[f]);b.push({tab:d,boss:g,content:'<iframe src="'+a.url[f]+'" frameborder="0" width="'+a.width[f]+'" height="'+a.height[f]+'" scrolling="no" onload="MI.Dialog[\''+c+"'].hideLoad()\"></iframe>"})}});var d=new MI.TabDialog({bodyClass:"",width:a.width[0]+40,list:b});d.dialog=this;UI.hide(d._explain);d.show();this.showLoad();if(a.closeFun)this.closeEnd=a.closeFun}};MI.Dialog.showIframe=function(a){MI.dialog&&MI.dialog.showIframe(a)};MI.PV=function(a,b){if(n.pgvMain){pvCurUrl="/"+a;if(n.pvCurDomain){if(!MI.PV.domain)MI.PV.domain=pvCurDomain;pvCurDomain=b||MI.PV.domain}pvRepeatCount=1;setTimeout(function(){typeof pgvMain==
"function"&&pgvMain()},1E3)}};MI.Code=function(){};MI.Code.prototype={type:null,typeCheck:{"-100":1,"-110":1},check:function(a){this.type=a;return this.typeCheck[""+a]},addEvented:0,addEvent:function(){function a(){var a=b._value.value;if(!a||a.length<4||a.length>5){b._value.focus();b._msg.innerHTML=_("你输入的验证码有误，请重新输入")}else if(a){MI.Code.dialog.hide();b.call&&setTimeout(function(){b.type&&b.type!="-100"&&(a=a+(","+b.type));b.call(a)},300)}return false}var b=this;if(!b.addEvented){b._body=UI.html(MI.tmpl.code)[0];b._msg=h(b._body,"h3")[0];b._code=h(b._body,"img")[0];b._form=h(b._body,"form")[0];b._codeChange=h(b._body,".codeChange")[0];b._btn=h(b._body,"button");b._value=h(b._body,"input")[0];b._btn[0].onclick=a;b._btn[1].onclick=function(){MI.Code.dialog.hide()};b._codeChange.onclick=function(){b._code.src=UI.A(b._code,"crs")+"&"+Math.random();b._value.focus();return false};b._form.onsubmit=a;b.addEvented=1}},show:function(a){if(!MI.Code.dialog)MI.Code.dialog=new MI.Dialog;var b=this,c=MI.Code.dialog,d,e;b.addEvent();this._msg.innerHTML=a.msg;this._value.value="";this.call=a.call;this._code.src=a.code+"&"+Math.random();UI.A(this._code,"crs",a.code);if(c.display){d=c._cont.firstChild;e=c.width;b.end=function(){c.show({html:d,width:e,end:function(){b.end=null},start:function(){c._body.style.zIndex=9999}})}}c.show({html:this._body,width:a.width||363,start:function(){c._body.style.zIndex=9999},end:b.end});setTimeout(function(){b._value.focus()},0)}};MI.DisableDblClickSelect=function(a){if(a){var b=function(){return(a.getAttribute("_MouseDownNoSelect_")||"").toString().split(",")};if(b().length==1){a.setAttribute("_MouseDownNoSelect_",[+new Date,"up"]);a.onmousedown=function(c){var d=+new Date,e=parseInt(b()[0]);a.setAttribute("_MouseDownNoSelect_",[d,"down"]);d-e<500&&UI.E(c).prevent()};a.onmouseup=function(){var c=b()[0];a.setAttribute("_MouseDownNoSelect_",[c,"up"])};a.onselectstart=function(a){b().pop()=="up"&&UI.E(a).prevent()}}}return a};MI.MsgBox=function(a,b){function c(){d.countTxt()}var d=new MI.TalkBox(a,{noFlash:1});d.txtTipSend=_("发送中");d._msgTo=d.$(".msgTo");d._num=h(".msgNum");d.url=MI.url.inboxSend||"http://t.qq.com/inbox/send.php";d.msgTo={};d.data=b?{source:b}:{};d.getMsgTo=function(){};d.successStart=function(a){if(a.result==0){MI.tip(_("发送成功"));UI.removeClass(d._body,"pubSuc")}};(!UI.B.ie6||!UI.hasClass(d._txt,"noAutoCmt"))&&new MI.AutoCmt({target:d._msgTo,type:2,tips:_("只能发给收听你的用户"),call:function(){d.countTxt()}});UI.EA(d._msgTo,"keyup",c);UI.EA(d._msgTo,"keydown",c);UI.EA(d._msgTo,"blur",c);return d};MI.MsgList=function(a){a=new MI.TalkList(a);a.removeTip=_("确定删除这条私信？");return a};MI.Reply=function(a){var b;this._body=UI.html(MI.tmpl.reply.replace('<div class="left"></div>','<div class="left" style="display:;"><label style="display:none"><input type="checkbox" '+(MI.user.fun.syncQzone?" checked":"")+' class="replayQzoneCheckbox check1">'+_("同步到空间")+"</label></div>").replace("talkSuc",""))[0];UI.hide(this._body);this.talkBox=new MI.TalkBox(this._body);this._talkTo=h(this._body,".replyTitle")[0];this._msg=h(this._body,".msg")[0];this.talkBox._syncQzone=h(this._body,".replayQzoneCheckbox")[0];this.talkBox.boxType=a;b=this.talkBox;b._btn.value="发送";b.txtTipSend=_("发送中");b.successStart=function(){MI.dialog.showTip({html:_("发送成功!")})};b.success=function(){UI.removeClass(b._body,"pubSuc")};if(a=="trans")this.talkBox.topic=_("#我来翻译#")};MI.Reply.prototype={talkBox:null,show:function(a){var b=this.talkBox,c=a&&a.title?a.title:_("对 <b>{0}</b> 说:",b.talkTo);MI.dialog.show({html:this._body,width:494,title:c});b._txt.value="";b.talkId="";b.type="";UI.linkEvent.add("TalkBox.reModify",function(b){if(b.target._txt==MI.curReply.talkBox._txt){MI.curReply.show(a);MI.curReply.talkBox._txt.value=b.content}});if(a){if(a.cont)b._txt.value=a.cont;a.height&&UI.C(b._txt,"height",a.height+"px");if(a.type)b.type=a.type;if(a.talkId)b.talkId=a.talkId;if(a.offsetY)h(document.body,".CR")[0].style.top=a.offsetY+"px";a.syncQzone?UI.show(b._syncQzone.parentNode):b._syncQzone.checked=0;if(a.success)b.success=function(c){if(a&&a.success){a.success(c);a=null}UI.removeClass(b._body,"pubSuc")}}(a&&a.doFocus!==false||!a)&&setTimeout(function(){MI.focus(b._txt);b.countTxt()},200);this.talkBox=b;MI.curReply=this}};MI.TransMe=MI.Reply;MI.Tab=function(a){function b(){c.hide();return false}var c=this,d;for(d in a)c[d]=a[d];UI.each(a.tabs,function(b,d){if(UI.hasClass(b,a.active))c.cur=d;b.onclick=function(a){c.show(d);UI.E(a).prevent();return false}});UI.each(a.closes,function(a){a.onclick=b})};MI.Tab.prototype={cur:null,toggle:0,display:0,show:function(a){var b=this.cur,c=this.toggle;this.hide();UI.isFunction(this.toggle)&&(c=this.toggle(this.tabs[a],this.conts[a],a));if(!(b==a&&c)){this.cur=a;UI.show(this.conts[this.cur]);UI.addClass(this.tabs[this.cur],this.active);if(this.events&&this.events[this.cur])this.events[this.cur](this.tabs[this.cur],this.conts[this.cur],this.cur)}this.display=1},hide:function(){if(this.display){this.close&&this.close();if(UI.isNumber(this.cur)){UI.hide(this.conts[this.cur]);UI.removeClass(this.tabs[this.cur],this.active)}this.cur=null;this.display=0}}};MI.TabDialog=function(a){this.list=a.list;this.selectClass=a.selectClass||"select";this.bodyClass=a.bodyClass||"";this.openIndex=a.openIndex||0;this.width=a.width||0;this.dialog=a.dialog||MI.dialog;this.build()};MI.TabDialog.prototype={build:function(){this.tab=[];this.div=[];this.explain=[];this._body=this.getBody(this.list);this.bindEvent();this.toggleTab(this.openIndex)},getBody:function(a){if(a&&a.length){var b=this,c=UI.html('<div class="DshareWrap dialogTalkBox '+b.bodyClass+'"><div class="tabStyle1 shareTitle"><ul></ul></div><div class="explain"></div></div>')[0],d=UI.GT(c,"ul")[0];b._explain=h(c,".explain")[0];UI.each(a,function(e,f){var g=UI.html('<li class="'+(f==b.openIndex?b.selectClass:"")+'"><a href="javascript:void(0)" boss="'+(e.boss||"")+'">'+e.tab+"</a></li>")[0],h=UI.html('<div style="padding:10px 0"></div>')[0],i=UI.isElement(e.content)?e.content:UI.html(e.content)[0];b.tab.push(g);b.div.push(i);b.explain.push(h);a.length>1&&UI.append(g,d);UI.append(h,b._explain);
UI.append(i,c)});return c}},changeExplain:function(a){var b=this;UI.each(a,function(a,d){b.explain[d].innerHTML=a})},bindEvent:function(){var a=this;UI.each(a.tab,function(b,c){UI.EA(b,"click",function(){a.toggleTab(c);UI.isFunction(a.list[c].tabEvent)&&a.list[c].tabEvent(b,c)})})},toggleTab:function(a){var b=this;UI.each(b.div,function(c,d){if(d==a){UI.show(c);UI.show(b.explain[d]);UI.addClass(b.tab[a],b.selectClass)}else{UI.hide(c);UI.hide(b.explain[d]);UI.removeClass(b.tab[d],b.selectClass)}});b.lastIndex=a},show:function(a){this.dialog.show({title:'<h1 class="DmainTit">'+(this.list&&this.list.length==1?this.list[0].tab:"")+"</h1>",html:this._body,start:function(){a&&a()},width:this.width})},reset:function(a,b){MI.app({TalkBoxRich:function(){a._txt.value=b||"";a.hideMedia();a.reset();a.delMedia()}})}};MI.Card=function(){if(MI.Note)this.updateName=MI.Note.updateName};MI.Card.prototype={_body:null,_target:null,title:"",account:"",chName:"",name:"",bkname:"",topic:"",target:null,avatar:"",addQQ:"",qq:"",follow:"",followed:"",gender:"",flag:"",baseUrl:"http://t.qq.com",addEvented:0,recomText:null,scene:null,sData:null,tvObj:{},tlId:null,newTab:5===MI.api.type?"":"_blank",create:function(){if(!this._body)this._body=UI.html(MI.tmpl.card)[0]},addEvent:function(){this.create();var a=this,b=a._body,c,d,e;if(!a.addEvented){a._pic=h(b,".avatar")[0];a._name=h(b,".tit")[0];a._num=h(b,".stats")[0]||UI.DC("b");a._note=h(b,".note")[0]||UI.DC("b");a._reply=h(b,".reply")[0]||UI.DC("b");a._msg=h(b,".msg")[0]||UI.DC("b");a._follow=h(b,".uc_follow")[0]||UI.DC("b");a._unfollow=h(b,".uc_unfollow")[0]||UI.DC("b");a._uneach=h(b,".uc_uneach")[0]||UI.DC("b");a._more=h(b,".more")[0]||UI.DC("b");a._moreFun=h(b,".moreFun")[0]||UI.DC("b");a._black=h(b,".black")[0]||UI.DC("b");!MI.user.fun.apolloStyle&&(a._list=h(b,".list")[0]||UI.DC("b"));a._recom=h(b,".recom")[0]||UI.DC("b");a._reFollow=h(b,".reFollow")[0]||UI.DC("b");a._report=h(b,".report")[0]||UI.DC("b");a._hotLine=h(b,".hotLine")[0]||UI.DC("b");a._blackTip=h(b,".status_black")[0]||UI.DC("b");a._sFollow=h(b,".ico_sFo")[0]||UI.DC("b");a._tag=h(b,".tagBox")[0]||UI.DC("b");a._sepline=h(b,".sepline")[0]||UI.DC("b");a._uIntro=h(b,".info")[0]||UI.DC("b");a._company=h(b,".company")[0]||UI.DC("b");a._school=h(b,".school")[0]||UI.DC("b");a._uRela=h(b,".uc_c3 .info")[0]||UI.DC("b");a._addQQ=h(b,".addqq")[0]||UI.DC("b");a._rf=h(b,".rf")[0]||UI.DC("b");MI.user.fun.apolloStyle&&(a._addQuan=h(b,".addQuan")[0]||UI.DC("b"));b=null;a.creatBox=function(){a.reply=new MI.Reply;a.reFollow=new MI.Reply("reFollow");d=a.reFollow.talkBox;c=a.reply.talkBox;e=c.txtMax;a.creatBox=function(){}};a._pic.onclick=function(){MI.Bos("btnCardHead")};a._pic.onmousedown=function(){a.adBos("cuserpic",this)};a._body.onclick=function(b){if(UI.hasClass(this,"small"))document.location.href=a.baseUrl+"/"+a.account;UI.E(b).stop()};a._body.onmouseout=function(){MI.Card.hideCard=setTimeout(function(){a.hide()},300)};a._body.onmouseover=function(){clearTimeout(MI.Card.hideCard);UI.show(a._body)};a._follow.onclick=function(){var b=a._sFollow,c=this;MI.follow(a.account,c,function(d){UI.hide(a._follow.parentNode);a.follow&&a.followed?UI.show(a._uneach.parentNode):UI.show(a._unfollow.parentNode);UI.show(a._sFollow.parentNode);MI.user.fun.note&&UI.show(a._note);var e=MI.Card.users[a.account];e.follow=1;UI.removeClass(b,"foLight");b.title=MI.sFollowTip[0];e.num[1]++;a.num(e);if(e=UI.next(a._target.parentNode.parentNode)){var i=h(e,".nickFun")[0];h(e,".nickFun a");i&&UI.show(i)}a.followCall&&a.followCall(d,c);setTimeout(function(){a._follow.value=_("收听")},0);MI.Bos("btnCardFollow");a._isOlympics&&MI.Bos({id:1481,name:"btnOlyFollow"});MI.feedBack({name:"usercard",iPos:a.scene?a.scene:52,iBak1:3,sBak1:a.sData,id:1191});if(a.tlId&&a.tvObj.tv){MI.Bos("btnCardListen",a.tlId+"_"+a.tvObj.stv+"_"+a.tvObj.tv);UI.linkEvent("MI.Card.listen",{tid:a.tlId,account:a.account,isListen:1,el:a.target,stv:a.tvObj.stv,tv:a.tvObj.tv})}a.tlId&&UI.linkEvent("MI.Card.tllisten",{id:a.tlId})});return false};a._uneach.onclick=a._unfollow.onclick=function(b){var c=this;UI.E(b).target.nodeName=="A"&&MI.follow(a.account,c,function(b){UI.hide(c.parentNode);UI.hide(a._sFollow.parentNode);UI.hide(a._note);UI.show(a._follow.parentNode);var d=MI.Card.users[a.account];d.follow=0;if(d.group)d.group.im=0;d.num[1]--;d.bkname="";a.num(d);a.setName(d);a._unfollow.className="t uc_unfollow delAttention";a.updateName(a.name,a.title);var e=UI.next(a._target.parentNode.parentNode);if(e){d=h(e,".nickFun")[0];e=h(e,".nickFun a")[0];if(d){UI.hide(d);UI.removeClass(d,"nickFunDis");UI.A(e,"note","");e.innerHTML=_("添加备注")}}a.followCall&&a.followCall(b,c);setTimeout(function(){a._follow.value=_("收听")},0);MI.Bos("btnCardUnFollow");MI.feedBack({name:"usercard",iPos:a.scene?a.scene:52,iBak1:8,sBak1:a.sData,id:1191});if(a.tlId&&a.tvObj.tv){MI.Bos("btnCardListen",a.tlId+"_"+a.tvObj.stv+"_"+a.tvObj.tv);UI.linkEvent("MI.Card.listen",{tid:a.tlId,account:a.account,isListen:0,el:a.target,stv:a.tvObj.stv,tv:a.tvObj.tv})}a.tlId&&UI.linkEvent("MI.Card.tlunlisten",{id:a.tlId})});return false};a._note.onclick=function(){MI.Note.add(this,function(b){var c=MI.Card.users[a.account];if(c)c.bkname=b.bkname;a.updateName(b.bkname||a.name,a.title);var c=UI.next(a._target.parentNode.parentNode),d=h(c,".nickFun")[0],e=h(c,".nickFun a")[0];if(d){b.bkname?UI.addClass(c,"nickFunDis"):UI.removeClass(c,"nickFunDis");e.innerHTML=b.bkname||_("添加备注");UI.A(e,"note",b.bkname)}});MI.Bos("btnNoteCardAdd");return false};a._reply.onclick=function(){a.creatBox();var b,d="";if(a.chName&&a.chName.match(/^[^\d]/g)){c.topic="@"+(a.account?a.account:a.chName)+" ";b=7}else{d=a.chName;c.topic="";b=2}c.talkTo=a.bkname||a.name;c.txtMax=e-c.topic.length;a.reply.show({type:b,talkId:d});MI.Bos("btnCardReply");return false};a._reFollow.onclick=function(){if(UI.hasClass(this,"disabled"))return false;var b=_("我收听你了，你也快来收听我吧！");a.creatBox();d.topic="@"+a.account+" ";d.talkTo=a.bkName||a.name;d.txtMax=e-d.topic.length-b.length;a.reFollow.show({type:7,cont:b,title:_("邀请")+" <b>"+(a.bkname||a.name)+"</b> "+_("收听你:")+'<span class="gray">'+_(" (会作为一条半公开的对话发出来)")+"</span>"});a._moreFun.style.display!="none"&&MI.Bos("btnCardReFollow");return false};a._msg.onclick=function(){if(!UI.hasClass(this,"gb_disabled")){MI.pmcompose(a.chName,1);MI.Bos({name:"btn_sendMsg_card",id:1193})}return false};a._black.onclick=function(){var b=MI.json(UI.A(this,"rel"));b.txt=[_("拉黑"),_("取消拉黑")];b.target=this;b.call=function(){var c=MI.Card.users[b.u],d=!UI.hasClass(a._body,"isBlack");if(c.follow&&d){c.follow=0;if(c.group)c.group.im=0;c.num[1]--}c.block=d;a.blackCall&&a.blackCall(d)};MI.black(b);return false};a._sFollow.onclick=function(){var b=UI.hasClass(this,"foLight")?0:1;MI.sFollow(a.account,this,function(c){var d=MI.Card.users[a.account];if(d.group)d.group.im=b;a.sFollowCall&&a.sFollowCall(c)});b?MI.Bos("btnCardSFollow"):MI.Bos("btnCardUnSFollow");return false};a._addQQ.onclick=function(){if(UI.hasClass(a._addQQ,"disabled")!=true){MI.Bos("btnCardQQ");MI.addQQ(a.name,a.qq,a.account,MI.user.name,MI.user.account,a.gender,MI.Uin(),a.addQQ)}return false};a._list&&(a._list.onclick=function(){MI.app({List:function(){MI.List.listFollow(a.account,{title:_("名单分组"),bkname:" ",foset:" "})}});MI.Bos("btnCardList");return false});a._addQuan&&(a._addQuan.onclick=function(){MI.app({"quan/quanDialog":function(){MI.quanCard.build({type:2,account:a.account,el:a.target,nick:a.name,ipos:107})}});return false});a._report.onclick=function(){MI.report(a.account);MI.Bos("btnCardReportUser");return false};a._recom.onclick=function(){var b=[_("向大家介绍一下<b>{0}</b>吧:",a.bkname||a.name),_("可以单独向某个朋友推荐<b>{0}</b>",a.bkname||a.name)],c=_("#推荐收听# @{0} ",a.account);if(!a.recom){var d='<div class="recomTip">'+_("提示：TA是什么样的人，TA的微博好玩么，哪些是最值得你推荐的？")+'</div><div class="bot clear">';a.recom=new MI.TabDialog({width:530,list:[{tab:_("公开推荐"),content:'<div class="d_hp d_hm d_hv">'+MI.tmpl.fullMediaTalk.replace('<div class="bot clear">',d)+"</div>"},{tab:_("私信推荐"),content:MI.tmpl.msgBox.replace('<div class="bot clear">',d)}]})}if(!a.recomPublishBox){a.recomPublishBox=new MI.TalkBox(a.recom.div[0],{noFlash:1});a.recomPublishBox.success=function(){MI.ajax({url:MI.url.comm,data:{accounts:a.account}});MI.tip(_("发送成功"))}}a.recomPublishBox.data={commAccount:a.account};if(!a.recomMsgBox)a.recomMsgBox=new MI.MsgBox(a.recom.div[1]);a.recom.reset(a.recomPublishBox);a.recomPublishBox.topic=c;a.recomPublishBox.txtMax=140-MI.countTxt(c);a.recomPublishBox.countTxt();a.recom.reset(a.recomMsgBox);a.recomMsgBox.topic=c;a.recomMsgBox.txtMax=140-MI.countTxt(c);a.recomMsgBox._msgTo.value="";a.recomMsgBox.countTxt();a.recom.changeExplain(b);a.recom.show(function(){[a.recomPublishBox,a.recomMsgBox][a.recom.lastIndex].focus()});MI.Bos("btnCardRecom");return false};a._hotLine.onclick=function(){var b="#"+(a.topic||"报料平台")+"# ",c=[_(b)+"@"+(a.bkname||a.name),_(b)+"@"+(a.bkname||a.name)];if(!a.hotLine)a.hotLine=new MI.TabDialog({width:530,list:[{tab:_("发广播"),content:MI.tmpl.fullMediaTalk},{tab:_("发私信"),content:MI.tmpl.msgBox}]});if(!a.hlPublishBox){a.hlPublishBox=new MI.TalkBox(a.hotLine.div[0],{noFlash:1});a.hlPublishBox.data={};a.hlPublishBox.success=function(){MI.tip(_("发送成功"))}}if(!a.hlMsgBox)a.hlMsgBox=new MI.MsgBox(a.hotLine.div[1],1712);a.hotLine.reset(a.hlPublishBox);a.hlPublishBox.topic=b+"@"+a.account+" ";a.hlPublishBox.txtMax=140-MI.countTxt(a.hlPublishBox.topic);a.hlPublishBox.countTxt();a.hotLine.reset(a.hlMsgBox);a.hlMsgBox.topic=b;a.hlMsgBox._msgTo.value=a.account;a.hlMsgBox.txtMax=140-MI.countTxt(a.hlMsgBox.topic);a.hlMsgBox.countTxt();a.hotLine.changeExplain(c);a.hotLine.show(function(){[a.hlPublishBox,a.hlMsgBox][a.hotLine.lastIndex].focus()});MI.Bos("btnCardHotLine");return false};a._more.onmouseover=function(){clearTimeout(a._more.delay);UI.addClass(a._more,"open")};a._more.onmouseout=function(){a._more.delay=setTimeout(function(){UI.removeClass(a._more,"open")},300)};a._more.onclick=function(){return false};a._moreFun.onmouseover=function(){clearTimeout(a._more.delay);UI.show(a._moreFun);UI.addClass(a._more,"hover")};a._moreFun.onmouseout=function(){UI.hide(a._moreFun);UI.removeClass(a._more,"hover")};a._company.onmousedown=function(){MI.Bos("btnCardCompany")};a.addEvented=1}},getPos:function(a){var b=UI.getX(a)+(parseFloat(UI.C(a,"paddingLeft"))||0),c=UI.getY(a)+(parseFloat(UI.C(a,"paddingTop"))||0),d="uc_hand_down";if(this.cType=="3"||this.cType=="4")d="uc_hand_right";else{UI.windowHeight();var e=UI.scrollY(document.documentElement||document.body),f=UI.height(this._body),f=f?f:186,g=f<186?186:f,h=UI.height(a);if(c-e-g-10<0||this.cType=="5"){c=c+h+10;d="uc_hand_up"}else c=c-10-f;e=UI.width(a)<50?24:8;b=b-e}if((this.cType=="3"||this.cType=="4")&&b<260){UI.removeClass(this._body,"cardR");UI.addClass(this._body,"cardL");b=b+260+UI.width(a)+10}if(a=UI.A(a,"cpos")){a=a.split(",");b=a[0];c=a[1]}this._body.className=this._body.className.replace(/uc_hand_[\w]+/g,d);return{x:b,y:c}},setPos:function(a){if(a){a=this.getPos(a);this._body.style.left=a.x+"px";this._body.style.top=a.y+"px"}},getRela:function(a){function b(a){if(a.result==0&&a.info){c.uRela=a.info;c._uRela.innerHTML=c.uRela;c._uRela.parentNode.style.display="block"}else c._uRela.parentNode.style.display="none";c.setPos(c.target)}var c=this;MI.Card.uRela&&MI.Card.uRela[a]?b(MI.Card.uRela[a]):MI.ajax({url:MI.url.uRela,type:"get",data:{u:a},success:function(c){c=MI.json(c);MI.Card.uRela[a]=c;b(c)}})},getCommenFriend:function(a,b){if(a!=MI.user.account){var c=this;if(MI.Card.commenFriends&&MI.Card.commenFriends[a]&&MI.Card.commenFriends[a][b])c.showCommenFriend(MI.Card.commenFriends[a][b],b);else{var d=b?MI.url.relationsIdol:MI.url.recommend,e={};if(c.flag.auth)e.srv="same_star";else{e.srv="common_old";e.scene=6}e.medium=a;e.count=10;MI.ajax({url:d,type:"get",data:b?{count:10,id:a+","+MI.user.account}:e,success:function(d){d=MI.json(d);if(d.result==0){c.showCommenFriend(d.info,b);MI.Card.commenFriends[a]={};MI.Card.commenFriends[a][b]=d.info}else UI.hide(c._rf)}})}}},showCommenFriend:function(a,b){if(a.list&&a.list.length){var c=[],d=0;UI.each(a.list,function(a){if(d<4){var e=[],e=['<a href="'+MI.getInternalUrl(0,a.name)+'"\tboss="'+(b==1?"check_friend1_card":"check_friend0_card")+'" >','<img onerror="MI.Pic(this,30)" title="'+a.nick+'" src="'+(a.avatar?a.avatar+"/30":MI.picSrc.h50)+'" />',"</a>"];c.push(e.join(""));d++}});var e=b==1?0:1,f=h(this._rf,"dl"),g=_("这些人也收听了{0}:",this.gender);b==1&&(g=a.wording&&a.wording==2?_("我们共同收听了:"):g);h(this._rf,".commenNum")[b].innerHTML=b==1?g:_("收听{0}的人还收听:",this.gender);h(this._rf,".commenFriend")[b].innerHTML=c.join("");UI.show(f[b]);UI.C(f[b],"opacity","1");UI.hide(f[e]);UI.show(this._rf)}else UI.hide(this._rf)},show:function(a){function b(b){var d=c.account.toLocaleLowerCase()!=MI.user.account.toLocaleLowerCase(),e;e=b.follow&&b.followed?c._uneach:b.follow?c._unfollow:c._follow;var f=c._sFollow,g=c._note,i=b.gender?_("他"):_("她");b.gender==2&&(i=_("它"));if(b.chName&&b.chName!="")c.chName=b.chName;c.uRela=b.sameFriends;c.bkname=b.bkname;c.name=b.nick;c.avatar=b.avatar;c.title=(c.bkname||c.name)+"(@"+(c.chName||c.account)+")";c.flag={};c.flag=b.flag;if(b.flag.auth)c.flag.auth=b.flag.auth;c.addQQ=b.addQQ;c.qq=b.qq;c.follow=b.follow;c.followed=b.followed;c.gender=i;UI.show(c._addQQ);!c.follow||!c.followed?UI.addClass(c._addQQ,"disabled"):UI.removeClass(c._addQQ,"disabled");i=(i=b.avatar)?i+"/100":MI.picSrc.h100;c._pic.innerHTML='<img src="'+i+'" />';i="{u:'"+c.account+"',name:'"+(c.bkname||c.name)+"',sex:'"+c.gender+"'}";if(b.block){c._black.innerHTML=_("取消拉黑");UI.addClass(c._body,"isBlack");UI.show(c._blackTip);c._blackTip.innerHTML='<i class="ico_black"></i>'+_("{0}在你的黑名单里",c.gender)+'<a href="#" class="blackDel" rel="'+i+'">['+_("取消拉黑")+"]</a>";h(c._blackTip,"a")[0].onclick=c._black.onclick}else{c._black.innerHTML=_("拉黑");UI.removeClass(c._black,"blackDel");UI.removeClass(c._body,"isBlack");UI.hide(c._blackTip)}UI.A(c._black,"rel",i);c.num(b);c.setName(b);d?e.parentNode.style.display="block":UI.addClass(c._body,"isMe");b.mail?UI.show(c._msg):UI.hide(c._msg);b.follow&&d&&!b.followed?UI.removeClass(c._reFollow,"disabled"):UI.addClass(c._reFollow,"disabled");if(d&&b.follow){if(b.group){if(b.group.im){UI.addClass(f,"foLight");f.title=MI.sFollowTip[1]}else{UI.removeClass(f,"foLight");f.title=MI.sFollowTip[0]}UI.show(f.parentNode)}else UI.hide(f.parentNode);UI.show(g)}else{UI.hide(f.parentNode);UI.hide(g)}UI.A(g,"account",c.account);UI.A(g,"chName",c.chName);UI.A(g,"note",b.bkname||"");UI.A(g,"nick",b.nick);MI.user.fun.note||UI.hide(c._note);b.hotLine?UI.show(c._hotLine):UI.hide(c._hotLine);if(c.cType!="3"&&c.cType!="4")b.company=b.school="";b.tag||b.uIntro||b.company||b.school?UI.show(c._sepline):UI.hide(c._sepline);if(b.tag){c._tag.innerHTML=_("标签：")+b.tag+"";if(c.cType=="3"||c.cType=="4"||b.uIntro||b.company||b.school){var k=h(c._tag,"span"),l=0,j=0,q=true;for(UI.each(k,function(a,b){if(q){l=l+(MI.string.length(UI.text(a))*6+8);if(l>185){j=k.length-b;q=false}}});j;){c._tag.removeChild(c._tag.lastChild);j--}if(!q)c._tag.innerHTML=c._tag.innerHTML+('<span class="etc"><a title="'+_("更多")+'" href="'+c.baseUrl+"/"+c.account+'">...</a></span>')}UI.show(c._tag)}else UI.hide(c._tag);if(b.uIntro){d=b.uIntro;c._uIntro.innerHTML=b.uIntro;e=UI.text(c._uIntro);e=MI.string.html(e);if(MI.string.length(e)>64){c._uIntro.title=e;d=MI.string.cut(e,64,"...")}else c._uIntro.removeAttribute("title");c._uIntro.innerHTML=d}else c._uIntro.innerHTML="";if(b.company){d=MI.string.cut(b.company.comName,30,"...");c._company.innerHTML=_("公司：")+'<a href="'+b.company.href+'" title="'+b.company.comName+'">'+d+"</a>";UI.show(c._company)}else UI.hide(c._company);if(b.school){var d=e=b.school.name||"",i=b.school.href||"",f=g=b.school.objectName||"",m=b.school.objectHref||"";if(MI.string.length(d+f)>30){d=MI.string.cut(d,14,"...");f=MI.string.cut(f,12,"...")}if(m){c._school.innerHTML=_("学校：")+'<a href="'+i+'" title="'+e+'">'+d+'</a> <a href="'+m+'" title="'+g+'">'+f+"</a>";UI.EA(h(c._school,"a")[1],"mousedown",function(){MI.Bos("btnCardSchoolObject")})}else c._school.innerHTML=_("学校：")+'<a href="'+i+'" title="'+e+'">'+d+'</a> <span title="'+g+'">'+f+"</span>";UI.EA(h(c._school,"a")[0],"mousedown",function(){MI.Bos("btnCardSchool")});UI.show(c._school)}else UI.hide(c._school);d=0;d=b.follow?0:1;c._uRela.parentNode.style.display=c.account!=MI.user.account?"block":"none";c._uRela.innerHTML="";c.getRela(c.account,d);UI.removeClass(c._body,"loading");UI.removeClass(c._body,"small");c.setPos(a);MI.Bos("btnCardOpen",null,0.01)}var c=this;c._isOlympics=UI.A(a,"cpos")?true:false;c.scene=UI.A(a,"card_iPos")?UI.A(a,"card_iPos"):52;c.sData=UI.A(a,"card_sData")?UI.A(a,"card_sData"):null;var d=UI.closest(a,"li")||UI.closest(a,".cardLi");c.tlId=d?UI.A(d,"id"):null;if(c.tlId)c.tlId=c.tlId.split("_")[0];c.tvObj.stv=d&&UI.A(d,"stv")||"";c.tvObj.tv=d&&UI.A(d,"tv")||0;c.addEvent();if(c.target==a)UI.show(c._body);else{if(a.nodeName.toLowerCase()=="a")var d=a,e=d.href||"",f="";else{d=a.parentNode;e=d.href||"";f=a.src;if(e.indexOf("/setting_work.php")!=-1)return;if(f)c._pic.innerHTML='<img src="'+f+'">'}var f=UI.A(d,"ctype"),g=UI.A(d,"rel")||"@..",i=/@[^@]+$/g,j=MI.string.id(e.split("?")[0]);UI.A(d,"account")&&(j=UI.A(d,"account"));var e=g.match(i)[0].slice(1,-1),g=g.replace(i,"").slice(0,-1),i=MI.getInternalUrl(0,j),d=UI.A(d,"uRela")||"",l,v,n,q;c.account=j;c.name=g;c.chName=e;c._pic.href=i;UI.A(c._pic,"target",c.newTab);c.uRela=d;UI.hide(c._follow.parentNode);UI.hide(c._unfollow.parentNode);UI.hide(c._uneach.parentNode);c.setPos(a);UI.append(c._body,document.body);UI.removeClass(c._body,"isMe");UI.show(c._body);UI.getX(a)-20+UI.width(c._body)>UI.windowWidth()&&(f="4");c._body.className="uc cType"+f+" uc_hand_"+[0,1,"down","down","down","up"][f*1];c.cType=f;UI.addClass(c._body,"loading");c._target=c.target=a;UI.hide(c._rf);if(MI.Card.users[j])b(MI.Card.users[j]);else{l=+new Date;MI.ajax({url:MI.url.userCard,type:"get",data:"u="+j+"&t="+c.cType,success:function(a){v=+new Date-l;a=MI.json(a);if(a.result==0){b(a.info);MI.Card.users[j]=a.info}else c.hide();n=+new Date-l;setTimeout(function(){q=+new Date-l;MI.Speed("t_asyn_card",0.1,v,n,q)},0)}});c.setPos(c.target)}}},setName:function(a){for(var b=this,c="",d=0,e=MIIco.length;d<e;d++)if(a.flag[MIIco[d]]){c=c+MIIcoHtml[d];break}a.icon&&(c=c+a.icon);d=a.bkname||a.nick;if(a.flag.member||a.flag.wbMember||a.flag.wbAnnualMember)d='<span class="c_vip" title="开通微博会员或QQ会员点亮微博红名">'+d+"</span>";b._name.innerHTML='<a href="'+MI.getInternalUrl(0,b.account)+'" class="tx_user" target="'+b.newTab+'">'+d+"</a>"+c+' <span class="tx_id">(@'+(b.chName||b.account)+")</span>";b._name.onmousedown=function(){b.adBos("cname",this)}},updateName:function(){},num:function(a){var b=a.num,c=[];b[0]!=-1&&c.push(_("广播{0}条",b[0]));a.flag.vivi||b[1]==-1||c.push(_("听众{0}人",b[1]));this._num.innerHTML=c.join('<span class="tx_line">|</span>')},hide:function(){if(!UI.hasClass(this._body,"small")){UI.hide(this._body);this.target=null}},adBos:function(a){if(this.tlId&&this.tvObj.tv){UI.linkEvent("MI.Card.click",{tid:this.tlId,account:this.account,type:a});MI.Bos("addADClickBos_"+a)}}};MI.Card.show=function(a){var b=UI.isElement(a)?a:UI.E(a).target;clearTimeout(MI.Card.delay);clearTimeout(MI.Card.hideCard);MI.Card.delay=setTimeout(function(){MI.card.show(b.nodeName=="SPAN"?b.parentNode:b)},400)};MI.Card.users={};MI.Card.commenFriends={};MI.Card.uRela={};MI.Card.hide=function(){clearTimeout(MI.Card.delay);clearTimeout(MI.Card.hideCard);MI.Card.hideCard=setTimeout(function(){MI.card.hide()},500)};MI.Card.build=function(a,b,c,d){if(MI.user.fun.card&&MI.user.account){c=c||1;a=a||document.body;UI.proxyEvent(a,"mouseover",function(){return function(){var a=this.nodeName.toLowerCase()=="a"?this:this.parentNode,b;if(!UI.A(a,"card")){UI.A(a,"card","1");UI.A(a,"ctype",c);UI.A(a,"rel",a.title);UI.A(a,"titleName",a.title);d!=void 0&&UI.A(this,"card_iPos",d);if(MI.hostType===3&&a.href&&a.href.match(MI.Card.build.REG_QZAPP_HREF))a.href=MI.getInternalUrl(0,RegExp.$2)}if((b=UI.A(a,"titleName"))&&MI.string.account(b)&&/\)$/.test(b)){a.title=this.title="";MI.Card.show(this)}}},[b]);UI.proxyEvent(a,"mouseout",function(){return function(){MI.Card.hide()}},[b]);UI.proxyEvent(a,"click",function(){return function(){MI.Bos("btnHead")}},[b])}};MI.Card.build.REG_QZAPP_HREF=/^(http:\/\/z.t.qq.com)?\/([A-Za-z][A-Za-z0-9_\-]*)$/;MI.DropBox=function(a){this.target=a.target;this.dir=a.dir;this.start=a.start||1;this.add=a.add;this.url=a.url;this.data=a.data||{};this.data._=+new Date;this.type=a.type||0;this.html=a.html;this.htmlStr=a.htmlStr||this.htmlStr;this.className=a.className;this.classFix=a.classFix||null;this.event=a.event||null;this.dataFilter=a.dataFilter||function(a){return a};this.domHandler=a.domHandler||function(){};this.delayTime=0;this.defaultHTML=a.defaultHTML||"";this.mouseStayTime=a.mouseStayTime||0;this.build()};MI.DropBox.prototype={htmlStr:'<div style="display:none;position:absolut;"><div class="itemBox clear"><br /><br /><br /><br /></div><div class="func"><div class="clear"></div></div></div>',activeClass:"active",dirList:["left","right","top","bottom"],setPos:function(){var a="left";if(!this.dir)return false;UI.C(this.body,this.dirList[this.dir],"100%");a=this.dir<2?[this.dirList[3],this.dirList[1]][this.start]:[this.dirList[1],this.dirList[0]][this.start];UI.C(this.body,a,0)},build:function(){var a=this;a.body=UI.html(a.htmlStr)[0];if(UI.B.ipad){a.target.ontouchstart=function(){a.body.style.display=="none"?a.show():a.hide()};a.target.onclick=function(){return false}}else{a.target.onmouseover=function(){if(a.mouseStayTime){clearTimeout(a.stayShow);a.stayShow=setTimeout(function(){a.show()},a.mouseStayTime)}else a.show()};a.body.onmouseover=function(){a.show()};a.target.onmouseout=a.body.onmouseout=function(){a.mouseStayTime&&clearTimeout(a.stayShow);a.hide()}}},show:function(){var a=this;clearTimeout(a.delayHide);if(!a.listBox){a.listBox=h(a.body,".itemBox")[0]||a.body;if(a.classFix)a.listBox=h(a.body,"."+a.classFix)[0];a.funcBox=h(a.body,".func .clear")[0];a.funcBox&&(a.funcBox.innerHTML=a.add);a.className&&UI.addClass(a.body,a.className);if(a.type==1){var b=UI.parents(a.target,"w_head_outer")[0];UI.append(a.body,b)}else UI.append(a.body,a.target.parentNode);a.setPos()}UI.addClass(a.target,a.activeClass);UI.show(a.body);clearTimeout(a.delayShow);if(!a.listData&&!a.refreshing)a.delayShow=setTimeout(function(){a.refreshing=
true;a.refresh(a.html)},a.delayTime)},hide:function(){var a=this;clearTimeout(a.delayHide);a.delayHide=setTimeout(function(){UI.hide(a.body);UI.removeClass(a.target,a.activeClass)},300)},refresh:function(a){var b=this;if(a||b.listData){b.listBox.innerHTML=b.listData=a||b.listData;b.domHandler(b.body)}else if(b.url){UI.addClass(b.listBox,"loading");b.classFix&&b.event.addLoading(b.listBox);MI.ajax({url:b.url,type:"get",data:b.data,success:function(a){UI.removeClass(b.listBox,"loading");b.classFix&&b.event.removeLoading(b.listBox);a=MI.json(a);if(a.result==0){if(a.info){a=b.dataFilter(a.info);b.refresh(a);b.listData=a;b.delayTime=0}}else{if(b.className=="head_qk_wrap"){b.listBox.innerHTML=b.defaultHTML;if(b.classFix=="w_qk_app"&&a.result==-1)b.listBox.innerHTML='<div class="w_qk_bd clear"><h3 class="w_qk_qun_t2">你还没有登录，现在就去<a target="_blank" href="http://t.qq.com/">登录</a>吧。</h3></div>';a=UI.parents(b.target,"headWrap")[0];UI.after(b.body,a)}else{a.msg=a.msg?'<p style="text-align:center;padding:20px 0;">'+a.msg+"</p>":b.defaultHTML;b.listBox.innerHTML=a.msg}b.delayTime=b.delayTime+500;b.refreshing=false}}})}}};MI.subTabToggle=function(){var a=h(document.body,".homeFilter .subTab1")[0];if(a){var b=h(document.body,".homeFilter .more_link")[0],c=h(a,".homeFilter .subTab1 a"),d=b&&UI.A(b,"expand"),e=UI.height(a),f=a.scrollHeight,f=!UI.B.ie?f-7:UI.B.ie9?f-8:UI.B.ie8?f-7:f;UI.each(c,function(b){b.onclick=function(){d&&UI.cookie(d,UI.height(a),7,"t.qq.com")}});if(b){var g=function(){b.innerHTML=_("收起↑");UI.addClass(b,"up")},i=function(){b.innerHTML=_("展开↓");UI.addClass(b,"up")};if(f<=53){UI.hide(b);UI.C(a,"height","auto")}else e>=f?g():e<f&&i();b.onclick=function(){if(f>e+53)e=e+53;else if(f>e&&f<=e+53){e=f;g()}else{e=53;i()}clearInterval(MI.subTabToggle.animate);MI.subTabToggle.animate=UI.animate(a,"height",e,function(){d&&UI.cookie(d,UI.height(a),7,"t.qq.com")});return false}}}};MI.Shortcuts={add:function(a){var b=this;if(a)if(UI.isArray(a))UI.each(a,function(a){b.add(a)});else{b.builded[a.event]||b.build(a.event);b.key[a.event]||(b.key[a.event]=[]);b.key[a.event].push(a)}},del:function(a){var b=this;if(a)if(UI.isArray(a))UI.each(a,function(a){b.del(a)});else if(b.builded[a.event]){var c=0,d;for(d in b.key[a.event])b.key[a.event][d]===a&&(c=d);b.key[a.event].splice(c,1);b.key[a.event].length==0&&UI.ER(document.documentElement,a.event,b.builded[a.event])}},key:{},keyDo:function(a,b){var c=UI.E(a);UI.each(this.key[b],function(a){var b=c.target.nodeName;b!="INPUT"&&(b!="TEXTAREA"&&b!="EMBED"&&c.key==a.key)&&a.call(c)})},builded:{},build:function(a){var b=this;b.builded[a]=function(c){b.keyDo(c,a)};UI.EA(document.documentElement,a,b.builded[a])},talkList:[{event:"keyup",key:80,call:function(){var a=j("plain");if(a){a.checked=a.checked?false:true;a.onclick&&a.onclick()}else MI.talkList&&MI.talkList.iconPicToggle()}},{event:"keyup",key:70,call:function(){if(MI.talkList){var a=MI.talkList.cur;if(a)if(a=h(j(a),".fav")[0])a.onclick()}}},{event:"keyup",key:82,call:function(){MI.talkList&&MI.talkList._new&&UI.fireEvent(MI.talkList._new,"click")}},{event:"keyup",key:84,call:function(){n.scrollTo(0,0)}},{event:"keyup",key:66,call:function(){n.scrollTo(0,UI.pageHeight())}},{event:"keyup",key:83,call:function(){var a=j("searchKey");if(a)try{a.focus()}catch(b){}}},{event:"keyup",key:78,call:function(){MI.talkBox&&MI.talkBox.focus()}}]};MI.GoTop={delay:{},resize:0,btnNum:1,chat:0,btnClass:["sToolbar single","sToolbar double","sToolbar","sToolbar single ToolbarHide"],btnSet:function(){this._body.className=this.btnClass[this.btnNum-1]},y:"",position:function(){MI.user.fun.goTop&&this.build()},build:function(a){function b(a){w=+new Date;var e;if(w-A<(UI.B.ie?1E3:100)){clearTimeout(C);a&&(e=UI.E(a));C=setTimeout(function(){b(e)},1E3)}else{A=w;a&&(e=UI.E(a));r=e&&e.type=="resize"||d.resize;if(UI.B.ie6){if(MI.dialog&&MI.dialog.display)return;UI.hide(d._body);UI.hide(d._qqBox)}c()}}function c(){var a=MI.music.state;o=UI.pageHeight();if(r){v=UI.windowHeight();i=UI.getX(g)+UI.width(g)-e;x=UI.windowWidth()-UI.getX(g)-UI.width(g)-30-31+f;var b=UI.windowWidth(),c={},h=[],j="",n=document.body.className,j=n.split(" ");UI.each([1270,1220,1067,1015,903],function(a){c["w-"+a]=b<a?1:0});UI.each(j,function(a){a&&c[a]!==0&&(c[a]=1)});UI.each(c,function(a,b){a&&h.push(b)});j=h.join(" ");if(j!=n)document.body.className=j;d.resize=0}q=UI.scrollY();if(parseInt(UI.C(d._body,"left"))!=i)d._body.style.cssText="left:"+i+"px;";if(parseInt(UI.C(d._qqBox,"right"))!=x)d._qqBox.style.cssText="right:"+x+"px;";if(q<52){UI.hide(d._tBox);d.btnNum=a!=null?2:1;if(!d.chat&&a==null)MI.user.fun.hasVipHelp?d.btnNum=6:UI.hide(d._body)}else{d.btnNum--;UI.show(d._tBox);UI.show(d._body);a!=null&&UI.show(d._mBox);d.btnNum=a!=null?3:2}d.btnSet();u=q+v-o;if(u>=-l){d._body.style.cssText=d._body.style.cssText+(";position:absolute;top:"+(o-37-l)+"px");d._qqBox.style.cssText=d._qqBox.style.cssText+(";position:absolute;top:"+(o-l)+"px")}else if(UI.C(d._body,"position")=="absolute"){d._body.style.cssText="left:"+i+"px;";d._qqBox.style.cssText="right:"+x+"px;"}}if(MI.user.account){var d=this,a=a||j("mainWrapper"+MI.layoutFix);if(!d._target)d._target=a;if(d._target){var e=5,f=6,g=d._target,i,x,l,v=UI.windowHeight(),o=UI.pageHeight(),q,r,u,a=MI.music.state;d.chat=0;UI.B.ie&&(e=e+2);UI.B.ie6?f=f-5:UI.B.ie&&(f=f-4);n.innerWidth||(f=f+21);if(UI.B.mac){var f=f+2,p=navigator.userAgent.match(/Mac OS X [^)]+/g);p&&p[0].split("_")[1]>6&&(f=f+13)}UI.pageHeight()<=UI.windowHeight()&&(f=f+15);if(g){UI.after(d._mBox,h(d._body,".bg")[0]);d.btnClass.unshift(d.btnClass[0]);UI.after(d._tBox,h(d._body,".mSimpleBox")[0]);if(MI.user.fun.hasVipHelp&&(MI.boss==11||MI.api.type&&MI.api.type==4&&MI.boss==1)&&MI.user.fun.hasVipHelp.name&&MI.user.fun.hasVipHelp.nick){UI.after(d._vhelp,h(d._body,".bg")[0]);UI.after(d._hasVip,h(d._vhelp,".flagflag")[0]);UI.after(d._openVip,h(d._vhelp,".mHelpBox")[0]);if(p=h(d._openVip,".goHelper")[0]){UI.A(p,"href","http://t.qq.com/"+MI.user.fun.hasVipHelp.name);p.innerHTML=MI.user.fun.hasVipHelp.nick}if(MI.user.fun.openVipHelp&&d._openVip.style.display=="none"){MI.Bos("btn_dftopenVipHelp");UI.show(d._openVip)}}UI.hasClass(document.body,"ipad")||UI.append(d._body,document.body);d.musicBoxEvent();a!=null&&UI.show(d._mBox);if(!UI.isNumber(d.y))d.y=UI.getY(g);l=o-(d.y+UI.height(g));b();d._body.onfocus=function(){this.blur()};if(d._position){UI.ER(n,"scroll",d._position);UI.ER(n,"resize",d._position)}d._position=b;UI.EA(n,"scroll",d._position);UI.EA(n,"resize",d._position)}if(MI.user.fun.hasVipHelp){var y=h(d._body,".mHelpPop")[0],z=function(){UI.hide(y);if(MI.user.fun.openVipHelp){MI.ajax({url:MI.url.userAttr,data:{t:310,v:0},type:"post",success:function(){}});MI.user.fun.openVipHelp=0}};h(d._openVip,".v_msgToHelper")[0].onclick=function(){MI.message(MI.user.fun.hasVipHelp.name);z();return false};h(d._hasVip,".btn_mHelp")[0].onclick=function(){if(y.style.display=="none"){MI.Bos("showVipHelpPop");UI.show(y)}else{MI.Bos("hideVipHelpPop");z()}return false};h(d._openVip,".btn_remove")[0].onclick=function(){z();MI.Bos("closeVipHelpPop");return false}}var A=+new Date,w,C;r=1;c()}}},showMusicBox:function(a){var b=this._tBox.style.display!="none",c=this._mBox,d=h(c,".ico_mState")[0],e=h(c,".btn_mPlay")[0],f=h(c,".btn_mPause")[0];this.btnNum=this._tBox.style.display!="none"?3:2;this.btnSet();(this.chat||b||a!=null)&&UI.show(this._body);UI.show(c);if(a==1){a=_("正在播放 ");UI.show(d);UI.hide(f);UI.hide(e)}else{a=_("点击播放 ");UI.show(e);UI.hide(f);UI.hide(d)}c.title=a+MI.music.info.songName+"-"+MI.music.info.singerName},hideMusicBox:function(){var a=this,b=a._tBox.style.display!="none";a.btnNum=b?2:1;a.btnSet();UI.hide(a._mBox);setTimeout(function(){!a.chat&&(!b&&MI.music.state==null)&&UI.hide(a._body)},0)},musicBoxEvent:function(){var a=0,b=this._mBox,c=h(b,".ico_mState")[0],d=h(b,".btn_mPlay")[0],e=h(b,".btn_mPause")[0];b.onmouseover=function(){a=MI.music.state;if(a!=0&&a!=1&&a!=2&&a!=6){UI.show(e);UI.hide(d)}else{UI.show(d);UI.hide(e)}UI.hide(c)};b.onmouseout=function(){a=MI.music.state;if(a!=0&&a!=1&&a!=2&&a!=6){UI.show(c);UI.hide(d)}else{UI.show(d);UI.hide(c)}UI.hide(e)};d.onclick=function(){MI.TalkList.musicPlay(MI.music.info);MI.Bos("btnMiniPlayerPlay")};e.onclick=function(){MI.TalkList.musicStop();MI.Bos("btnMiniPlayermPause")}}};p=UI.html(['<div class="sToolbar single"><div class="bg"></div><div class="sToolbarBg"><em></em></div></div><div class="mSimpleBox" style="display:none"><a href="#" class="ico_mState" style="display:none"></a><button class="btn_mPlay">',_("播放"),'<b class="mask"></b></button><button class="btn_mPause" style="display:none">',_("暂停"),'<b class="mask"></b></button><b class="mbg"></b></div><div class="goTopBox" style="display:none"><a href="#" class="btn_goTop" onclick="window.scrollTo(0,0);MI.Bos(\'btnTop\');this.blur();return false" title="',_("返回顶部"),'">',_("返回顶部"),'<b class="mask"></b></a></div><div class="qTalkBox"><a href="#" onclick="return false" class="btn_qTalk" title="',_("实时聊天加载中..."),'"><b class="mask"></b></a></div><div id="EQQ_Container"></div><div class="mHelpBox"><a href="#" class="btn_mHelp" title="',_("微帮手"),'">',_("微帮手"),'<b class="mask"></b></a></div><div class="mHelpPop" style="display:none;"><a class="btn_remove" href="###">×</a><div class="mHelpCon"><h3>',_("您的专属微帮手"),"</h3><p>",_("我们为您准备了个人专属服务通道。"),_("您的微帮手"),'<a class="goHelper" href="#" target="_blank" boss="vip_goToHelper"></a>',_("会随时为您服务！"),'</p><p><a class="v_msgToHelper" href="#" boss="vip_msgToHelper">',_("立即联系微帮手"),'</a></p></div></div><div class="vhelpBox" ><div class="flagflag"></div></div>'].join(""));MI.GoTop._body=p[0];MI.GoTop._mBox=p[1];MI.GoTop._tBox=p[2];MI.GoTop._qBox=p[3];MI.GoTop._qqBox=p[4];MI.GoTop._hasVip=p[5];MI.GoTop._openVip=p[6];MI.GoTop._vhelp=p[7];UI.linkEvent.add("MI.TalkList.resize",function(){if(MI.user.fun.goTop){clearTimeout(MI.GoTop.delay.resize);MI.GoTop.delay.resize=setTimeout(function(){MI.GoTop.position()},1E3)}});MI.ScrollBindEvent=function(a){var b=function(b){var b=b||n.event,d=UI.E(b),e=0,f=1;if(b.detail){e=b.detail>0?1:-1;if(b.wheelDelta<-3||b.wheelDelta>3)f=2}else{e=b.wheelDelta<0?1:-1;if(b.wheelDelta<-120||b.wheelDelta>120)f=2}if(a.scrollHeight<=a.offsetHeight)return true;f>1&&d.prevent();if(e===1&&a.scrollHeight-a.scrollTop-a.offsetHeight<80){d.prevent();a.scrollTop=a.scrollHeight-a.offsetHeight;return false}if(e===-1&&a.scrollTop<80){d.prevent();a.scrollTop=0;return false}return true};if(a&&!UI.hasClass(document.body,"ipad")){a.onmousewheel=b;UI.B.firefox&&a.addEventListener("DOMMouseScroll",b,false)}};var p=MI,i={sidePanel:null,movePanel:null,content:null,sidePanelResizeTimer:null,sidePanelScrollTimer:null,ret:null,eventType:"click",delay:null,currentNode:null,op:{}},y={},J={close_btn_onclick:function(){o.closePanel();UI.B.ie9?document.body.click():UI.fireEvent(document.body,"click");return false},body_onclick:function(a){if(i.curPlugin){var b=i.op[i.curPlugin];if(!("bodyClickClose"in b&&b.bodyClickClose==false)){a=UI.E(a);!i.animate&&a.target.nodeName.toLowerCase()!="button"&&!UI.hasClass(a.target,"close")&&!UI.hasClass(a.target.parentNode,"original_pic")&&!UI.hasClass(a.target,"original_pic")&&(!a.target||!UI.parents(a.target,"D")[0])&&o.closePanel()}}},movePanel_onclick:function(a){var b=UI.E(a);if((b.target.nodeName.toLowerCase()=="a"||b.target.nodeName.toLowerCase()=="input")&&i.curPlugin)(b=i.op[i.curPlugin].clearCache)&&b();UI.E(a).stop()},window_onscroll:function(a,b){if(i.sidePanel.style.display!="none"||b){var c=UI.C(i.sidePanel,"top").replace(/px;?/,"")*1,d=UI.scrollY(),e=0,f=0,g=20,h=null,c=c?c:0,e=(d*1-c)/20,f=c;clearTimeout(i.sidePanelScrollTimer);i.sidePanelScrollTimer=setTimeout(function(){clearInterval(h);h=setInterval(function(){if(--g){f=f+e;UI.C(i.sidePanel,"top",Math.round(f)+"px")}else{clearInterval(h);UI.C(i.sidePanel,"top",d+"px");o.fireEvent("windowResize")}},10)},200)}},window_resize:function(){i.sidePanel.style.display!="none"&&o.fireEvent("windowResize")}},o={setPanelNodes:function(a){i.needHideNode=a.needHideNode;i.sidePanel=a.sidePanel;i.movePanel=a.movePanel;i.contentWrap=a.contentWrap;i.close_btn=a.close_btn;i.bottomPanel=a.bottomPanel;i.setBtn=a.setBtn;UI.EA(i.close_btn,"click",J.close_btn_onclick);UI.EA(i.movePanel,"click",J.movePanel_onclick);UI.EA(document.body,"click",J.body_onclick);UI.EA(n,"resize",J.window_resize);if(i.fixed&&(UI.hasClass(document.body,"ipad")||UI.B.ie6)){UI.C(i.sidePanel,"position","absolute");UI.EA(n,"scroll",J.window_onscroll);J.window_onscroll(null,true)}if(UI.hasClass(document.body,"ipad")){var b=0;i.contentWrap.ontouchstart=function(a){b=this.scrollTop+a.touches[0].pageY;var d=a.target;if(d.nodeName==="#text")d=d.parentNode;d.nodeName!=="A"&&(d.nodeName!=="INPUT"&&d.nodeName!=="TEXTAREA"&&d.nodeName!=="LABEL")&&a.preventDefault()};i.contentWrap.ontouchmove=function(a){this.scrollTop=b-a.touches[0].pageY}}UI.EA(i.sidePanel,"mouseover",function(){if(o.getCurPluginName()=="urlProfile"){i.delay&&clearTimeout(i.delay);i.delay=setTimeout(function(){UI.A(i.movePanel,"move")!="start"&&o.showPanel()},100)}});UI.EA(i.sidePanel,"mouseout",function(){if(o.getCurPluginName()=="urlProfile"&&!MI.sidePanel.showPop){i.delay&&clearTimeout(i.delay);i.delay=setTimeout(function(){o.closePanel()},250)}})},plugin:function(a,b,c){i.ret[a]=function(b){i.eventType=c==void 0?"click":c;o.registerDom(a,b)};i.op[a]=b},setProperty:function(a,b,c){i.op[a][b]=c},registerDom:function(a,b){UI.each(b,function(b){if(b)if(i.useSidePanel){UI.EA(b,"click",function(d){d=UI.E(d);if(i.currentNode==b&&i.sidePanel&&i.sidePanel.style.display!="none"&&o.getCurPluginName()=="urlProfile"){d.stop();return false}if(i.sidePanel&&i.sidePanel.style.display=="none"||!i.sidePanel)UI.B.ie9?document.body.click():UI.fireEvent(document.body,"click");o.callPlugin.apply(b,[a,false,d]);i.currentNode=b});i.eventType=="mouseover"&&UI.EA(b,"mouseover",function(d){d=UI.E(d);if(i.sidePanel&&i.sidePanel.style.display=="none"||!i.sidePanel){UI.B.ie9?document.body.click():UI.fireEvent(document.body,"click");o.callPlugin.apply(b,[a,false,d])}else i.currentNode!=b&&o.callPlugin.apply(b,[a,false,d]);i.currentNode=b});if(i.op[a].pClass){var d=UI.parents(b,i.op[a].pClass),e=UI.parent(d[d.length-1]);if(e){UI.EA(e,"mouseout",function(a){var a=UI.E(a),b=a.target;if(i.sidePanel&&i.sidePanel.style.display!="none"&&o.getCurPluginName()=="urlProfile")if(b.nodeName=="LI"){i.delay&&clearTimeout(i.delay);i.delay=setTimeout(function(){MI.Bos("url_closePanel_mouseout");o.closePanel()},250)}else a.stop()});UI.EA(e,"mouseover",function(){i.delay&&o.getCurPluginName()=="urlProfile"&&h(e,".ico_page")[0]==i.currentNode&&clearTimeout(i.delay)})}}}else UI.A(b,"target","_blank")})},callPlugin:function(a,b,c){var d=i.op[a].domClick,e=null,f=i.op[a].getTarget,g=null;d&&(e=d.apply(this,arguments));f&&(g=f.apply(this,arguments));if(i.ret.scrollBottom||i.ret.scrollTop){var d=UI.scrollY(),f=UI.pageHeight(),k=UI.windowHeight();i.ret.scrollTop&&UI.scrollY()<i.ret.scrollTop&&n.scrollTo(0,i.ret.scrollTop);f-k-d<i.ret.scrollBottom&&n.scrollTo(0,f-k-i.ret.scrollBottom)}if(e===false)return false;if(c&&(c.target==this||c.target.parentNode==this)){c.prevent();c.stop()}if(e=="close"){UI.B.ie9?document.body.click():UI.fireEvent(document.body,"click");return false}if(e=="open"){document.location.href=this.href;return false}o.setCurPluginName(a);o.showPanel(b);d=h(i.bottomPanel,".w_sb_ftop");f=h(i.bottomPanel,".text_more")[0];d&&d.length&&UI.hide(d[0]);UI.show(f);if(!i.op[a].inited){i.op[a].inited=1;i.op[a].init&&i.op[a].init()}d=UI.height(i.contentWrap);d=d>100?d:100;o.fireEvent("beforePanelContentRemoved");f=0;for(k=i.contentWrap.childNodes.length;f<k;f++)UI.remove(i.contentWrap.childNodes[0]);i.contentWrap.innerHTML='<div class="loading" style="height:'+d+"px;background-position:50% "+d*0.382+'px;border-bottom:0!important;">&nbsp;</div>';o.fireEvent("panelInit");var d=i.op[a].loadData,j=i.op[a].initPanel;d&&d(e,function(){j&&j.apply(null,arguments);o.fireEvent("contentUpdate")},g)},showPanel:function(){UI.hide(i.needHideNode);i.sidePanel||o.fireEvent("showPanel");if(i.sidePanel.style.display=="none"||UI.A(i.movePanel,"move")=="start"){UI.show(i.sidePanel);o.fireEvent("showPanel")}(UI.hasClass(document.body,"ipad")||UI.B.ie6)&&J.window_onscroll(null,true)},closePanel:function(){MI.sidePanel.showPop=0;UI.show(i.needHideNode);if(i.sidePanel.style.display!="none"){UI.hide(i.sidePanel);o.fireEvent("closePanel")}},setPanelLeftInView:function(){var a=UI.getX(h(".main"+MI.layoutFix)[0]),b=UI.pageWidth();i.detailPanel.style.left=b-i.detailPanel.offsetWidth-a+"px";i.detailPanel.style.marginLeft="0px"},setPanelVisible:function(){UI.hasClass(document.body,"ipad")&&UI.C(i.sidePanel,"top",(n.scrollY||n.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop)+"px");UI.hide(i._side);UI.show(i.sidePanel);i.sidePanelVisible=true;o.reHeightSidePanel();setTimeout(function(){o.reHeightSidePanel()},1E3)},fireEvent:function(a){if(y[a])if(UI.isArray(y[a]))for(var b=0,c=y[a].length;b<c;b++){if(UI.isFunction(y[a][b]))y[a][b]()}else if(UI.isFunction(y[a]))y[a]()},registerEventHandler:function(a,b){y[a]?UI.isArray(y[a])?y[a].push(b):y[a]=[y[a],b]:y[a]=b},setCurPluginName:function(a){i.curPlugin=a},getCurPluginName:function(){return i.curPlugin},setCfg:function(a){i.fixed=a.fixed;i.useSidePanel=a.useSidePanel},rememberBar:function(a){i.scrollBarTop=i.contentWrap.scrollTop;setTimeout(function(){i.contentWrap.scrollTop=i.scrollBarTop},a||1E3)}};i.ret={scrollTop:0,scrollBottom:70,showPanel:o.showPanel,closePanel:o.closePanel,callPlugin:o.callPlugin,setProperty:o.setProperty,setPanelNodes:o.setPanelNodes,getPanelNodes:function(){return{sidePanel:i.sidePanel,detailPanel:i.movePanel,contentWrap:i.contentWrap,_side:i._side,bottomPanel:i.bottomPanel,setBtn:i.setBtn}},plugin:o.plugin,setCurPluginName:o.setCurPluginName,getCurPluginName:o.getCurPluginName,setEventHandler:o.registerEventHandler,setCfg:o.setCfg,showPop:o.showPop,rememberBar:o.rememberBar};p.sidePanel=i.ret;MI.ScrollBar=function(a){if(UI.isElement(a.node)){this.node=a.node;this.dir=a.dir||"y";this.autoCheckContentHeight=a.auto||false;this.init()}};MI.ScrollBar.barArray=[];MI.ScrollBar.create=function(a){MI.ScrollBar.barArray.push(new MI.ScrollBar(a));UI.A(a.node,"jsscrollIndex",MI.ScrollBar.barArray.length)};MI.ScrollBar.getBar=function(a){a=UI.A(a,"jsscrollIndex");if(a!="")return MI.ScrollBar.barArray[parseInt(a,10)-1]};MI.ScrollBar.clearBar=function(a){var b=UI.A(a,"jsscrollIndex");if(b!=""){var c=MI.ScrollBar.barArray[parseInt(b,10)-1];MI.ScrollBar.barArray[parseInt(b,10)-1]=null;c.clear();UI.A(a,"jsscrollIndex","")}};MI.ScrollBar.prototype={scrollBar:null,scrollSlider:null,scrollSliderDiv:null,init:function(){this.hideSystemBar(this.node);this.createHtml();this.setBarHeight();this.bindDragEvent();this.bindMouseWheel(this.node);this.bindBarClick();this.autoCheckContentHeight&&this.startListen(1500)},clear:function(){this.stopListen();this.scrollSlider=this.scrollBar=this.autoCheckContentHeight=this.dir=this.node=null},startListen:function(a){var a=a||1500,b=this;this.stopListen();this.timer=setInterval(function(){if(b.node.clientHeight>0){b.setBarHeight();b.setSliderTop()}},a)},stopListen:function(){if(this.timer){n.clearInterval(this.timer);this.timer=null}},hideSystemBar:function(a){this.dir=="y"&&(a.style.overflowY="hidden")},createHtml:function(){this.scrollBar=UI.html('<div style="display:none" class="ui_scroll"><div class="ui_scroll_in">\t<div style="top:0px;" class="ui_scroll_slider">\t<div class="ui_scroll_slider_in" style="height:10px;"></div>\t</div></div>\t</div>')[0];this.scrollSlider=h(this.scrollBar,".ui_scroll_slider")[0];this.scrollSliderDiv=h(this.scrollBar,".ui_scroll_slider_in")[0];UI.after(this.scrollBar,this.node)},display:0,setBarHeight:function(){var a=this.node.clientHeight,b=this.node.scrollHeight;if(a<b){UI.show(this.scrollBar);this.display=1;this.scrollBar.style.height=this.node.clientHeight+"px";a=a*a/b;UI.A(this.scrollSlider,"h",a);this.scrollSliderDiv.style.height=(a<30?30:a)+"px";this.scrollBar.style.top=this.node.offsetTop+"px";if(this.node.style.overflowY!="hidden")this.node.style.overflowY="hidden"}else{this.scrollBar.style.display="none";this.display=0}},setNodeScrollTop:function(a){var b=this.node;if(a==0){b.scrollTop=0;this.ScrollEventCall&&this.ScrollEventCall(0,0)}else{b.scrollTop=a*b.scrollHeight/b.clientHeight;this.ScrollEventCall&&this.ScrollEventCall(b.scrollTop,b.scrollTop/b.scrollHeight)}},ani:null,setSliderTop:function(){var a=this.node.scrollTop;if(this.ani){n.clearInterval(this.ani);this.ani=null}if(a==0)UI.C(this.scrollSlider,"top","0px");else{var a=a*this.node.clientHeight/this.node.scrollHeight,b=this.node.clientHeight-parseInt(UI.C(this.scrollSlider,"height"),10);a>b&&(a=b);UI.C(this.scrollSlider,"top",a+"px")}},bindDragEvent:function(){var a=this,b,c;UI.drag(this.scrollSlider,{start:function(d){d=UI.E(d);d.prevent();d.stop();b=d.y;c=parseInt(UI.C(a.scrollSlider,"top"),10)},drag:function(d){d=UI.E(d);d.prevent();d.stop();var e=d.y-b,d=a.node.clientHeight-parseInt(UI.A(a.scrollSlider,"h"),10),e=c+e;e>d&&(e=d);e<0&&(e=0);UI.C(a.scrollSlider,"top",e+"px");a.setNodeScrollTop(e)},stop:function(a){UI.E(a).stop()},call:function(){}})},bindMouseWheel:function(a){var b=this,c=function(c){c=UI.E(c);if(b.display==0)return"";a.scrollTop=a.scrollTop-150*c.wheel;b.ScrollEventCall&&b.ScrollEventCall(a.scrollTop,a.scrollHeight);b.setSliderTop();if(b.display!=0){c.prevent();c.stop()}return false};if(a){a.onmousewheel=c;UI.B.firefox&&a.addEventListener("DOMMouseScroll",c,false)}if(UI.B.ipad){var d=0;a.ontouchstart=function(a){d=this.scrollTop+a.touches[0].pageY;var b=a.target;if(b.nodeName==="#text")b=b.parentNode;b.nodeName!=="A"&&(b.nodeName!=="INPUT"&&b.nodeName!=="TEXTAREA"&&b.nodeName!=="LABEL")&&a.preventDefault()};a.ontouchmove=function(a){this.scrollTop=d-a.touches[0].pageY;b.setSliderTop()}}},bindBarClick:function(){var a=this;this.scrollBar.onclick=function(b){var c=UI.E(b);if(c.target.parentNode!=a.scrollBar)return false;var b=parseInt(a.scrollSlider.style.top,10),d=UI.getY(a.scrollSlider),c=c.y+UI.scrollY(),b=b-d+c;a.scrollSlider.style.top=b+"px";a.setNodeScrollTop(b)}},bindKeyDown:function(){var a=this,b=function(b){a.keyEventHandler(b)};UI.EA(document.body,"keydown",b);this.removeKeyEvent=function(){UI.ER(document.body,"keydown",b)}},removeKeyEvent:function(){},keyEventHandler:function(a){a=UI.E(a);if(a.key==40){this.node.scrollTop=this.node.scrollTop+80;this.setSliderTop();a.stop();a.prevent()}if(a.key==38){this.node.scrollTop=this.node.scrollTop-80;this.setSliderTop();a.stop();a.prevent()}},ScrollEventCall:null,addScrollEvent:function(a){this.ScrollEventCall=a}};MI.nFollow=function(a,b,c,d){this.followBtn=a;this.unFollowCon=b;this.sFollow=c;this.blackCfg=d;this.bindEvent()};MI.nFollow.prototype={followBtn:null,unFollowCon:null,blackCfg:null,dropList:null,bindEvent:function(){this.followBtn&&this.follow();if(this.unFollowCon){this.unFollow();this.dropList=h(this.unFollowCon,".ui_drop_follows_mod")[0]}this.blackCfg&&this.black()},follow:function(){var a=this;this.followBtn.onclick=function(){var b=UI.A(a.followBtn,"u")||"";b!=""&&a.send(b,a.followBtn,0,function(){UI.hide(a.followBtn);UI.show(a.unFollowCon);UI.show(a.sFollow)})}},unFollow:function(){var a=this,b=UI.A(a.unFollowCon,"u")||"";a.unFollowCon.onclick=function(a){UI.E(a).stop()};var c=h(a.unFollowCon,".gb_foed")[0];if(c)c.onclick=function(b){if(UI.hasClass(a.unFollowCon,"open"))UI.removeClass(a.unFollowCon,"open");else{UI.addClass(a.unFollowCon,"open");UI.show(a.dropList)}UI.E(b).stop()};var d=h(a.unFollowCon,".ui_drop_follows_lst div"),e=h(a.unFollowCon,".ui_drop_lst .level_1")[0];UI.each(d,function(c){c.onclick=UI.hasClass(c,"level_1")?function(e){UI.each(d,function(a){UI.removeClass(a,"select")});UI.addClass(c,"select");a.setRange(b,0,UI.A(c,"filter"));UI.E(e).stop()}:function(g){UI.removeClass(e,"select");if(UI.hasClass(c,"select")){UI.removeClass(c,"select");var h=false;UI.each(d,function(a){UI.hasClass(a,"level_1")||UI.hasClass(a,"select")&&(h=true)});if(h)a.setRange(b,0,UI.A(c,"filter"));else{UI.addClass(e,"select");a.setRange(b,0,UI.A(e,"filter"))}}else{UI.addClass(c,"select");a.setRange(b,1,UI.A(c,"filter"))}UI.E(g).stop()}});if(c=h(a.unFollowCon,".ui_drop_foot")[0])c.onclick=function(){b!=""&&a.send(b,a.unFollowCon,1,function(){UI.hide(a.unFollowCon);UI.removeClass(a.unFollowCon,"open");UI.show(a.followBtn);UI.hide(a.sFollow);if(!d){d=h(a.unFollowCon,".ui_drop_follows_lst div");e=h(a.unFollowCon,".ui_drop_lst .level_1")[0]}UI.each(d,function(a){UI.hasClass(a,"level_1")?UI.addClass(a,"select"):UI.removeClass(a,"select")})})};UI.EA(document.body,"click",function(){UI.hasClass(a.unFollowCon,"open")&&UI.removeClass(a.unFollowCon,"open")})},black:function(){var a=this.blackCfg;if(a.blackBtn&&a.param)a.blackBtn.onclick=function(){MI.black(a.param)}},ajax:null,setRange:function(a,b,c){MI.ajax({url:b?MI.url.follow:MI.url.unfollow,data:{u:a,filter:c},success:function(){}})},send:function(a,b,c,d,e){var f;if(!b.sending){f=c?MI.url.unfollow:MI.url.follow;b.sending=1;var g,h,i,l;g=+new Date;MI.ajax({url:f,data:{u:a,veriCode:e||"",lieuId:""},success:function(e){h=+new Date-g;b.sending=0;e=MI.json(e);if(e.result==0){if(!UI.isUndefined(e.followTips))MI.user.fun.followList=e.followTips;if(MI.user.fun.noFollowList)MI.user.fun.followList=0;MI.user.fun.followList&&(e.info&&c==1&&!a.hasString(","))&&(MI.Tag&&MI.Tag.sayHiStorage()==""||MI.app({List:function(){MI.List.listFollow(a)}}));c==1&&MI.S("time",0);UI.isFunction(d)&&d()}else MI.code.check(e.result)?MI.code.show({msg:e.msg,code:e.info,call:function(){}}):e.msg&&MI.alert(e.msg);MI.api.type==5&&f==MI.url.follow&&MI.Bos("btnQzAppFollow");i=+new Date-g;setTimeout(function(){l=+new Date-g;MI.Speed("t_asyn_follow",0.1,h,i,l)},0)}})}}};MI.syncOrder=function(a){if(MI.Widget&&MI.Widget.admin.s==1&&j("widgetWrap")&&a.length){var b=MI.TalkBox.cur,c=j("app_subscriptions"),d=function(){setTimeout(function(){UI.each(h("#app_subscriptions li a"),function(b){UI.has(a,b.title)&&UI.addClass(b,"error")})},1E3);c&&clearTimeout(MI.Widget.admin.positionDelay);b&&!b.type&&clearTimeout(b.delay.focus)};c?MI.Widget.admin.update("app_subscriptions",d):MI.Widget.admin.add("app_subscriptions",1,d)}};MI.orderKeyWord=function(a,b){MI.Bos("btnWideKeywordFollow");MI.ajax({url:MI.url.searchFeed,data:{type:2,name:a},success:function(c){c=MI.json(c);b||MI.syncOrder([a]);c.result==-1||c.result==-2||MI.dialog.showTip({html:_("已订阅成功")})}})};MI.FollowBtn.addEvent=function(a,b,c){function d(a){var d=h(a||document.body,".addAttention");d.length==0&&(d=h(a||document.body,".rich_listen_btn"));UI.each(d,function(a){var d=UI.closest(a,"li");if(!UI.A(a,"addEvent")){UI.A(a,"addEvent",1);var h='<a href="#" class="delAttention" style="display:none">'+_('取消<i class="l"></i>')+"</a>";if(MI.tmpl.fcancle)h=MI.tmpl.fcancle;h=!b||b=="WeiboAd"?UI.html(h)[0]:UI.html('<div class="foFun disabled" style="display:none">'+_("已收听")+"</div>")[0];UI.after(h,a);a.style.display=="none"&&UI.show(h);a.onclick=function(){var a=this,g=e.user(a),h="addAttention";if(b=="WeiboAd"){h="ic rich_listen_btn";MI.adStat?MI.adStat.listenInf(d,g,1):MI.app({"t/mi.Cash":function(){MI.adStat.listenInf(d,g,1)}})}MI.follow(g,a,function(){UI.hide(a);a.className=h;UI.show(a.nextSibling)});MI.Bos(f+(b||""));e.followCall&&e.followCall(a);c&&c(a);return false};if(!b||b=="WeiboAd"){e.showCancle||UI.hide(h);h.onclick=function(){var a=this,d=e.user(a);MI.follow(d,a,function(){UI.hide(a);a.className="delAttention";UI.show(a.previousSibling)});MI.Bos(g+(b||""));e.unFollowCall&&e.unFollowCall(a);c&&c(a);return false}}}})}var e=this,f="btnHeadFollow",g="btnHeadUnFollow";if(e.boss){f=e.boss[0];g=e.boss[1]}UI.isArray(a)?UI.each(a,function(a){d(a)}):d(a)};MI.FollowBtn.user=function(a){var b=UI.parents(a,"userList")[0],c="",b=b?h(b,".userInfo a,.userPic a")[0]:a.parentNode.previousSibling;b.nodeName!="A"&&a.parentNode?c=UI.A(a.parentNode,"user"):b&&(c=MI.string.id(b.href));return c};MI.FollowBtn.build=function(a,b,c,d,e){function f(a){a=h(a||h(".comList")[0],b);UI.each(a,function(a){if(!UI.hasClass(a,"cusPic")&&!UI.A(a,"followBtn")){UI.A(a,"followBtn",1);var b=MI.string.id(a.href);j.push(b);if(!h(a.parentNode,".attentBoxWrap").length){var e=a;UI.hasClass(a,"masPic")&&(e=UI.next(a));d&&(e=d(e));UI.after(UI.html('<div class="attentBoxWrap '+(c&&c!="WeiboAd"?"":"attentBox")+'" user="'+b+'"></div>')[0],e)}i.push(a)}})}var b=b||".pic a",g=this,i=[],j=[];UI.isArray(a)?UI.each(a,function(a){f(a)}):f(a);j.length&&MI.ajax({url:MI.url.userRelation,type:"get",data:"u="+j.join(","),success:function(b){b=MI.json(b);if(b.result==0){var f,j;UI.each(i,function(a){var e=MI.string.id(a.href),g;g=UI.parents(a,"userPic")[0];var i=false;g&&(g.parentNode&&UI.A(g.parentNode,"tv")=="1")&&(i=true);if(!UI.hasClass(a,"cusPic")&&!i){g=c?c=="WeiboAd"?'<a class="ic rich_listen_btn" href="#">'+_("收听")+"</a>":'<a class="foFun addAttention" href="#">'+_("+")+_("收听")+"</a>":'<input type="button" class="addAttention" value="'+_("立即收听")+'" />';if(b.info[e]){j=d?d(a).parentNode:a.parentNode;f=h(j,".attentBoxWrap")[0];e==MI.user.account&&(g="");if(f){f.innerHTML=g;b.info[e][0]&&UI.hide(f.firstChild)}}}});g.addEvent(a,c,e)}}});return false};var Q,R,N,O,P,ja,ka,E=0,la=function(){if(N)E=UI.height(N)-UI.height(O);else{O=j("mainWrapper"+MI.layoutFix);UI.each(O.childNodes,function(a){a.nodeType==1&&(E=E+UI.height(a))});E=E-UI.height(O)}E=E+MI.bottomFix};MI.bottom=function(a){if(!ja){Q=MI.bottom._lists||h(".main"+MI.layoutFix+" .LC");Q.length||(Q=h(".LC"));R=Q[Q.length-1];ja=1}if(a&&!ka){P=h("."+a)[0];ka=1}if(j(a)){if(N=UI.parents(j(a),"main"+MI.layoutFix)[0])O=N.parentNode;if(R&&UI.height(j(a))){UI.C(R,"marginBottom",0);la();UI.C(R,"marginBottom",E<-1?-E+"px":"")}}else if(a){if(a&&P){if(N=UI.parents(P,"main"+MI.layoutFix)[0])O=N.parentNode;if(R&&UI.height(P)){UI.C(P,"marginBottom",0);la();UI.C(P,"marginBottom",E<-1?-E+"px":"")}}}else{j("pageNav")&&MI.bottom("pageNav");j("pageNavWrap")&&MI.bottom("pageNavWrap");n.MIApp&&MI.App.autoHeight()}};MI.cPlayer.show=function(a,b,c){var d,e,c=c||{};if(MI.api.type!==5){if(!UI.isArray(a)){a=[a];b=0}d=false;e=[];UI.each(a,function(a){if(a&&a.video){d=true;e.push({videos:[a.video]})}else!d&&a.id?e.push(a.id):a.imgurl&&e.push(a.imgurl)});MI.cPlayer.view(b,e,{showCount:true,video:d})}else{if(c.onBeforePlay)c.onBeforePlay();a=a[b]||a[0]||a;MI.cPlayer.view(a.id||a.imgurl+"/2000",{showCount:true})}};MI.cPlayer.view=function(a,b,c){var d=Array.prototype.slice.call(arguments),e,f,g;if(MI.api.type!==5)seajs.use("PicViewer",function(b){UI.isFunction(a)?a.call(b):b.view.apply(b,d)});else{e=[];c=c||{};if(UI.isArray(b)){g=[];UI.each(b,function(a){UI.isString(a)?g.push(a):a&&a.id&&g.push(a.id)});c.idListStr=g.join(",")}else UI.isObject(b)&&(c=b);c.pvid=a;if(c.picList){MI.cPlayer.picList=c.picList;c.picList="qzone"}for(f in c)c.hasOwnProperty(f)&&c[f]!==void 0&&e.push(f+"="+encodeURIComponent(c[f]));MI.Bos({name:"btnPVQz",id:1193});f={account:MI.user.account};e.push("userConfig="+encodeURIComponent(UI.json2str(f)));qOP.adapter.fullScreenDialog({src:"http://z.t.qq.com/mb/qzone/picviewer.html#"+e.join("&")})}};MI.cPlayer.load2Show=function(a,b,c,d){d=d||{};d.showCount=true;MI.cPlayer.view(a+"-"+b,d)};MI.addImgProperty=function(a){var b=function(b,d){if(!b.img||!b.img.length)if(b.image&&b.image.length){b.img=[];b.imageInfo=b.imageInfo||[];UI.each(b.image,function(a,d){b.img[d]=b.imageInfo[d]||{};b.img[d].url=a})}else b.img&&!UI.isArray(b.img)?b.img=[b.img]:UI.isString(b)?a[d]={img:[{url:b}]}:b.img=[]};UI.each(a,function(a,d){b(a,d);a.source&&b(a.source)})};MI.videoThumb=function(a){a.src="http://mat1.gtimg.com/www/mb/images/vNoThumbs.jpg"};MI.Crs.onLoadResize=function(a){var b;b=a?UI.isElement(a)?a:UI.E(a).target:this;(a=UI.A(b,"onloadState"))||(a=0);a==0&&setTimeout(function(){var a=parseInt(UI.C(b,"width"),10)||b.offsetWidth,d=parseInt(UI.C(b,"height"),10)||b.offsetHeight,e={};if(UI.B.ie?b.complete:a>0&&d>0){UI.A(b,"onloadState",1);if(UI.A(b,"resizeto")){a=e=MI.calcImgInfo.calcByImg(b);if(d=b.src.match(/\/(\d+)$/)){d=parseInt(d[1],10);if(d<a.id&&!a.single)b.src=b.src.replace(/\/\d+$/,"/"+a.id)}d=UI.C(b,"display");b.style.cssText=a.css;b.style.display=d;UI.A(b,"resizeto","")}}},0)};var p=MI,ma=function(a,b){var c=G[b],d={};d.height=c.width/a.width*a.height;if(d.height<c.height)d.width=c.width;else{d.height=c.height;d.width=c.height/a.height*a.width}d.id=c.width;return d},pa=/t[0-9]+.qpic.cn\/mblogpic\/[a-f0-9]+/,G=[{id:60,width:60,height:60},{id:80,width:80,height:80},{id:120,width:120,height:120},{id:160,width:160,height:150},{id:220,width:220,height:999999},{id:240,width:240,height:320},{id:320,width:320,height:480},{id:460,width:460,height:999999},{id:2E3,width:2E3,height:999999}],K=function(a,b){a.height=a.height*b/a.width;a.width=b;return a},S=function(a,b){a.width=a.width*b/a.height;a.height=b;return a},qa=function(a){if(!a)return null;var b=a.match(/(fitfill|fitbound|max|mode|single),([-\d]+)x?([-\d]+)?/),a={},c,d,e;if(!b)return null;d=parseInt(b[2],10);e=parseInt(b[3],10);b=b[1];c=b==="mode"||b==="single";if(!c&&(isNaN(d)||isNaN(e)))return null;d==-1&&(d=999999);e==-1&&(e=999999);a.value=c?b==="single"?d===1:d:{w:d,h:e};a.key=b;return a},L;L=function(a,b,c){var d,e,c=c||{};c.fitmode=c.fitmode==="fitbound"?"fitbound":"fitfill";c.mode=c.mode||0;c.id=c.id||120;c.single=!!c.single;c.max=c.max||{w:999,h:2E3};b=b||{};b.width=b.width||b.w;b.height=b.height||b.h;a.width=a.width||a.w;a.height=a.height||a.h;if(c.mode===0){c.mode=5;if(b){d=b.height>0?b.width/b.height:0;e=a.width/a.height;if(d<0.5||d/e<0.5)c.mode=2}}if(!c._isByImg&&b.width>9999&&b.height>99999)b.width=b.height=0;if(b.width>0&&b.height>0){switch(c.fitmode){case "fitbound":d={};e=b.width>b.height?"width":"height";var f;f=0;for(var g=G.length;f<g;f++){d=ma(b,f);if(d[e]>=a[e]*0.9)break}if(f==g){d.width=b.width;d.height=b.height;d.id=G[--f].id}if(e=="width"){K(d,a.width);d.benchmark="height"}else{S(d,a.height);d.benchmark="width"}b=d;c.mode=5;break;default:d=c.single;e=b.width/b.height;f={};g=0;for(len=G.length;g<len;g++){f=ma(b,g);if(f.width>=a.width&&f.height>=a.height*0.9||f.width>=a.width*0.9&&f.height>=a.height)break}if(g===len||d){f.width=b.width;f.height=b.height;f.id=g===len?G[--g].id:f.id}if(e>=1){S(f,a.height);f.width<a.width&&K(f,a.width);f.benchmark="height"}else{K(f,a.width);f.height<a.height&&K(f,a.height);f.benchmark="width"}b=f}if(c.max){d=c.max;d.width=d.width||d.w;d.height=d.height||d.h;b.benchmark==="width"?b.height>d.h&&S(b,d.h):b.width>d.w&&K(b,d.w)}e=(e=c.mode)?e>0&&e<10?e:5:5;e--;d=e%3;e=(e-d)/3;d=d==0?0:d==1?-(b.width-a.width)/2:-(b.width-a.width);a=e==0?0:e==1?-(b.height-a.height)/2:-(b.height-a.height);b.left=d;b.top=a;b.w=b.width;b.h=b.height;b.l=b.left;b.t=b.top;b.single=c.single;b.css="position:relative;width:"+b.w+"px;height:"+b.h+"px;left:"+b.l+"px;top:"+b.t+"px";b.attr=' style="'+b.css+'"'}else{b={id:c.id,resizeto:[c.fitmode,",",a.width,"x",a.height,";mode,",c.mode,";max,",c.max.w,"x",c.max.h,";single,",c.single?1:0].join(""),onload:"MI.Crs.onLoadResize(this)"};b.attr=' resizeto="'+b.resizeto+'" onload="'+b.onload+'"'}return b};L.limits=G;L.fitWidth=K;L.fitHeight=S;L.calcByImg=function(a){var b;if(b=UI.A(a,"resizeto")){b=b.split(";");for(var c={},d,e=0;e<b.length;++e){d=qa(b[e]);if(d!==null)c[d.key]=d.value}b=c}else b=null;b._isByImg=true;b.fitmode=b.fitbound?"fitbound":"fitfill";if(!b.single&&!pa.test(a.src))b.single=true;c=b.fitfill||b.fitbound;e=b.single;d=a.src.match(/\/(\d+)$/);var f={w:0,h:0},g,f=UI.C(a,"display").toLowerCase(),h;a.style.cssText="width:auto;height:auto;padding:0;display:"+(f==="none"?"inline":f);h={width:a.naturalWidth||a.width,height:a.naturalHeight||a.height};a.style.display=f;f=h;if(d&&!e){d=parseInt(d[1],10);for(a=0;a<G.length;++a)if(G[a].id==d){g=G[a];break}a={width:f.width,height:f.height};d=K(a,g.width);d.height>g.height&&(d=S(a,g.height));f=d}return L(c,f,b)};p.calcImgInfo=L;MI.Tips=function(a){a||(a={});this.tmpl=a.tmpl};MI.Tips.prototype={txt:"",delay:0,delayOut:0,_body:null,hasOutHide:!0,_bodyMouseover:function(){UI.show(this._body);clearTimeout(this.delayOut)},_bodyMouseout:function(){var a=this;clearTimeout(a.delay);if(a.hasOutHide)a.delayOut=setTimeout(function(){a.hide()},150)},create:function(){if(!this._body){this._body=UI.html(this.tmpl)[0]||UI.html('<div class="cmtTip uc_hand_up"><div class="cmtTipCont"></div><div class="cmtTipArrow"><b class="caret_out"></b><b class="caret_in"></b></div></div>')[0];this._cont=this._body.firstChild;this._arrow=this._body.lastChild;UI.append(this._body,document.body);UI.EA(this._body,"mouseover",UI.bind(this._bodyMouseover,this,true));UI.EA(this._body,"mouseout",UI.bind(this._bodyMouseout,this,true));UI.EA(this._body,"click",function(a){UI.E(a).stop()})}},build:function(a){var b=this;b.hasOutHide=true;a.area=a.area||document.body;UI.proxyEvent(a.area,"mouseover",function(){return function(){clearTimeout(b.delayOut);var c=this;if(UI.A(c,"title")){UI.A(c,"titleName",UI.A(c,"title"));c.title=""}b.delay=setTimeout(function(){b.show(c,a.txt);UI.C(b._cont,"width",a.width?a.width+"px":"")},150)}},[a.target]);UI.proxyEvent(a.area,"mouseout",function(){return function(){clearTimeout(b.delay);b.delayOut=setTimeout(function(){b.hide()},100)}},[a.target]);a.click&&UI.proxyEvent(a.area,"click",function(){return function(){a.click.apply(this)}},[a.target])},show:function(a,b){this.hasOutHide=true;this.create();UI.hide(this._arrow);this._cont.style.cssText="";if(UI.isString(b)){this._cont.innerHTML=b;UI.show(this._body);this.position(a)}else b.call(a,this);this.display=1},position:function(a,b){var c=this._body,d=UI.getX(a),e=UI.getY(a),f=UI.height(a),g=UI.width(c),h=UI.windowWidth(),i="_up",l=UI.scrollY(),j=MI.scrollHack(a);b||(b={});d+g>h&&(d=h-g);c.style.cssText=c.style.cssText+(";top:"+(e+f-j+5)+"px;left:"+(d-(b.offsetX||20))+"px");c.style.zIndex=UI.closest(a,".D")?"10000":"";d=UI.height(c);if(d+UI.getY(c)>l+UI.windowHeight()){c.style.top=e-d-5-j+"px";i="_down"}c.className=c.className.replace(/_[updown]+/g,i)},hide:function(){if(this.display){if(MI.Tips.xhr){MI.Tips.xhr.abort();MI.Tips.xhr=null}UI.hide(this._body);this._body.style.left="-999px";this.display=0}}};MI.Tips.txt=[_("这条消息来自手机微博。")+_("<br>想要成为微博手机达人？")+_("点")+'<a href="http://t.qq.com/client.php?t=mobile" onclick="MI.Bos(\'btnPhoneIconTip\')" target="_blank" class="ulink">'+_("这里")+"</a>"];MI.Tips.url={};MI.newCount.setTitle=function(a,b){a=a||0;if(MI.user.fun.wideStyle&&MI.boss==11&&MI.Pane&&MI.Pane.hash&&MI.Pane.hash!="home")MI.newCountNum=0;else{if(!document.titleTmp)document.titleTmp=document.title;document.title=b&&a>b?"("+b+"+) "+document.titleTmp:(a?"("+a+") ":"")+document.titleTmp}};UI.clear(function(){try{MI.TalkList.musicStop()}catch(a){}});MI.BotAd=function(a){function b(){var a="http://te.paipai.com/tws/etgsh/display?fu=http%3A%2F%2Fetg.qq.com%2Fbillboard%2Fjson%2Fimgs960_90_3.js&pps=etg.12543_25155_28_115&t="+MI.random();UI.getScript(a);MI.BotAd.cb=function(a){if(a.errCode)return false;if(a.data){d=a.data;c()}};b=c}function c(){if(d){var a=d,b=a.length>1?parseInt(a.length*Math.random()):0,c=a[b],f=new Image;f.onload=function(){var a=j("WBBotAd"),g=11==MI.boss?1:2;if(a){h='<a href="'+c.clickUrl+"\" boss=\"{name:'WBBotAD_PaiPaiClick',iBak1:"+e+",iBak2:"+g+",sBak1:'"+c.imageUrl+"',sBak2:'"+c.clickUrl+'\',id:1595}" target="_blank"  title="'+c.word+'" class="spAdA" style="float:left; width:960px"><img src="'+f.src+'"></a>';a.innerHTML=h}else{var h='<div id="WBBotAd" class="spAdPn clear" style="width:960px; margin:10px auto 0; position:relative;z-index:0"><a href="'+c.clickUrl+"\" boss=\"{name:'WBBotAD_PaiPaiClick',iBak1:"+e+",iBak2:"+g+",sBak1:'"+c.imageUrl+"',sBak2:'"+c.clickUrl+'\',id:1595}" target="_blank" title="'+c.word+'" class="spAdA" style="float:left; width:960px"><img src="'+f.src+'"></a></div>',a=UI.html(h)[0];UI.before(a,j("Copyright"))}MI.Bos({name:"WBBotAD_PaiPaiShow",iBak1:e,iBak2:g,sBak1:c.imageUrl,sBak2:c.clickUrl,id:1595});d.length>1&&d.splice(b,1)};f.src=c.imageUrl}}var d,e;if(MI.user.fun.pageMode){e=1;a?setTimeout(b,a):setTimeout(b,3E3)}else{var f=0;e=0;UI.linkEvent.add("autoMore",function(a){a=a.times;if(a==2&&!f){b();f=1}a==0&&f&&(f=0)})}};MI.RightFloatAd=function(a){if(a.errCode)return false;if(a.data){var a=a.data,b=j("WBRightFloatAd");if(b){var c=parseInt(a.length*Math.random()),d=a[c];if(""==d.word)d.word="拍拍精品";a=new Image;a.src=d.imageUrl;a.onload=function(){var a='<a href="'+d.clickUrl+'" target="_blank" style="font-weight:bold;margin-left:10px" card="1" ctype="3" title="">'+d.word+'</a><div class="mobileBox" style="clear:both;text-align:center;color:#666;padding:4px;width:309px;"><a href="'+d.clickUrl+'" target="_blank" style="font-weight:bold;" card="1" ctype="3" ><img style="vertical-align:top;border:0;width:309px;height:140px;" src="'+d.imageUrl+'" title="'+d.word+'"></a></div>';UI.EA(b,"click",function(a){var a=UI.E(a),b=0;"img"==a.target.tagName.toLowerCase()?b=0:"a"==a.target.tagName.toLowerCase()&&(b=1);MI.Bos({name:"WBRightFloatAd_PaiPaiClick",iBak1:MI.boss,iBak2:b,sBak1:d.imageUrl,sBak2:d.clickUrl,id:1595})});if(b){b.innerHTML=a;UI.show(b);MI.Bos({name:"WBRightFloatAd_PaiPaiShow",iBak1:MI.boss,sBak1:d.imageUrl,sBak2:d.clickUrl,id:1595});b=null}}}}};UI.linkEvent.add("MI.TalkList.talkSuccess",function(a){var b=a.target;UI.A(b,"tv")!=""&&(MI.adStat?MI.adStat.talkListInf(a.target,a.type):MI.app({"t/mi.Cash":function(){MI.adStat.talkListInf(a.target,a.type)}}));if(UI.A(b,"tv")=="1"){var c=0,d=UI.A(b,"toprec")=="1";UI.each(h(UI.parent(b),"li"),function(a,d){if(a.id==b.id){c=d+1;return true}});var e="";if(a.type==1){e="btnRelayRecom";d&&(e="btnRelayTopRecom")}else if(a.type==5){e="btnComtRecom";d&&(e="btnComtTopRecom")}MI.Bos({name:e,id:1192,sBak1:b.id,iBak1:c})}});UI.linkEvent.add("MI.TalkList.event",function(a){var b=a.target;UI.A(b,"tv")!=""&&(MI.adStat?MI.adStat.showInf(b):MI.app({"t/mi.Cash":function(){MI.adStat.showInf(b)}}))});UI.linkEvent.add("MI.TalkList.talkRemove",function(a){var b=a.target,c=parseInt(a.type);UI.A(b,"tv")!=""&&(MI.adStat?MI.adStat.talkRemoveInf(b,c):MI.app({"t/mi.Cash":function(){MI.adStat.talkRemoveInf(b,c)}}))});UI.linkEvent.add("MI.TalkList.video",function(a){var b=a.target,a=UI.parents(b,"replyBox"),b=UI.parents(b,"msgBox"),c=a.length&&a[0].parentNode.parentNode||b.length&&b[0].parentNode;UI.A(c,"tv")!=""&&(MI.adStat?MI.adStat.clickInf(c,"openvideo"):MI.app({"t/mi.Cash":function(){MI.adStat.clickInf(c,"openvideo")}}))});UI.linkEvent.add("MI.TalkList.like",function(a){var b=a.target,c=a.isLike;b&&UI.A(b,"tv")!=""&&(MI.adStat?MI.adStat.talkListInf(b,c?"like":"unlike"):MI.app({"t/mi.Cash":function(){MI.adStat.talkListInf(b,c?"like":"unlike")}}))});UI.linkEvent.add("MI.TalkList.adClick",function(a){var b=a.target,c=a.el;c&&UI.A(c,"tv")!=""&&(MI.adStat?MI.adStat.adClickInf(b,c):MI.app({"t/mi.Cash":function(){MI.adStat.adClickInf(b,c)}}))});MI.butlerTip=function(a,b){if(a&&UI.isElement(a))MI.butlerTip.el=a;else{b=a;a=MI.butlerTip.el}b=b||{};b.count=parseInt(b.count||0);b.quanid=b.quanid||"";b.isFirstPage=b.isFirstPage||0;var c=parseInt(UI.A(a,"data-count")||0),d=UI.A(a,"data-quanid")||"",e=h(a,".ico_newMsg")[0];if(d!=b.quanid||b.isFirstPage==1){c=0;UI.A(a,"href","http://guanjia.t.qq.com/"+(b.quanid?"?quanid="+b.quanid:""));UI.A(a,"data-quanid",b.quanid)}UI.A(a,"data-count",c+b.count);MI.user.fun.fobbidMessage&&b.count&&!UI.cookie("butlerTip")?UI.show(e):UI.hide(e);if(!UI.A(a,"data-init")){UI.linkEvent.add("MI.TalkList.more",function(a){a&&a.info&&MI.butlerTip({count:a.info.filter,quanid:a.info.quanid,isFirstPage:a.info.isFirstPage})});MI.tips.build({area:UI.parent(a),target:".btn_manage",txt:function(a){var b=parseInt(UI.A(this,"data-count")),c=parseInt(UI.A(this,"data-quanid"));UI.A(this,"data-isHover");var d="微博管家：",h="查看";if(MI.user.fun.fobbidMessage)if(b){d=d+"有新过滤的微博";UI.cookie("butlerTip")||UI.cookie("butlerTip",1,1,"t.qq.com")}else{d=d+"没有新过滤的微博";h="查看历史"}else{d=d+"过滤已关闭";h="去开启"}d=d+(' <a href="http://guanjia.t.qq.com/'+(c?"?quanid="+c:"")+'" target="_blank" onmousedown="MI.Bos({name: \'guanjiaRootLink\', id: 1192})">'+h+"</a>");b&&UI.A(this,"data-isHover","1");UI.hide(e);a._cont.innerHTML=d;UI.show(a._body);UI.C(a._cont,"padding","5px 10px");UI.C(a._arrow,"left","auto");UI.C(a._arrow,"right","56px");UI.show(a._arrow);a.position(this);b=UI.getX(this);c=UI.width(a._body);UI.C(a._body,"left",b-c+30+"px");MI.Bos({name:"guanjiaRootShow",id:1192})}});UI.EA(a,"mousedown",function(){MI.Bos({name:"guanjiaRootIcon",id:1192})});UI.A(a,"data-init","1")}};MI.antiClkjacking=function(a){top!==n&&setTimeout(function(){document.domain=MIDomian;try{top.document.domain}catch(b){try{parent.document.domain}catch(c){MI.api.type==5?qOP.adapter.legalable(function(b){if(!b)top.location=a||"http://t.qq.com"}):UI.getScript("http://cdn.qplus.com/js/qplus.api.js",function(){if(!qplus||!qplus.config||!qplus.config.isQplus){document.body.style.display="none";top.location=a||"http://t.qq.com"}})}}},3E3)};MI.visibleBodyOnly={visible:[],data:[]};MI.visibleBodyOnly.add=function(a,b){this.data.length||UI.linkEvent.add("windowScroll",this.handler);this.data.push({el:a,handler:b,count:0})};MI.visibleBodyOnly.remove=function(a){for(var b in this.data)this.data[b].el==a&&this.data.splice(b,1);this.data.length||UI.linkEvent.remove("windowScroll",this.handler)};MI.visibleBodyOnly.handler=function(a){var b=MI.visibleBodyOnly,c;for(c in b.data){if(!b.data[c].height||b.data[c].count>3){b.data[c].height=UI.height(b.data[c].el);b.data[c].count=0}b.data[c].count++;var d=b.data[c].height,e=UI.getY(b.data[c].el);if(d>a.windowHeight&&e+d>a.scrollY+a.windowHeight&&e<a.scrollY){if(b.data[c].visible!=true){b.data[c].handler(true,b.data[c].el,a);b.data[c].visible=true}}else if(b.data[c].visible!=false){b.data[c].handler(false,b.data[c].el,a);b.data[c].visible=false}}};MI.mustacheTmpl=function(a,b,c){var d=function(a){if(a&&!a.__mureplaced){a.__mureplaced=true;UI.each(a,function(b,c){typeof b==="function"?a[c]=function(){return b}:(UI.isArray(b)||UI.isObject(b))&&d(b)})}};seajs.use(["lib/mustache"],function(e){var f,g,h=function(a){MI.tmpl[g]=MI.tmpl[g]||a;d(b);c(e.render(a,b))};if(a.indexOf("{{")>-1)f=a;else{g="mu."+a;f=MI.tmpl[g]}if(f)h(f);else(f=UI.G(g))?h(f.value||f.innerHTML):seajs.use(["tmpl/"+g],h)})};MI.config({mi:{"utils/addQQ":["addQQ"],"utils/addNote":["Note.add"]}});MI.api.mobile||(1==MI.hostType?setTimeout(function(){MI.navMenu();MI.linkBoss();MI.badge.build()},0):2==MI.hostType&&(MI.url.medal="http://xy.t.qq.com/asyn/medalpoint.php",MI.badge.build()),setTimeout(function(){MI.user.fun.goTop&&MI.user.account&&MI.GoTop.build();MI.user.fun.shortcuts&&MI.Shortcuts.add(MI.Shortcuts.talkList)},100),MI.dialog=new MI.Dialog,MI.code=new MI.Code,MI.card=new MI.Card,MI.tips=new MI.Tips,MI.user.fun.showBotAd&&(11==MI.boss||7==MI.boss)&&MI.BotAd(),UI.ready(function(){MI.S(function(){MI.Uin();MI.TalkBox&&MI.TalkBox.showDraft(MI.talkBox)});UI.proxyEvent(document.body,"mousedown",function(){return function(){var a=UI.A(this,"boss");if(a)if(a.hasString("{")){a=MI.json(a);MI.Bos(a)}else{a=a.split(",");MI.Bos.apply(null,a)}}},["*|boss="]);setTimeout(function(){var a=+new Date,b,c,d=80,e=0,h=0,i=0,j=0,o=0,p=function(){b=+new Date;var n=b-a;if(n<d){clearTimeout(c);c=setTimeout(p,d+100)}else{a=b;e=UI.scrollY();if(e<h)i=1;else if(e>h)i=-1;else{i=0;if(n<=500)return}o=UI.windowHeight();if(i==0||e+o>j||e>j-o*1.5&&e<=j-o||Math.abs(h-e)>o*2)j=UI.pageHeight();n={action:i,scrollY:e,pageHeight:j,windowHeight:o};MI.Crs.disabled||MI.Crs();MI.autoMore&&MI.autoMore(n);MI.card&&MI.card.hide();UI.linkEvent("windowScroll",n);h=e}};UI.B.ie&&(d=300);MI.Crs.disabled||MI.Crs(1);UI.EA(n,"scroll",p);UI.linkEvent.add("windowScrollDo",p)},10);var a;UI.EA(n,"focus",function(){clearTimeout(a);a=setTimeout(function(){UI.linkEvent("windowFocus")},100)});MI.hostType==1&&setTimeout(function(){MI.app("Base",function(){var a;a=j("LUI")||j("LUI_wide");var b=j("UIn");if(a=a==null?b:a){MI.tips.build({area:a,target:".tIcon.ico_gy",txt:MI.TalkList.prototype.gongyiTips,click:function(){MI.Bos("btnClickGongyi")}});MI.tips.build({area:a,target:".ico_level",txt:MI.TalkList.prototype.levelTips});MI.tips.build({area:a,target:".ic_mall_small",txt:MI.TalkList.prototype.mallTips});MI.tips.build({area:a,target:".myIcon",txt:MI.TalkList.prototype.removeIcon});MI.tips.build({area:a,target:".ico_master_star",txt:MI.TalkList.prototype.wbstarTips})}(a=j("listWrapper"))&&MI.tips.build({area:a,target:".ico_level",txt:MI.TalkList.prototype.levelTips});Math.random()<=0.2&&UI.getScript("http://mat1.gtimg.com/www/js/common.js",function(){n.checkNonTxDomain&&checkNonTxDomain(1,10)})})},3E3);var b=j("cssCheck"),c,d;setTimeout(function(){if(b&&UI.C(b,"display")!="none"){c=j("mainStyle");d=j("mainStyle2");MI.Bos({name:"btnOnerrorCss",id:1210});c&&UI.getCss(c.href.replace(MI.appHost[0],MI.appHost[1]),function(){if(UI.C(b,"display")=="none")MI.Bos({name:"btnOnerrorCssSuccess",id:1210});else{UI.getCss(c.href.replace(MI.appHost[0],MI.appHost[2]),function(){MI.Bos({name:UI.C(b,"display")=="none"?"btnOnerrorCssSuccess2":"btnOnerrorCssFail2",id:1210})},d);MI.Bos({name:"btnOnerrorCssFail",id:1210})}},d)}},200);MI.user.fun.isInnerIP||MI.antiClkjacking();MI.unLoginRich=function(){var a=h(this,".rich_longwb_box,.rich_dajia");if(a.length){var a=a[0],b="";if(UI.hasClass(a,"rich_dajia"))(a=UI.A(a,"dajiamsgid"))?b="http://dajia.qq.com/blog/"+a:MI.newQucikLogin();else{var b=UI.closest(a,"li"),c=UI.closest(a,".orginCnt"),a="";if(c=b||c)if(b=h(c,".replyBox")[0])(b=h(b,".pubInfo .left .time,.pubInfo .left .zfNum")[0])&&(a=MI.string.id(UI.A(b,"href")));else a=UI.A(c,"id");b="http://p.t.qq.com/longweibo/index.php?id="+MI.string.parseInt(a)}n.open(b)}else MI.newQucikLogin()};var e=j("talkList");if(!MI.user.account&&e&&MI.api.type!=5){MI.user.fun.openQuickLogin&&n.mb_quick_reg&&MI.app("utils/login",function(a){mb_quick_reg=a});UI.proxyEvent(e,"click",function(){return function(a){MI.unLoginRich.call(this,a);a.prevent()}},[".orderDetail",".rich_mod"],10)}}))})(window);/*version:149034*//*  |xGv00|9336bcc57a3e54171fa2c68e6c4b132f */